<!DOCTYPE html>
<html lang="vi">

<head>
   <title> black - quÃªn Ä‘i ná»—i lo PEP8  - The PyMiers</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="robots" content="" />
  <link rel="stylesheet" type="text/css" href="/theme/css/app.css">
<link rel="stylesheet" type="text/css" href="http://pp.pymi.vn/theme/css/pygment.css">
  <!--
  <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
  -->

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <meta name="author" content="Pymiers" />
  <meta name="description" content="" />    <link href="http://pp.pymi.vn/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The PyMiers Full Atom Feed" />         
  <meta name="tags" content="python" />
  <meta name="tags" content="black" />
  <meta name="tags" content="formatter" />
</head>

<body>
  <main class="wrapper">
    <section class="container">
      <header class='column'>
        <h1 class='title'><a href="http://pp.pymi.vn/">The PyMiers</a></h1>
      </header>

      <div class="section">
        <div class="row navbar">
          <div class="column nav-item is-active"><a href="http://pp.pymi.vn/category/trang-chu/">Trang chá»§</a></div>
           <div class="column nav-item "><a href="http://pp.pymi.vn/pages/about/">About</a></div>
          <div class="column nav-item "><a href="http://pp.pymi.vn/pages/add/">Táº¡o bÃ i viáº¿t</a></div>
          <div class="column nav-item "><a href="http://pp.pymi.vn/pages/rss/">RSS</a></div>
          <div class="column nav-item"><a href="/archives">Archives</a></div>
        </div>
      </div>
    </section>

<section class="container">
  <header>
    <h2 class="entry-title">
      <a href="http://pp.pymi.vn/article/black/" rel="bookmark"
         title="Permalink to black - quÃªn Ä‘i ná»—i lo PEP8">black - quÃªn Ä‘i ná»—i lo PEP8</a></h2>  
  </header>
  <footer class='center'>
    <time class="published" datetime="2020-03-15T00:00:00+07:00"> 15/03/2020 </time>
    <address class="vcard author">By
                    <a class="url fn" href="http://pp.pymi.vn/author/hvnsweeting/">hvnsweeting</a>
 in <a href="http://pp.pymi.vn/category/trang-chu/">Trang chá»§</a>
                </address>     <em>Tags</em>:     <a href="http://pp.pymi.vn/tag/python/"><em>python</em></a>,     <a href="http://pp.pymi.vn/tag/black/"><em>black</em></a>,     <a href="http://pp.pymi.vn/tag/formatter/"><em>formatter</em></a>    </footer>
  <br>
  <div class="entry-content">
    <h2>Code Python pháº£i chuáº©n PEP8</h2>
<p>Ngay khi báº¡n má»›i lÃ m quen vá»›i Python Ä‘Æ°á»£c vÃ i tuáº§n, má»›i biáº¿t tÃ­ for loop hay
function, PEP8 tá»« Ä‘Ã¢u Ä‘Ã³ sáº½ hiá»‡n ra.
PEP8 lÃ  hÆ°á»›ng dáº«n viáº¿t code chuáº©n Python, chá»© khÃ´ng pháº£i chuáº©n C, Java, hay
khÃ´ng cÃ³ chuáº©n nÃ o cáº£.
Náº¿u tá»± hoc code má»™t mÃ¬nh, cÃ³ khi giá» nÃ y báº¡n Ä‘Ã£ lÃ m ra vÃ i chá»¥c script, cháº¡y
áº§m áº§m mÃ  váº«n chÆ°a 1 láº§n nghe PEP8. TiÃªu chuáº©n code lÃ  thá»© chá»‰ hiá»‡n ra rÃµ rÃ ng,
khi ta lÃ m viá»‡c vá»›i ngÆ°á»i khÃ¡c, chá»‰ sau vÃ i function, sá»± mÃ¢u thuáº«n vá» style
sáº½ hiá»‡n ra ngay, vÃ  khi Ã´ng ChÃ­ PhÃ¨o khÃ´ng Ä‘á»“ng Ã½ vá»›i style cá»§a BÃ¡ Kiáº¿n, thÃ¬
cáº£ 2 pháº£i lÃªn phÆ°á»ng vÃ  thá»‘ng nháº¥t dÃ¹ng chuáº©n chung mÃ  lÃ ng VÅ© Äáº¡i Ä‘áº·t ra - hay
á»Ÿ Ä‘Ã¢y ta gá»i lÃ  PEP8.</p>
<p>PEP8 cÃ³ thá»ƒ xem chi tiáº¿t táº¡i <a href="https://www.python.org/dev/peps/pep-0008/">PEP0008</a>
hay <a href="https://pep8.org/">https://pep8.org/</a>,
tiÃªu chuáº©n PEP8 Ä‘Æ°á»£c cháº¥p nháº­n trÃªn toÃ n trÃ¡i Ä‘áº¥t, tháº­m chÃ­ <a href="https://medium.com/pymi/cia-d%C3%B9ng-python-r%E1%BA%A5t-nhi%E1%BB%81u-32144ecddd50">CIA</a>,
Google cÅ©ng
chá»‰ sá»­a Ä‘i chÃºt xÃ­u, bá»Ÿi nÃ³ lÃ  chuáº©n hay, chuáº©n tá»‘t.</p>
<h2>Chuyá»‡n Ä‘au Ä‘áº§u vá» xÃ¬ tai (style)</h2>
<p>Style vá»‘n lÃ  má»™t thá»© dá»… gÃ¢y ra tranh cÃ£i. TÃ´i thÃ­ch kiá»ƒu Viá»‡t Nam dá»‹u dÃ ng,
anh thÃ­ch kiá»ƒu PhÃ¡p say Ä‘áº¯m, Ã´ng kia thÃ­ch kiá»ƒu Má»¹ máº¡nh máº½ vÃ  hÃ¹ng há»¥c. Váº­y
ai lÃ  ngÆ°á»i sai?
Cuá»™c tranh cÃ£i vá» style viáº¿t code Ä‘Ã£ kÃ©o dÃ i suá»‘t tá»« ngÃ y láº­p trÃ¬nh xuáº¥t hiá»‡n,
tá»›i giá» váº«n chÆ°a káº¿t thÃºc. Bá»Ÿi Ä‘Ã£ lÃ  style, thÃ¬ khÃ³ nÃ³i chuyá»‡n Ä‘Ãºng sai.</p>
<p>Tháº¿ rá»“i má»i cuá»™c chÆ¡i vui, cÅ©ng pháº£i Ä‘áº¿n há»“i káº¿t. Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘Æ¡n
giáº£n xuáº¥t hiá»‡n vá»›i tÃªn hai chá»¯ <code>Go</code> (sau Ä‘á»ƒ trÃ¡nh nháº§m láº«n thÃ¬ gá»i lÃ  Golang),
vÃ  Ä‘á»ƒ tÄƒng thÃªm sá»± Ä‘Æ¡n giáº£n, nÃ³ Ä‘i kÃ¨m
sáºµn má»™t chÆ°Æ¡ng trÃ¬nh vá»›i tÃªn <code>gofmt</code> (Ä‘á»c lÃ  gÃ¢u pháº±m) - chÆ°Æ¡ng trÃ¬nh nÃ y sáº½
format táº¥t cáº£ code trong thÆ° má»¥c vá» má»™t chuáº©n mÃ  nÃ³ Ä‘Ã£ quy Ä‘á»‹nh. Ban Ä‘áº§u,
ngÆ°á»i ta váº«n cÃ²n tranh cÃ£i vá» viá»‡c bá»‹ Ã©p style, nhÆ°ng rá»“i sau má»™t há»“i, lá»£i Ã­ch
cá»§a má»—i cÃ¡i tÃ´i Ä‘Ã£ sá»¥p Ä‘á»• trÆ°á»›c lá»£i Ã­ch táº­p thá»ƒ mÃ  <code>gofmt</code> mang láº¡i: má»i Ä‘oáº¡n
code Ä‘á»u trÃ´ng giá»‘ng nhau, khiáº¿n style khÃ´ng cÃ²n gÃ¬ Ä‘á»ƒ tranh cÃ£i, láº­p trÃ¬nh viÃªn
nhÃ¬n code cá»§a tháº±ng kia cÅ©ng giá»‘ng nhÆ° cá»§a mÃ¬nh, dá»… Ä‘á»c - dá»… hiá»ƒu hÆ¡n, expert
hay newbie Ä‘á»u chung 1 style cáº£.</p>
<p><code>gofmt</code> khÃ´ng pháº£i lÃ  chÆ°Æ¡ng trÃ¬nh Ä‘áº§u tiÃªn lÃ m váº­y, trÆ°á»›c Ä‘Ã¢y, trong cá»™ng
Ä‘á»“ng Python Ä‘Ã£ xuáº¥t hiá»‡n 1 chÆ°Æ¡ng trÃ¬nh tÃªn <code>autopep8</code> hay Google cÅ©ng cÃ³
<a href="https://github.com/google/yapf">YAPF</a>. NhÆ°ng <code>Go</code> lÃ  ngÃ´n ngá»¯ Ä‘áº§u tiÃªn mang
code formatter vÃ o chÃ­nh thá»‘ng, chÃ­nh thá»©c cháº¥m dá»©t cuá»™c chiáº¿n vÃ´ bá»• vá» style
kÃ©o dÃ i vÃ i tháº­p ká»·. Äá»ƒ rá»“i tá»« Ä‘Ã³, cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c Ä‘ua nhau há»c theo
nhÆ° <a href="https://github.com/rust-lang/rustfmt">Rust</a>,
<a href="https://elixir-lang.org/blog/2018/01/17/elixir-v1-6-0-released/">Elixir</a>
vÃ  Python thÃ¬ cÃ³ <a href="https://github.com/psf/black">black</a>.</p>
<p>KhÃ´ng cÃ³ giáº£i phÃ¡p nÃ o Ä‘á»ƒ giáº£i quyáº¿t 1 váº¥n Ä‘á» tá»‘t hÆ¡n lÃ  lÃ m cho nÃ³ biáº¿n máº¥t.</p>
<h2>black lÃ  gÃ¬</h2>
<p>Black lÃ  má»™t cÃ¢u lá»‡nh cÃ i báº±ng pip: <code>pip install black</code>, yÃªu cáº§u Python3.6 trá»Ÿ
lÃªn má»›i cháº¡y. <code>black</code> xuáº¥t hiá»‡n nhÆ° má»™t project cá»§a má»™t láº­p trÃ¬nh viÃªn nÃ o Ä‘Ã³
trÃªn in tÆ¡ nÃ©t, sau vÃ i nÄƒm trá»Ÿ nÃªn cá»±c ká»³ phá»• biáº¿n, vÃ  giá» Ä‘Ã£ chÃ­nh thá»©c
Ä‘Æ°á»£c náº±m dÆ°á»›i mÃ¡i nhÃ  PSF (Python Software Foundation) cÃ¹ng vá»›i <code>requests</code>.</p>
<p><a href="https://github.com/psf/black/blob/master/black.py">https://github.com/psf/black/blob/master/black.py</a></p>
<p>Code cá»§a black chá»‰ vá»n váº¹n 4000 dÃ²ng, sá»­ dá»¥ng cÃ¡c tÃ­nh nÄƒng má»›i nháº¥t cá»§a Python
nhÆ° f-string, type annotation, asyncio...
(vÃ¬ tháº¿ nÃªn yÃªu cáº§u Python3.6+ Ä‘á»ƒ cháº¡y, máº·c dÃ¹ váº«n cÃ³ thá»ƒ format code 2.7)</p>
<h2>DÃ¹ng black Ä‘á»ƒ format code Python</h2>
<p>VÃ­ dá»¥ cÃ³ 1 file foo.py</p>
<div class="highlight"><pre><span></span><code><span class="nv">def</span> <span class="nv">sum_two</span><span class="ss">(</span><span class="nv">a</span>,<span class="nv">b</span><span class="ss">)</span>:
    <span class="nv">c</span><span class="o">=</span> <span class="nv">a</span>  <span class="o">+</span> <span class="nv">b</span>


    <span class="k">return</span> <span class="nv">c</span>
</code></pre></div>

<p>Náº¿u thÃ nh tháº¡o PEP8, tháº¥y ngay cÃ³ 4 chá»— pháº£i sá»­a á»Ÿ Ä‘Ã¢y:
<code>a,b</code> thiáº¿u dáº¥u space sau <code>,</code>, <code>c</code> thiáº¿u dáº¥u space theo sau, sau <code>a</code> thá»«a 1
space, thá»«a 1 dÃ²ng
trá»‘ng trÆ°á»›c return. Váº­y chá»‰ 3 dÃ²ng code, ngÆ°á»i review pháº£i gÃµ ra 4 "váº¥n Ä‘á»"
vá» style, vÃ  ngÆ°á»i code ra 3 dÃ²ng nÃ y, khi Ä‘á»c review cÅ©ng cháº³ng vui váº» gÃ¬,
ká»ƒ cáº£ ngÆ°á»i ta nÃ³i Ä‘Ãºng.</p>
<p>Cháº¡y:</p>
<div class="highlight"><pre><span></span><code>$ black foo.py
reformatted foo.py
All <span class="k">done</span>! âœ¨ ğŸ° âœ¨
<span class="m">1</span> file reformatted.

$ cat foo.py
def sum_two<span class="o">(</span>a, b<span class="o">)</span>:
    <span class="nv">c</span> <span class="o">=</span> a + b

    <span class="k">return</span> c
</code></pre></div>

<p>Äáº¹p, chuáº©n, ngon! KhÃ´ng cÃ²n gÃ¬ mong Ä‘á»£i thÃªm.
black cÃ³ nhiá»u option Ä‘á»ƒ chá»‰nh style cho phÃ¹ há»£p vá»›i tiÃªu chuáº©n cá»§a báº¡n,
hay dÃ¹ng nháº¥t lÃ  Ä‘á»ƒ set Ä‘á»™ dÃ i cá»§a 1 dÃ²ng, vá»‘n lÃ  79 kÃ½ tá»± theo chuáº©n PEP8,
thÃ¬ black máº·c Ä‘á»‹nh lÃ  88:</p>
<div class="highlight"><pre><span></span><code>  -l, --line-length INTEGER       How many characters per line to allow.
                                  <span class="o">[</span>default: <span class="m">88</span><span class="o">]</span>
</code></pre></div>

<p>Báº¡n cÃ³ thá»ƒ gá»i <code>black -l79 .</code> Ä‘á»ƒ theo PEP8.</p>
<h2>HÃ nh Ä‘á»™ng cá»§a chÃºng ta</h2>
<p>ÄÃ£ Ä‘áº¿n lÃºc Ä‘á»ƒ quÃªn Ä‘i viá»‡c format code báº±ng tay, nhá»› vÃ i chá»¥c tiÃªu chuáº©n
cá»§a PEP8, format code hÃ£y Ä‘á»ƒ cho Ä‘en (black) khÃ´ng vÃ¢u lo - viá»‡c nÃ y Ä‘á»ƒ
Ä‘en khÃ´ng vÃ¢u lo.
ThÃªm dÃ²ng nÃ y vÃ o <code>Makefile</code> cá»§a báº¡n:</p>
<div class="highlight"><pre><span></span><code><span class="n">fmt</span><span class="o">:</span>
    <span class="n">black</span> <span class="o">-</span><span class="n">l79</span> <span class="o">.</span>
</code></pre></div>

<p>hay cÃ i Ä‘áº·t text editor/IDE tá»± Ä‘á»™ng cháº¡y <code>black</code> sau má»—i láº§n save code.</p>
<p>ThÃªm dÃ²ng sau vÃ o CI Ä‘á»ƒ báº¯t quáº£ tang tháº±ng nÃ o khÃ´ng dÃ¹ng black:</p>
<div class="highlight"><pre><span></span><code>black --check .
</code></pre></div>

<p>Black sáº½ thÃ´ng bÃ¡o cÃ¡c file chÆ°a chuáº©n format:</p>
<div class="highlight"><pre><span></span><code>$ black --check .
would reformat /home/hvn/me/people/content/mypy_simple.py
would reformat /home/hvn/me/people/publishconf.py
would reformat /home/hvn/me/people/pelicanconf.py
would reformat /home/hvn/me/people/fabfile.py
Oh no! ğŸ’¥ ğŸ’” ğŸ’¥
<span class="m">4</span> files would be reformatted, <span class="m">1</span> file would be left unchanged.
</code></pre></div>

<h2>Káº¿t luáº­n</h2>
<p>HÃ£y dÃ¹ng <code>black</code>! VÃ  Ä‘á»«ng quÃªn share bÃ i viáº¿t nÃ y, Ä‘á»ƒ cá»™ng Ä‘á»“ng code Python
khÃ´ng cÃ²n máº¥t thá»i gian Ã­t bá»•.</p>
  </div>
  <!-- /.entry-content -->
</section>
<section class="container">
  <div class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'pymier';
      var disqus_identifier = 'article/black/';
      var disqus_url = 'http://pp.pymi.vn/article/black/';
      (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//pymier.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</section>

    <section class="container footer">
      <footer>
        <address>
        Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
        which takes great advantage of <a href="http://python.org">Python</a>.
        </address>
        <address>
          Há»c láº­p trÃ¬nh Python táº¡i <a href="https://pymi.vn/">Pymi.vn</a>
        </address>
      </footer>
    </section>
  </main>

<script type="text/javascript">
var images = document.getElementsByTagName("img");
var i;

for(i = 0; i < images.length; i++) {
  images[i].className += " centered";
}
</script>
</body>

</html>