<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>The PyMiers</title><link href="http://pp.pymi.vn/" rel="alternate"></link><link href="http://pp.pymi.vn/feeds/all.atom.xml" rel="self"></link><id>http://pp.pymi.vn/</id><updated>2021-06-30T00:00:00+07:00</updated><entry><title>10x engineer - cắt giảm chi phí 10 lần</title><link href="http://pp.pymi.vn/article/10x/" rel="alternate"></link><published>2021-06-30T00:00:00+07:00</published><updated>2021-06-30T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2021-06-30:/article/10x/</id><summary type="html">&lt;p&gt;với regex, lambda, kafka - nhờ học hành Python tử tế&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Huyền thoại 3x 4x 5x ... 10x (xxxxxxxxxx)&lt;/h2&gt;
&lt;p&gt;10x engineer là một huyền thoại (myth) lâu đời trong giới IT, mơ tưởng về
1 developer có khả năng code "hơn" người bình thường 10 lần (hoặc hơn).
Vì là "myth", nên có người tin, có người không.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://youtu.be/QoVeAANfESY"&gt;&lt;img alt="The Myth" src="https://img.youtube.com/vi/QoVeAANfESY/0.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Việc lên internet tìm kiếm 10x engineer trên thế giới không quá khó khăn, nhưng
gặp khi đi làm ngoài thực tế là chuyện không nhiều.
10x thế giới tạm kể:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Linus_Torvalds"&gt;Linus Torvard&lt;/a&gt; - tác giả Linux, git&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Fabrice_Bellard"&gt;Fabrice Bellard&lt;/a&gt; - tác giả FFmpeg, QEMU, tiny C compiler (tcc), quickJS&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/John_Carmack"&gt;John Carmack&lt;/a&gt; - tác giả game Doom, Quake&lt;/li&gt;
&lt;li&gt;&lt;a href="https://norvig.com/"&gt;Peter Norvig&lt;/a&gt; - Director of Research Google&lt;/li&gt;
&lt;li&gt;&lt;a href="http://antirez.com/latest/0"&gt;Antirez&lt;/a&gt; - tác giả redis, hping&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;những ví dụ trên chỉ phục vụ mục đích dễ hình dung, bởi họ thuộc cỡ 100 hay 1000x
chứ không phải 10x.
Bí quyết là gì không rõ, nhưng điểm chung: họ đều đã ngoài 40 và dành hơn nửa
cuộc đời làm software. Không có ai 30 đã về nghỉ hay lên làm manager cả. &lt;/p&gt;
&lt;p&gt;Tiêu chí 10x không rõ ràng, vì đây là "myth", nên mỗi người nghĩ theo
1 kiểu. Theo một tiêu chí ví dụ, mrX gõ nhanh hơn mrY 10 lần, nên cũng có khi
được gọi là 10x engineer.&lt;/p&gt;
&lt;p&gt;Bài viết này không liên quan tới chuyện các 10x nói trên, mà đơn giản chỉ là
tiết kiệm 10x chi phí chạy code Python, nhờ được học Python "tử tế".&lt;/p&gt;
&lt;h2&gt;Ví dụ&lt;/h2&gt;
&lt;p&gt;Sinh ra 1 file .log.gz ví dụ chứa 1_500_000 dòng (từ 3 dòng lặp đi lặp lại)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gzip&lt;/span&gt;

&lt;span class="n"&gt;lines&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;http 2015-05-13T23:39:43.945958Z my-loadbalancer 192.168.131.39:2817 10.0.0.1:80 0.000073 0.001048 0.000057 200 200 0 29 &amp;quot;GET http://www.example.com:80/index HTTP/1.1&amp;quot; &amp;quot;curl/7.38.0&amp;quot; - - arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-targets/73e2d6bc24d8a067 &amp;quot;Root=1-58337262-36d228ad5d99923122bbe354&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;https 2015-05-13T23:39:43.945958Z my-loadbalancer 192.168.131.39:2817 10.0.0.1:80 0.000086 0.001048 0.001337 200 200 0 57 &amp;quot;GET https://mytest-111.ap-northeast-1.elb.amazonaws.com:443/p/a/t/h?foo=bar&amp;amp;hoge=fuga HTTP/1.1&amp;quot; &amp;quot;curl/7.38.0&amp;quot; DHE-RSA-AES128-SHA TLSv1.2 arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-targets/73e2d6bc24d8a067 &amp;quot;Root=1-58337262-36d228ad5d99923122bbe354&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;https 2015-05-13T23:39:43.945958Z my-loadbalancer 192.168.131.39:2817 10.0.0.1:80 0.000086 0.001048 0.001337 200 200 0 57 &amp;quot;GET https://mytest-111.ap-northeast-1.elb.amazonaws.com:443/p/a/t/h?foo=bar&amp;amp;hoge=fuga:904abc HTTP/1.1&amp;quot; &amp;quot;curl/7.38.0&amp;quot; DHE-RSA-AES128-SHA TLSv1.2 arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-targets/73e2d6bc24d8a067 &amp;quot;Root=1-58337262-36d228ad5d99923122bbe354&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bigfile.log.gz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;fout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;_500_000&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;fout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File này có kích thước khá nhỏ (&amp;lt;10MB)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python makelog.py&lt;span class="p"&gt;;&lt;/span&gt; ls -la bigfile.log.gz
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; hvn hvn &lt;span class="m"&gt;2960897&lt;/span&gt; Jun &lt;span class="m"&gt;30&lt;/span&gt; &lt;span class="m"&gt;22&lt;/span&gt;:42 bigfile.log.gz
$ gunzip bigfile.log.gz&lt;span class="p"&gt;;&lt;/span&gt; wc -l bigfile.log&lt;span class="p"&gt;;&lt;/span&gt; ls -l bigfile.log
&lt;span class="m"&gt;1500000&lt;/span&gt; bigfile.log
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; hvn hvn &lt;span class="m"&gt;559000000&lt;/span&gt; Jun &lt;span class="m"&gt;30&lt;/span&gt; &lt;span class="m"&gt;22&lt;/span&gt;:42 bigfile.log
$ ls -lh bigfile.log
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; hvn hvn 534M Jun &lt;span class="m"&gt;30&lt;/span&gt; &lt;span class="m"&gt;22&lt;/span&gt;:42 bigfile.log
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;nhưng khi giải nén, kích thước lớn hơn rất nhiều lần
(do dữ liệu trùng lặp nhiều nên nén lại từ to thành rất nhỏ).&lt;/p&gt;
&lt;p&gt;Đây là đoạn code ban đầu, nó đọc các dòng text từ 1 file có đuôi &lt;code&gt;.log.gz&lt;/code&gt; ra,
rồi gửi đến 1 chỗ khác. Hãy xem kỹ xem bạn có
thể "tối ưu" được bao nhiêu bước và trở thành mấy x từ đây?&lt;/p&gt;
&lt;p&gt;Code albv1.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gzip&lt;/span&gt;

&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bigfile.log.gz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readlines&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Proceeded {} lines&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File nén có đuôi &lt;code&gt;.gz&lt;/code&gt; được tạo bởi các chương trình &lt;code&gt;gzip&lt;/code&gt;, bên dưới dùng
thư viện &lt;a href="https://www.zlib.net/"&gt;&lt;code&gt;zlib&lt;/code&gt;&lt;/a&gt;.
&lt;a href="https://docs.python.org/3/library/gzip.html"&gt;Thư viện &lt;code&gt;gzip&lt;/code&gt; của Python&lt;/a&gt;
cho phép mở file .gz như file text bình thường,
nó thực hiện giải nén phía sau bức màn bí mật. Mode mở file &lt;code&gt;rt&lt;/code&gt; giúp lib gzip
hiểu ta muốn thu được &lt;code&gt;str&lt;/code&gt; sau khi giải nén, còn khi mặc định nó mở ở mode &lt;code&gt;rb&lt;/code&gt;, trả
về kiểu &lt;code&gt;bytes&lt;/code&gt;. Chạy đoạn code trên, sử dụng
&lt;code&gt;/usr/bin/time -v&lt;/code&gt; để đo thời gian chạy và các thông số chi tiết về bộ nhớ max.
(trên MacOS dùng -l)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time -v python3 albv1.py
Proceeded &lt;span class="m"&gt;10&lt;/span&gt; lines
    ...
    Maximum resident &lt;span class="nb"&gt;set&lt;/span&gt; size &lt;span class="o"&gt;(&lt;/span&gt;kbytes&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;693652&lt;/span&gt;
    ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code này dùng ~ 600 MB RAM.&lt;/p&gt;
&lt;p&gt;Sau khi thay đổi, code chỉ còn dùng ~ 9MB RAM&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time -v python3 albv2.py
Proceeded &lt;span class="m"&gt;10&lt;/span&gt; lines
    ...
    Maximum resident &lt;span class="nb"&gt;set&lt;/span&gt; size &lt;span class="o"&gt;(&lt;/span&gt;kbytes&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;9752&lt;/span&gt;
    ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ thay đổi duy nhất 1 dòng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ diff albv1.py albv2.py
12c12
&amp;lt;     &lt;span class="k"&gt;for&lt;/span&gt; line in f.readlines&lt;span class="o"&gt;()&lt;/span&gt;:
---
&amp;gt;     &lt;span class="k"&gt;for&lt;/span&gt; line in f:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Điều này bất kỳ học viên &lt;a href="https://pymi.vn/"&gt;Pymi.vn&lt;/a&gt; nào cũng phát hiện ra
ngay, bởi trong hệ thống bài tập đã có 1 bài xử lý file 30 triệu dòng nặng hơn
500 MB tương tự. Cách xử lý từng dòng một:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;mà không dùng &lt;code&gt;f.readlines()&lt;/code&gt; hay &lt;code&gt;f.read()&lt;/code&gt;, vì chúng đọc toàn bộ nội dung
file từ ổ cứng vào RAM.
Chú ý cả sự chênh lệch, Python đọc file text 534MB vào thành 670MB RAM.&lt;/p&gt;
&lt;p&gt;"Bí kíp" đọc file theo dòng này dù chẳng có gì đặc biệt, ghi rõ trong tài liệu
trang chủ nhưng lại trở thành chuyện lạ với hàng ngàn bài hướng dẫn trên mạng,
thậm chí cả sách cũng dạy dùng readlines.
Hãy thử &lt;a href="https://github.com/search?q=%22readlines%22+language%3APython&amp;amp;type=Code"&gt;search
github&lt;/a&gt;
có tới hơn 2 triệu kết quả, dù cho github không search chính xác được, thì
chuyện này vẫn không phải là hiếm.&lt;/p&gt;
&lt;p&gt;Search &lt;a href="https://stackoverflow.com/questions/3925614/how-do-you-read-a-file-into-a-list-in-python"&gt;StackOverFlow python read file into list&lt;/a&gt;, trả về hàng loạt kết quả cũng không ổn tí nào.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;readlines&lt;/code&gt; hay &lt;code&gt;read&lt;/code&gt; hoàn toàn ok khi lập trình viên làm chủ được kích thước
file đầu vào (file cố định, file được cam kết là nhỏ), nhưng khi file có size
tới hàng
MB, nó sẽ chiếm không ít RAM để chạy chương trình.&lt;/p&gt;
&lt;p&gt;Phiên bản &lt;code&gt;v2&lt;/code&gt; có thể xử lý file có kích thước lớn tùy ý, 10GB, 100GB, đều vẫn
chỉ dùng &amp;lt; 10MB (với giả thiết kích thước mỗi dòng không quá khác biệt).&lt;/p&gt;
&lt;p&gt;Vậy chỉ cần được học Python tử tế, đã trở thành 10x rồi.&lt;/p&gt;
&lt;h3&gt;Độ đo&lt;/h3&gt;
&lt;p&gt;Để tính mấy x cho rõ ràng, bài này sẽ sử dụng đơn vị đo mà loài người ưa chuộng nhất: tiền.&lt;/p&gt;
&lt;p&gt;Tính tiền 1 chương trình trong 1 cái máy thì khá khó, nhưng ngày nay, khi
"cloud computing" là thời thượng, chạy code trên &lt;a href="https://www.familug.org/2017/08/serverless.html"&gt;AWS lambda&lt;/a&gt;
giúp chuyện tính tiền dễ như học
toán cấp 1. Xem &lt;a href="https://aws.amazon.com/lambda/pricing/"&gt;AWS Lambda pricing&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Theo thử nghiệm trên máy, hai phiên bản v1 và v2 chạy về tốc độ là như nhau
(hoặc chênh 1 2 3 giây trên tổng 60s không đáng kể),
thì phần còn lại của biểu thức phụ thuộc vào lượng RAM sử dụng.
Nói đơn giản thì RAM cấu hình cho Lambda function bao nhiêu, thì giá gấp bấy nhiêu.
Code đăng ký dùng 256 MB RAM sẽ đắt gấp đôi code đăng ký 128MB.
Với ví dụ trong bài, mỗi file log kích thước cỡ 300-600 MB, lập trình viên sẽ thường
để mức an toàn là 1024MB (1GB) tránh tình trạng có file 800MB xuất hiện mà thiếu RAM.&lt;/p&gt;
&lt;p&gt;Code v2 luôn dùng 10MB RAM (=&amp;gt; 100x), nhưng mức tối thiểu AWS Lambda cho phép là
128MB, vậy ở đây tiết kiệm 8 lần =&amp;gt; 8x.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cú twist giật mình&lt;/strong&gt;: câu chuyện thực ra không đơn giản vậy, với nhiều RAM hơn,
AWS Lambda sẽ cấp thêm
"năng lượng" cho CPU tỷ lệ với RAM, trong ví dụ này, nếu hầu hết thời gian
chương trình đều để dùng CPU, giảm 8x RAM đăng ký đồng nghĩa với giảm tốc độ CPU 8 lần.
Hay kết quả là v2 chạy mất 8s x 128MB thì v1 chạy mất 1s x 1024 MB, và giá tiền là như nhau.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Lambda allocates CPU power in proportion to the amount of memory configured.
Memory is the amount of memory available to your Lambda function at runtime.
You can increase or decrease the memory and CPU power allocated to your
function using the Memory (MB) setting. To configure the memory for your
function, set a value between 128 MB and 10,240 MB in 1-MB increments. At
1,769 MB, a function has the equivalent of one vCPU (one vCPU-second of
credits per second).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;https://docs.aws.amazon.com/lambda/latest/dg/configuration-memory.html&lt;/p&gt;
&lt;p&gt;Với đoạn chú ý này, nếu function chỉ sử dụng 1 core (code không sử dụng thư viện
multiprocess), tốc độ CPU của nó đạt tối
đa khi cấu hình 1769MB, dù có tăng RAM lên 2048MB thì chỉ tăng thêm 1 core nữa
chứ không làm core ban đầu mạnh lên, hay nói cách khác: không làm code chạy nhanh
hơn.&lt;/p&gt;
&lt;p&gt;PS: trong môi trường lượng CPU là cố định (máy ảo, máy vật lý...), v2 vẫn là 100x.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cú twist số 2&lt;/strong&gt;: việc tính tiền trên các hệ thống cloud không hề đơn giản,
có hàng ngàn dịch vụ &lt;a href="https://www.lastweekinaws.com/"&gt;cung cấp giải pháp phân tích, đọc hiểu, tối ưu code cloud&lt;/a&gt;.
Hay mọc cả ra nghề &lt;a href="https://www.finops.org/introduction/what-is-finops/"&gt;FinOps&lt;/a&gt;
chuyên về tối ưu hóa &lt;a href="https://aws.amazon.com/blogs/enterprise-strategy/introducing-finops-excuse-me-devsecfinbizops/"&gt;cloud cost&lt;/a&gt;,
ngành kinh tế trên mây (cloud economics) với các chuyên gia có nghệ danh "cloud economist".&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Kết luận 1:&lt;/strong&gt; 100x là có thật, nhưng còn phụ thuộc vào hoàn cảnh, không nằm ngoài
"thuyết tương đối".
Việc giảm 8x RAM ở đây không làm giảm chi phí, công việc tiếp theo là cắt giảm
chi phí bằng cách tăng tốc code.&lt;/p&gt;
&lt;h2&gt;Tăng tốc regex&lt;/h2&gt;
&lt;p&gt;Phiên bản sau thêm công đoạn xử lý từng dòng để lọc ra các giá trị mong
muốn, sử dụng công cụ: &lt;a href="https://docs.python.org/3/howto/regex.html"&gt;"regular expression"&lt;/a&gt; - hay gọi ngắn là &lt;strong&gt;regex&lt;/strong&gt;.
Bạn đọc không nên quá tập trung hay sợ hãi khi nhìn vào phần "pattern" viết đống giun dế gì, vì
không nhiều người có khả năng đọc, hiểu, phân tích đoạn này, kể cả có
10 năm đi code hay làm sysadmin. Code regex thường khó đọc khó hiểu,
khi cần dùng chủ yếu các lập trình viên đi copy, đoạn bên dưới cũng là
copy từ link trong comment.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gzip&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;regex&lt;/span&gt;

&lt;span class="c1"&gt;# copied and edited from https://gist.github.com/szinck/d456fbf691483ab77d2453c316db3371&lt;/span&gt;
&lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;(.*?) (.*?) (.*?) ([0-9.]+):([0-9]*) ([0-9.]+):([0-9]*) ([.0-9]*) ([.0-9]*) ([.0-9]*) (-|[0-9]*) (-|[0-9]*) ([-0-9]*) ([-0-9]*) &amp;quot;(.*?) .*:([0-9]+)([^? ]*)(&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;x3f?.*?) (.*?)&amp;quot; &amp;quot;(.*?)&amp;quot; (.*?) (.*?) (.*?) &amp;quot;(.*?)&amp;quot; *$&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# example in AWS docs does not work directly with python https://docs.aws.amazon.com/athena/latest/ug/application-load-balancer-logs.html&lt;/span&gt;

&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pattern&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bigfile.log.gz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readlines&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="c1"&gt;# print(&amp;quot;sending&amp;quot;, result)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Proceeded {} lines&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Không hiểu gì thì làm sao mà tăng tốc?&lt;/p&gt;
&lt;h3&gt;Học regex trong 7 phút&lt;/h3&gt;
&lt;p&gt;7 phút đủ để quán bia làm xong món "giò nóng 7 phút".
Trong 7 phút đủ để bạn có kiến thức regex bằng với 90% lập trình viên trên thế
giới.&lt;/p&gt;
&lt;h4&gt;regex là gì&lt;/h4&gt;
&lt;p&gt;regex là một ngôn ngữ dùng để mô tả pattern (tiếng Việt hay dịch là dạng, mẫu)
của 1 giá trị.
Ví dụ: một số điện thoại di động ở Việt Nam là một số có 10 hay 11 chữ số.
Các pattern sau sẽ "match" (khớp mẫu) số điện thoại:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\d+&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[0-9]+&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hai pattern này tương đương, nó sẽ match với 1 hoặc nhiều chữ số viết liền nhau.
Dấu &lt;code&gt;+&lt;/code&gt; theo sau là biểu diễn cho "1 hoặc nhiều".
Phổ biến không kém dấu &lt;code&gt;+&lt;/code&gt;, là dấu &lt;code&gt;*&lt;/code&gt;. Dấu &lt;code&gt;*&lt;/code&gt; có nghĩa là match 0 hoặc nhiều:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\d*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[0-9]*&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;cũng sẽ match số điện thoại di động ở Việt Nam.&lt;/p&gt;
&lt;p&gt;Dùng &lt;code&gt;+&lt;/code&gt; khẳng định phải có ít nhất 1 số từ 0 đến 9 (ký hiệu &lt;code&gt;[0-9]&lt;/code&gt;),
thì dùng &lt;code&gt;*&lt;/code&gt; dễ
dãi hơn, không có số nào cũng được. Pattern &lt;code&gt;.*&lt;/code&gt; là pattern phổ biến nhất với
người học regex với thời lượng dưới 5 ngày.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.&lt;/code&gt; đại diện cho 1 ký tự nào đó, nào cũng được, a b c hay 0 1 2 hay % = # gì
cũng ok. &lt;code&gt;.*&lt;/code&gt; là pattern match được mọi thứ.&lt;/p&gt;
&lt;p&gt;Tránh nhầm lẫn dấu &lt;code&gt;*&lt;/code&gt; hay thấy khi gõ câu lệnh Linux, kiểu như &lt;code&gt;ls ~/*.py&lt;/code&gt;,
&lt;code&gt;*&lt;/code&gt; này không phải regex, đây là khái niệm &lt;code&gt;globbing&lt;/code&gt;, mặc dù tác dụng hơi giống,
nó sẽ trả về tất cả các tên file có đuôi &lt;code&gt;.py&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Dấu &lt;code&gt;?&lt;/code&gt; match 0 hoặc 1 lần, pattern &lt;code&gt;https?&lt;/code&gt; sẽ match cả &lt;code&gt;http&lt;/code&gt; lẫn &lt;code&gt;https&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Dùng trang &lt;a href="https://regex101.com/r/2f1NKt/1"&gt;regex101.com&lt;/a&gt; để thử các pattern và xem kết quả cho tiện.&lt;/p&gt;
&lt;p&gt;Hay bật python3 lên rồi gõ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; import re
&amp;gt;&amp;gt;&amp;gt; re.findall&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.*&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;0987654321&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0987654321&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có thể chỉ định số lần match với cú pháp &lt;code&gt;{ít nhất, nhiều nhất}&lt;/code&gt;, pattern 
&lt;code&gt;0[0-9]{9, 10}&lt;/code&gt; match số điện thoại di động ở Việt Nam.&lt;/p&gt;
&lt;p&gt;Đơn giản, đúng không? Hãy viết 1 đoạn regex để kiểm tra 1 email có hợp lệ không.&lt;/p&gt;
&lt;p&gt;Mọi người đều biết "chung chung" là email có dạng &lt;code&gt;gìđó@gìđấy.đuôi&lt;/code&gt;, vậy
regex có thể là &lt;code&gt;.+@.+\..+&lt;/code&gt;. Chú ý dấu &lt;code&gt;.&lt;/code&gt; trong tên miền phải gõ &lt;code&gt;\.&lt;/code&gt;, vì
dấu &lt;code&gt;.&lt;/code&gt; là 1 ký hiệu regex đặc biệt đã nói ở trên.
Đây là &lt;a href="http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html"&gt;regex đầy đủ để kiểm tra 1 địa chỉ email&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Đến đây, đã có 1 manh mối để tối ưu tốc độ rồi...
Nếu chưa thấy, hãy đảm bảo bạn đã gõ đoạn code trên. &lt;code&gt;re&lt;/code&gt; là standard library
của Python, có sẵn, không cài gì cả. Nhưng đoạn code
trên lại import 1 thư viện tên &lt;a href="https://pypi.org/project/regex/"&gt;&lt;code&gt;regex&lt;/code&gt;&lt;/a&gt;.
Đây là thư viện phải cài thêm,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This regex implementation is backwards-compatible with the standard ‘re’
module, but offers additional functionality.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thử thay &lt;code&gt;regex&lt;/code&gt; bằng &lt;code&gt;re&lt;/code&gt; giúp cắt giảm 10s trong đoạn code chạy 60s trên máy
tác giả.
Có thể "đoán" rằng &lt;code&gt;re&lt;/code&gt; có trong stdlib và được tối ưu đủ trò nên chạy nhanh hơn.
Những việc đoán này phải dựa trên cơ sở đo. Để đo tốc độ trong Python,
python có sãn thư viện &lt;code&gt;cProfile&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Profiling Python với cProfile&lt;/h3&gt;
&lt;p&gt;Thay regex bằng re,
chạy lại đoạn code với câu lệnh sau để xem các function nào dùng nhiều thời gian
nhất/gọi nhiều lần nhất.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tottime&lt;/code&gt; total time: tổng thời gian function chạy sau N lần,
không tính chuyện gọi function khác.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cumtime&lt;/code&gt; cummulative time: tổng thời gian function chạy sau N lần, bao 
gồm cả việc gọi các function khác.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time -v python3 -m cProfile -s tottime albv1.py
Proceeded &lt;span class="m"&gt;50000&lt;/span&gt; lines
         &lt;span class="m"&gt;252074&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; calls &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;251832&lt;/span&gt; primitive calls&lt;span class="o"&gt;)&lt;/span&gt; in &lt;span class="m"&gt;45&lt;/span&gt;.948 seconds

   Ordered by: internal &lt;span class="nb"&gt;time&lt;/span&gt;

   ncalls  tottime  percall  cumtime  percall filename:lineno&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;50000&lt;/span&gt;   &lt;span class="m"&gt;45&lt;/span&gt;.834    &lt;span class="m"&gt;0&lt;/span&gt;.001   &lt;span class="m"&gt;45&lt;/span&gt;.834    &lt;span class="m"&gt;0&lt;/span&gt;.001 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;match&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;re.Pattern&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="m"&gt;1&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.033    &lt;span class="m"&gt;0&lt;/span&gt;.033   &lt;span class="m"&gt;45&lt;/span&gt;.948   &lt;span class="m"&gt;45&lt;/span&gt;.948 albv1.py:1&lt;span class="o"&gt;(&lt;/span&gt;&amp;lt;module&amp;gt;&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="m"&gt;1&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.016    &lt;span class="m"&gt;0&lt;/span&gt;.016    &lt;span class="m"&gt;0&lt;/span&gt;.061    &lt;span class="m"&gt;0&lt;/span&gt;.061 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;readlines&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;_io._IOBase&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="m"&gt;2277&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.014    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.014    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;built-in method zlib.crc32&lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="m"&gt;50000&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.012    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.012    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;re.Match&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="m"&gt;2275&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;decompress&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;zlib.Decompress&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="m"&gt;50054&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.005    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.005    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;join&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;str&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="m"&gt;52282&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000 gzip.py:314&lt;span class="o"&gt;(&lt;/span&gt;closed&lt;span class="o"&gt;)&lt;/span&gt;
     &lt;span class="m"&gt;2276&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.034    &lt;span class="m"&gt;0&lt;/span&gt;.000 _compression.py:66&lt;span class="o"&gt;(&lt;/span&gt;readinto&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kết quả cho thấy hầu hết thời gian đều dùng vào việc chạy regex method &lt;code&gt;match&lt;/code&gt;.
&lt;a href="https://github.com/python/cpython/blob/3.10/Modules/_sre.c"&gt;&lt;code&gt;re&lt;/code&gt; viết bằng C&lt;/a&gt;,
lẽ ra phải chạy rất nhanh, thì khi copy thử pattern và 1
ví dụ lên regex101, sẽ thấy lý do vì sao nó chậm. Để kiểm tra pattern có match
string ví dụ sau không, &lt;a href="https://regex101.com/r/hmXaTV/1"&gt;re phải dùng tới 112690 bước!!!&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;http 2015-05-13T23:39:43.945958Z my-loadbalancer 192.168.131.39:2817 10.0.0.1:80 0.000073 0.001048 0.000057 200 200 0 29 "GET http://www.    example.com:80/index HTTP/1.1" "curl/7.38.0" - - arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-targets/73e2d6bc24d8a067 "    Root=1-58337262-36d228ad5d99923122bbe354"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;con số này quá lớn, dù có viết đoạn code lằng nhằng với 20 câu if, cũng
không thể tới 112690 bước.
Tăng tốc regex không phải chuyện dễ, nhưng có 1 tip rất phổ biến: chỗ nào
dùng &lt;code&gt;.*&lt;/code&gt; chỗ đó có vẻ chậm/sai/cần tối ưu.&lt;/p&gt;
&lt;p&gt;Đoạn regex mới&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;(.*?) (.*?) (.*?) ([0-9.]+):([0-9]*) ([0-9.]+):([0-9]*) ([.0-9]*) ([.0-9]*) ([.0-9]*) (-|[0-9]*) (-|[0-9]*) ([-0-9]*) ([-0-9]*) &amp;quot;(.*?) https?://[^:]+:([0-9]+)([^? ]*)(&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;x3f?.*?) (.*?)&amp;quot; &amp;quot;(.*?)&amp;quot; (.*?) (.*?) (.*?) &amp;quot;(.*?)&amp;quot; *$&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;có 1 điểm khác so với đoạn cũ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;(.*?) (.*?) (.*?) ([0-9.]+):([0-9]*) ([0-9.]+):([0-9]*) ([.0-9]*) ([.0-9]*) ([.0-9]*) (-|[0-9]*) (-|[0-9]*) ([-0-9]*) ([-0-9]*) &amp;quot;(.*?) .*:([0-9]+)([^? ]*)(&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;x3f?.*?) (.*?)&amp;quot; &amp;quot;(.*?)&amp;quot; (.*?) (.*?) (.*?) &amp;quot;(.*?)&amp;quot; *$&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;chỗ &lt;code&gt;.*:([0-9]+)&lt;/code&gt; dùng để match domain và port như https://pymi.vn:443, thay &lt;code&gt;.*&lt;/code&gt; trong
đoạn này với &lt;code&gt;https?://[^:]+&lt;/code&gt; cho tác dụng tương đương. &lt;code&gt;https?://[^:]+&lt;/code&gt; match
1 đoạn text bắt đầu bằng http hay https, rồi :// rồi bất cứ thứ gì cho tới khi
gặp dấu : thì dừng lại. Đoạn này &lt;a href="https://regex101.com/r/1HqLtV/1"&gt;match sau 524 bước&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chú ý đoạn code mới cho rằng mọi url đều bắt đầu với http hay https, điều này
có thể sai (ví dụ wss:// cho websocket), tùy theo yêu cầu bài toán.&lt;/p&gt;
&lt;p&gt;Một cách khác, là dùng pattern &lt;code&gt;[^:]+:[^:]+:&lt;/code&gt; match mọi thứ có dạng 
something:something dừng lại khi gặp dấu : thứ 2.
VD patter sẽ match &lt;code&gt;wss://abcde&lt;/code&gt; trong string &lt;code&gt;wss://abcde:443&lt;/code&gt;, 
pattern này &lt;a href="https://regex101.com/r/pjDFEk/1"&gt;match sau 518 bước&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Dấu đóng mở ngoặc &lt;code&gt;()&lt;/code&gt; dùng để "capture", kết quả match thành công sẽ được lưu
lại thành 1 group, đánh theo thứ tự xuất hiện. 
Đoạn code trong bài lấy ra group 17 và 11
từ kết quả match.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time -v python3 -m cProfile -s tottime albv1_regex.py

Proceeded &lt;span class="m"&gt;50000&lt;/span&gt; lines
         &lt;span class="m"&gt;252201&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; calls &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;251956&lt;/span&gt; primitive calls&lt;span class="o"&gt;)&lt;/span&gt; in &lt;span class="m"&gt;0&lt;/span&gt;.310 seconds

   Ordered by: internal &lt;span class="nb"&gt;time&lt;/span&gt;

   ncalls  tottime  percall  cumtime  percall filename:lineno&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;50000&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.208    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.208    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;match&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;re.Pattern&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="m"&gt;1&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.026    &lt;span class="m"&gt;0&lt;/span&gt;.026    &lt;span class="m"&gt;0&lt;/span&gt;.310    &lt;span class="m"&gt;0&lt;/span&gt;.310 albv1_regex.py:1&lt;span class="o"&gt;(&lt;/span&gt;&amp;lt;module&amp;gt;&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="m"&gt;1&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.016    &lt;span class="m"&gt;0&lt;/span&gt;.016    &lt;span class="m"&gt;0&lt;/span&gt;.061    &lt;span class="m"&gt;0&lt;/span&gt;.061 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;readlines&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;_io._IOBase&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="m"&gt;2277&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.014    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.014    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;built-in method zlib.crc32&lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="m"&gt;50000&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;re.Match&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="m"&gt;2275&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.008    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;decompress&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;zlib.Decompress&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="m"&gt;52282&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000 gzip.py:314&lt;span class="o"&gt;(&lt;/span&gt;closed&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;50054&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000 &lt;span class="o"&gt;{&lt;/span&gt;method &lt;span class="s1"&gt;&amp;#39;join&amp;#39;&lt;/span&gt; of &lt;span class="s1"&gt;&amp;#39;str&amp;#39;&lt;/span&gt; objects&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="m"&gt;2276&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;.004    &lt;span class="m"&gt;0&lt;/span&gt;.000    &lt;span class="m"&gt;0&lt;/span&gt;.030    &lt;span class="m"&gt;0&lt;/span&gt;.000 gzip.py:454&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;read&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;45 giây -&amp;gt; xuống còn 0.3 giây cho ta cảm giác code mới chắc là sai nên mới 150x như vậy.&lt;/p&gt;
&lt;h4&gt;Sửa regex xong làm sao biết đúng sai?&lt;/h4&gt;
&lt;p&gt;Một cách đơn giản là thử, cho 2 pattern match và lấy kết quả ra rồi so sánh lần 
lượt với mỗi dòng log, qua cả file đều giống nhau là có vẻ ổn rồi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pattern1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pattern2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;m1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;m2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; 
        &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groups&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;PS: khi tối ưu đoạn code này, vô tình phát hiện ra đoạn code ban đầu xử lý 
không đúng khi URL path có chứa dấu &lt;code&gt;:&lt;/code&gt;, 2 phiên bản mới không gặp phải vấn
đề này.&lt;/p&gt;
&lt;p&gt;Kết luận 2: 150x là có thật và không cần phải học "regex" nâng cao.&lt;/p&gt;
&lt;h4&gt;Học và dùng regex&lt;/h4&gt;
&lt;p&gt;Python có viết 1 tài liệu cơ bản về regex trong mục &lt;a href="https://docs.python.org/3/howto/regex.html"&gt;howto&lt;/a&gt;, 
nếu một ngày buồn chán quá không có gì làm, hay muốn tìm hiểu về ý nghĩa của cuộc sống, bạn có thể ngồi học regex.&lt;/p&gt;
&lt;p&gt;&lt;img alt="xkcd" src="https://imgs.xkcd.com/comics/regular_expressions.png"&gt;&lt;/p&gt;
&lt;p&gt;Hoặc đi tìm một "khóa học regex"? cái này chưa có, cơ hội khởi nghiệp làm giàu còn rất rộng mở
cho các chuyên gia công nghệ bán "khoá học làm chủ regex để học sâu với trí tuệ nhân tạo 4.0".&lt;/p&gt;
&lt;p&gt;Regex là một công cụ mạnh, nhưng khó dùng đúng, nó giải quyết được 1 số bài toán,
&lt;a href="https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags?noredirect=1&amp;amp;lq=1"&gt;1 số thì không và nên dùng cách khác đơn giản hơn như parse HTML&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;regex &lt;a href="https://blog.codinghorror.com/regular-expressions-now-you-have-two-problems/"&gt;nổi tiếng phức tạp&lt;/a&gt;, và từng tạo ra không ít &lt;a href="https://stackstatus.net/post/147710624694/outage-postmortem-july-20-2016"&gt;sự cố trong các hệ thống lớn toàn cầu&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Some people, when confronted with a problem, think "I know, I'll use regular expressions." Now they have two problems.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Khi một bài toán có thể giải quyết theo 1 cách khác đơn giản hơn, thì nên tránh
dùng regex.&lt;/p&gt;
&lt;p&gt;Chú ý trong phần tối ưu này, nhằm mục tiêu giữ lại code gần giống với code
ban đầu nhất, không thay đổi gì quá nhiều, tác giả đã không viết lại đoạn code 
lọc ra urlpath và statuscode mà vẫn giữ nguyên regex như code ban đầu.&lt;/p&gt;
&lt;h2&gt;Tăng tốc kafka&lt;/h2&gt;
&lt;p&gt;Đây là phiên bản đầy đủ của chương trình trước khi mang đi tối ưu: nó
đọc file log &lt;a href="https://aws.amazon.com/premiumsupport/knowledge-center/athena-analyze-access-logs/"&gt;AWS ALB&lt;/a&gt;
đã nén &lt;code&gt;.gz&lt;/code&gt;, lấy ra urlpath và status code bằng regex, rồi gửi
kết quả đến kafka.&lt;/p&gt;
&lt;h3&gt;Kafka là gì&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Apache Kafka is an open-source distributed event streaming platform used by thousands of companies for high-performance data pipelines, streaming analytics, data integration, and mission-critical applications. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://kafka.apache.org/"&gt;https://kafka.apache.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nói đơn giản, Kafka như hệ thống ống nước, mạng lưới điện, mạng lưới viễn thông,
nó đủ phức tạp để đáp ứng mọi nhu cầu truyền tải dữ liệu từ nhiều nguồn đến 
nhiều đích. Kafka được dùng phổ biến trong các doanh nghiệp, các hệ thống xử
lý data, logging...&lt;/p&gt;
&lt;p&gt;Kafka có nhiều tính năng, bài này sử dụng nó như 1 hệ thống pub-sub, tức có 1
bên gửi message đi, và 1/nhiều bên nhận message.&lt;/p&gt;
&lt;p&gt;Cài Java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt-get install -y openjdk-11-jre-headless
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cài đặt kafka đơn giản với &lt;a href="https://kafka.apache.org/quickstart"&gt;5 bước không cần sudo&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -LO https://mirror.downloadvn.com/apache/kafka/2.8.0/kafka_2.13-2.8.0.tgz
tar xvf kafka_2.13-2.8.0.tgz
&lt;span class="nb"&gt;cd&lt;/span&gt; kafka_2.13-2.8.0
bin/zookeeper-server-start.sh config/zookeeper.properties
&lt;span class="c1"&gt;## mở 1 terminal khác&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; kafka_2.13-2.8.0
bin/kafka-server-start.sh config/server.properties
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Kafka producer&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gzip&lt;/span&gt;                                                                     
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;                                                                       
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;kafka&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;KafkaProducer&lt;/span&gt;                                                 

&lt;span class="n"&gt;producer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;KafkaProducer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linger_ms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;65536&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;acks&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;compression_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lz4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;(.*?) (.*?) (.*?) ([0-9.]+):([0-9]*) ([0-9.]+):([0-9]*) ([.0-9]*) ([.0-9]*) ([.0-9]*) (-|[0-9]*) (-|[0-9]*) ([-0-9]*) ([-0-9]*) &amp;quot;(.*?) [^:]+:[^:]+:([0-9]+)([^? ]*)(&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;x3f?.*?) (.*?)&amp;quot; &amp;quot;(.*?)&amp;quot; (.*?) (.*?) (.*?) &amp;quot;(.*?)&amp;quot; *$&amp;#39;&lt;/span&gt;                                                                                                                                              
&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pattern&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                                                         

&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;                                                                           
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bigfile.log.gz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;                                    
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;                                                              
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;                                                               
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;                                                      
            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                                                            
        &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                                                       
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;                                                                   
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;                                  
            &lt;span class="n"&gt;producer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;alblog&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;                     

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Processed {} lines&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khi chưa gửi message tới kafka, code chạy mất 8s, khi gửi đến kafka trên cùng
máy, code chạy mất 60s (khi profile chậm hơn nữa do quá trình profile can thiệp ảnh hưởng tới tốc độ):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Processed 1500000 lines
         133875187 function calls (133873425 primitive calls) in 91.895 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
  1500001    8.978    0.000    8.978    0.000 {method &amp;#39;match&amp;#39; of &amp;#39;re.Pattern&amp;#39; objects}
  1500000    8.602    0.000   73.735    0.000 kafka.py:538(send)
  1500282    7.845    0.000   14.095    0.000 default_records.py:406(append)
  1500000    6.948    0.000   39.138    0.000 record_accumulator.py:200(append)
  1500282    4.675    0.000   28.579    0.000 record_accumulator.py:57(try_append)
        1    4.299    4.299   92.439   92.439 albv1_regex2.py:1(&amp;lt;module&amp;gt;)
  1500000    4.147    0.000    6.439    0.000 future.py:32(__init__)
  7501128    3.138    0.000    4.001    0.000 util.py:10(encode_varint)
  1500000    2.754    0.000   12.242    0.000 kafka.py:716(_partition)
  3000001    2.270    0.000    2.688    0.000 cluster.py:106(partitions_for_topic)
  1500000    1.946    0.000    4.090    0.000 cluster.py:119(available_partitions_for_topic)
  1500000    1.840    0.000    4.318    0.000 kafka.py:664(_wait_on_metadata)
    65554    1.721    0.000    1.721    0.000 {built-in method zlib.crc32}
  1500000    1.682    0.000    2.811    0.000 default_records.py:563(size_of)
15397286/15397055    1.615    0.000    1.615    0.000 {built-in method builtins.len}
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Việc gửi 1.5 triệu message tới kafka chạy cùng máy mất tới 73s (cumtime)
trong output profiling. Trong đó có dòng thứ 3, 4 và 5 đều là "append".
Mở code của thư viện &lt;a href="https://github.com/dpkp/kafka-python/"&gt;kafka-python&lt;/a&gt; 
ra xem, phần &lt;a href="https://github.com/dpkp/kafka-python/blob/2.0.2/kafka/producer/record_accumulator.py#L200"&gt;này&lt;/a&gt;
append các message vào
1 list "accumulator", để bao giờ đủ 65536 phần tử mới gửi đi 
(batch_size=65536 lúc tạo producer). Batching là tính năng phổ biến trong các 
thư viện liên quan tới network, do việc gửi nhận qua network thường chậm, nên
gom lại một đống rồi gửi đi để giảm số lần gửi/nhận. Nhưng trong ví dụ này,
việc batching tốn tới 20s thì có vẻ không ổn.
Sau một hồi chỉnh sửa các tham số (batch_size, linger_ms ...), giải pháp lại là
"think outside of the box", tìm xem Python còn có thư viện kafka nào khác không.&lt;/p&gt;
&lt;p&gt;Thư viện &lt;a href="https://github.com/confluentinc/confluent-kafka-python"&gt;confluent-kafka-python&lt;/a&gt; sử dụng 
&lt;a href="https://github.com/edenhill/librdkafka"&gt;librdkafka&lt;/a&gt; viết bằng C hứa hẹn cho một performance
tốt hơn nhiều&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gzip&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;confluent_kafka&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Producer&lt;/span&gt;


&lt;span class="n"&gt;producer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Producer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bootstrap.servers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;localhost:9092&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;queue.buffering.max.messages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;65536&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;acks&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
     &lt;span class="s1"&gt;&amp;#39;compression.type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lz4&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;(.*?) (.*?) (.*?) ([0-9.]+):([0-9]*) ([0-9.]+):([0-9]*) ([.0-9]*) ([.0-9]*) ([.0-9]*) (-|[0-9]*) (-|[0-9]*) ([-0-9]*) ([-0-9]*) &amp;quot;(.*?) [^:]+:[^:]+:([0-9]+)([^? ]*)(&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;x3f?.*?) (.*?)&amp;quot; &amp;quot;(.*?)&amp;quot; (.*?) (.*?) (.*?) &amp;quot;(.*?)&amp;quot; *$&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pattern&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bigfile.log.gz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;producer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;produce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;alblog&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="n"&gt;producer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;BufferError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Buffer full, waiting for free space on the queue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;producer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;producer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Processed {} lines&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;và thực nghiệm thấy đúng là như thế:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Processed&lt;/span&gt; &lt;span class="mi"&gt;1500000&lt;/span&gt; &lt;span class="n"&gt;lines&lt;/span&gt;
         &lt;span class="mi"&gt;11882360&lt;/span&gt; &lt;span class="n"&gt;function&lt;/span&gt; &lt;span class="n"&gt;calls&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11882085&lt;/span&gt; &lt;span class="n"&gt;primitive&lt;/span&gt; &lt;span class="n"&gt;calls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;21.700&lt;/span&gt; &lt;span class="n"&gt;seconds&lt;/span&gt;

   &lt;span class="n"&gt;Ordered&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;internal&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;

   &lt;span class="n"&gt;ncalls&lt;/span&gt;  &lt;span class="n"&gt;tottime&lt;/span&gt;  &lt;span class="n"&gt;percall&lt;/span&gt;  &lt;span class="n"&gt;cumtime&lt;/span&gt;  &lt;span class="n"&gt;percall&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;lineno&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="mi"&gt;1500000&lt;/span&gt;    &lt;span class="mf"&gt;9.328&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;9.328&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;match&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;re.Pattern&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="mi"&gt;1500000&lt;/span&gt;    &lt;span class="mf"&gt;4.197&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;4.197&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;produce&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;cimpl.Producer&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="mi"&gt;1&lt;/span&gt;    &lt;span class="mf"&gt;3.457&lt;/span&gt;    &lt;span class="mf"&gt;3.457&lt;/span&gt;   &lt;span class="mf"&gt;21.700&lt;/span&gt;   &lt;span class="mf"&gt;21.700&lt;/span&gt; &lt;span class="n"&gt;albv1_regex2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="mi"&gt;1500000&lt;/span&gt;    &lt;span class="mf"&gt;1.511&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;1.511&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;poll&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;cimpl.Producer&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="mi"&gt;65554&lt;/span&gt;    &lt;span class="mf"&gt;0.519&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;0.519&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;built&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="n"&gt;zlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crc32&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="mi"&gt;1500000&lt;/span&gt;    &lt;span class="mf"&gt;0.410&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;0.410&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;re.Match&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="mi"&gt;65552&lt;/span&gt;    &lt;span class="mf"&gt;0.386&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;0.386&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;decompress&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;zlib.Decompress&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="mi"&gt;1565559&lt;/span&gt;    &lt;span class="mf"&gt;0.255&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;0.255&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;314&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closed&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="mi"&gt;1500117&lt;/span&gt;    &lt;span class="mf"&gt;0.232&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;0.232&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;join&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;str&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="mi"&gt;65553&lt;/span&gt;    &lt;span class="mf"&gt;0.218&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;1.687&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="n"&gt;_compression&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readinto&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="mi"&gt;65553&lt;/span&gt;    &lt;span class="mf"&gt;0.207&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt;    &lt;span class="mf"&gt;1.417&lt;/span&gt;    &lt;span class="mf"&gt;0.000&lt;/span&gt; &lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;454&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Từ 91s -&amp;gt; 21.7s, ta rút gọn thêm được 4x.&lt;/p&gt;
&lt;p&gt;Kết luận 3: thư viện có this có that, hãy tự đo và kiểm tra các options.&lt;/p&gt;
&lt;h2&gt;Kết quả&lt;/h2&gt;
&lt;p&gt;Sau 3 lần tối ưu, code mới dùng 100x ít RAM hơn, nhanh gấp 150 * 4 == 600 lần
code ban đầu, chi phí giảm: 600 lần so với ban đầu. Giả sử đoạn code này hiện
đang tốn $6000/tháng (6 * 12 = $72k/năm), thì sau khi tối ưu còn $10/tháng -&amp;gt; $120/năm.&lt;/p&gt;
&lt;p&gt;$70.000 mỗi năm được tiết kiệm này nên dùng để thưởng nóng cho 10x dev hay 
chỉ thưởng $7k? &lt;/p&gt;
&lt;p&gt;Thực tế (kinh tế) thì không phải thế, thưởng nóng $1-2-3k đã là nhiều lắm rồi.
Không bàn tới chuyện quản lý doanh nghiệp/nhân sự/kinh tế ở đây, nhưng có thể
thấy 1 điều, 1 lập trình viên có mức lương cao ngất ngưởng không phải là
chuyện vô lý, khi họ có thể tự trả lương cho mình 1 vài năm trong vòng 1 2 ngày
tối ưu code.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;10x engineering không phải chuyện hư cấu, là có thật. 10x phụ thuộc vào
hoàn cảnh, tiêu chí đánh giá, nhưng học Python tại PyMi.vn rõ ràng là khoản đầu tư 10x.
Việc tối ưu code, sử dụng cProfile của Python là một công việc thú vị, nhưng 
cần đặt vào đúng chỗ. Tối ưu đoạn code tiêu tốn $72k/năm để còn $120/năm 
mang lại lợi ích kinh tế khác biệt so với tối ưu đoạn code $72/năm còn $0.12/năm. &lt;/p&gt;
&lt;p&gt;Bạn đọc đam mê có thể tiếp tục tối ưu và gửi kết quả tới tác giả bằng cách 
tạo &lt;a href="https://github.com/pymivn/people/pulls"&gt;1 pull request trên GitHub&lt;/a&gt;.
Ngoài ra, có thể viết hẳn 1 chương trình hẳn hoi giúp lấy log AWS load balancer
về rồi gửi tới 1 đích đến tùy ý. Đây là &lt;a href="https://www.google.com/search?q=parse+aws+application+load+balancer+logs&amp;amp;hl=en"&gt;một vấn đề phổ biến khi dùng AWS Load Balancer
mà chưa có giải pháp triệt để.&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/2017/08/serverless.html"&gt;serverless&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Hết&lt;/h2&gt;
&lt;p&gt;Bài viết thực hiện trên&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep &lt;span class="nv"&gt;VERSION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; /etc/os-release&lt;span class="p"&gt;;&lt;/span&gt; python3 --version
&lt;span class="nv"&gt;VERSION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;20.04.2 LTS (Focal Fossa)&amp;quot;&lt;/span&gt;
Python &lt;span class="m"&gt;3&lt;/span&gt;.8.5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/p/ung-ho.html"&gt;Ủng hộ tác giả 🍺&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="regex"></category><category term="lambda"></category><category term="kafka"></category><category term="profile"></category><category term="cprofile"></category></entry><entry><title>Có Salt không lo chết đói</title><link href="http://pp.pymi.vn/article/salt/" rel="alternate"></link><published>2021-06-19T00:00:00+07:00</published><updated>2021-06-19T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2021-06-19:/article/salt/</id><summary type="html">&lt;p&gt;Tự động hóa cài đặt, cấu hình (deploy) Python app với Salt&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="salt" src="https://gitlab.com/saltstack/open/salt-branding-guide/-/raw/master/logos/SaltProject_altlogo_teal.png?inline=true"&gt;&lt;/p&gt;
&lt;h2&gt;Salt là gì&lt;/h2&gt;
&lt;p&gt;Salt (/sɔːlt/ /sɒlt/) là một phần mềm mã nguồn mở, một hệ thống
thuộc nhóm Configuration Management (CM), viết bằng Python, sử dụng YAML làm ngôn
ngữ giao tiếp với người dùng.&lt;/p&gt;
&lt;h2&gt;Salt làm gì?&lt;/h2&gt;
&lt;p&gt;Tính năng của Salt chia làm 2 phần chính: remote execution và configuration
management dựa trên nền tảng remote execution.&lt;/p&gt;
&lt;h3&gt;Remote execution&lt;/h3&gt;
&lt;p&gt;chạy lệnh từ xa. Sau khi cài đặt xong salt-master và các salt-minion, từ
salt-master có thể chạy bất kì câu lệnh nào trên máy cài salt-minion.&lt;/p&gt;
&lt;p&gt;Tưởng tượng bạn cần xoá 1 file trên 10 hay 100 máy, chỉ cần gõ 1 câu lệnh và
tất cả các minion sẽ chạy câu lệnh ấy. Sức mạnh là vô cùng khủng khiếp, giống
như nắm một mạng botnet trong tay vậy. Muốn ping 1 server từ 100 máy? gõ lệnh
&lt;code&gt;ping -c N victim&lt;/code&gt;, và 100 máy sẽ cùng lúc ping đến máy đích.&lt;/p&gt;
&lt;h3&gt;Configuration management&lt;/h3&gt;
&lt;p&gt;đảm bảo trạng thái các thành phần của hệ thống. Cần đảm bảo 1 service NGINX
chạy với file cấu hình nhất định, forward request đến gunicorn app
server trên máy ấy, đã cấu hình để chạy một web application viết bằng Python
với phiên bản mới nhất lấy từ 1 git repository? Salt làm được tất cả điều đó,
và nó có thể đảm bảo rằng mọi thay đổi bằng tay thực hiện trên những thành
phần nói trên sẽ bị thay thế bằng những gì đã định trước.&lt;/p&gt;
&lt;p&gt;Theo &lt;a href="https://www.familug.org/2015/06/saltstack-chao-muoi-em-la-ai.html"&gt;Chào Muối, em là ai? &lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Mục tiêu&lt;/h2&gt;
&lt;p&gt;Bài này cài đặt salt qua &lt;code&gt;pip&lt;/code&gt;, và dùng &lt;code&gt;salt-ssh&lt;/code&gt; để điều khiển máy khác.
Mục tiêu đưa ra một bài hướng dẫn thực hành đơn giản hơn bài hướng dẫn trên
trang chủ &lt;a href="https://docs.saltproject.io/en/master/topics/tutorials/walkthrough.html#salt-in-10-minutes/"&gt;Salt in 10 minutes&lt;/a&gt;
và mang lại cảm giác giống đang dùng &lt;a href="https://www.familug.org/2016/12/ansible-command.html"&gt;Ansible&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Kết quả: deploy uds bot - 1 chương trình Python lên máy Ubuntu 18.04, cấu hình
systemd chạy vù vù.&lt;/p&gt;
&lt;h2&gt;3 phút dành cho lý thuyết&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Máy ra lệnh gọi là salt master&lt;/li&gt;
&lt;li&gt;Máy bị điều khiển, chạy các câu lệnh gọi là salt minion, trong bài này có IP &lt;code&gt;192.168.0.110&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Trong bài này, master sẽ truy cập vào minion qua ssh.&lt;/li&gt;
&lt;li&gt;Máy master không cần quyền gì đặc biệt và đã cài đặt salt trên Python3.6+&lt;/li&gt;
&lt;li&gt;Máy minion chạy &lt;code&gt;*NIX&lt;/code&gt; OS (Ubuntu, Debian, Fedora, .. MacOS),
  phải có quyền sudo không password hoặc root để toàn quyền điều khiển máy (như cài package qua
apt). &lt;a href="https://docs.saltproject.io/en/latest/topics/installation/windows.html"&gt;Salt có hỗ trợ Windows&lt;/a&gt; nhưng nằm ngoài phạm vi bài viết này.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Trên máy minion&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tạo 1 user mới: &lt;code&gt;sudo adduser saltuser&lt;/code&gt;, trả lời các câu hỏi và gõ password&lt;/li&gt;
&lt;li&gt;sudo không password: thêm &lt;code&gt;saltuser ALL=(ALL) NOPASSWD: ALL&lt;/code&gt; vào cuối file /etc/sudoers&lt;/li&gt;
&lt;li&gt;Có chương trình sshd listen trên port 22, cài bằng lệnh &lt;code&gt;sudo apt install openssh-server&lt;/code&gt;, gõ &lt;code&gt;ss -nlt | grep 22&lt;/code&gt; thấy có kết quả là ok.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Trên máy master&lt;/h2&gt;
&lt;p&gt;Tạo SSH key nếu chưa có:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ls ~/.ssh/id_rsa &lt;span class="o"&gt;||&lt;/span&gt; ssh-keygen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Copy ssh public key vào minion:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-copy-id saltuser@192.168.0.110
&lt;span class="c1"&gt;# rồi gõ password saltuser vừa tạo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;p&gt;Tạo 1 virtualenv:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python3 -m venv saltenv
. saltenv/bin/activate
pip install &lt;span class="nv"&gt;salt&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="m"&gt;3002&lt;/span&gt;  &lt;span class="c1"&gt;# do bản 3003 mới nhất đang có bug&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cài xong kiểm tra&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ salt-ssh --version
salt-ssh &lt;span class="m"&gt;3002&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Cấu hình master&lt;/h3&gt;
&lt;p&gt;Có 2 file cần tạo: &lt;code&gt;master&lt;/code&gt; và &lt;code&gt;roster&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Tạo 1 thư mục tên saltlab:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir -p ~/saltlab/states
&lt;span class="nb"&gt;cd&lt;/span&gt; ~/saltlab
&lt;span class="nb"&gt;pwd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File &lt;code&gt;master&lt;/code&gt; chứa 2 dòng, &lt;code&gt;root_dir&lt;/code&gt; giá trị là đường dẫn đầy đủ tới
thư muc saltlab, &lt;code&gt;file_roots&lt;/code&gt; có &lt;code&gt;states&lt;/code&gt; với giá trị là đường dẫn đầy đủ
tới thư mục &lt;code&gt;states&lt;/code&gt;, thư mục states sẽ chứa các file "saltstate"&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;root_dir&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/home/hvn/saltlab&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;file_roots&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;base&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/home/hvn/saltlab/states&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File &lt;code&gt;roster&lt;/code&gt; chứa thông tin về các máy minion:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;tv&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;host&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;192.168.0.110&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;user&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;saltuser&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;sudo&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;True&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;trau&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;host&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;103.x.y.z&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;user&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;root&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;port&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;22022&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ở đây định nghĩa 2 minion, 1 tên &lt;code&gt;tv&lt;/code&gt; và 1 tên &lt;code&gt;trau&lt;/code&gt;, minion &lt;code&gt;tv&lt;/code&gt; sẽ là đối
tượng của bài này.&lt;/p&gt;
&lt;p&gt;File này tương tự file inventory (hay có tên là &lt;code&gt;hosts&lt;/code&gt;) của Ansible.&lt;/p&gt;
&lt;p&gt;Cấu trúc thư mục trông như sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;saltlab/
├── master
├── roster
├── pillars
│   ├── common.sls
│   ├── top.sls
│   └── uds.sls
└── states
    ├── example.sls
    ├── htop.sls
    ├── template.j2
    ├── uds.sls
    └── uds.systemd
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Chạy câu lệnh Salt&lt;/h2&gt;
&lt;p&gt;Từ master, trong venv saltenv, gõ lệnh &lt;code&gt;salt-ssh&lt;/code&gt; với đối tượng &lt;code&gt;tv&lt;/code&gt;, câu lệnh
salt &lt;code&gt;cmd.run&lt;/code&gt;, câu lệnh chạy trên &lt;code&gt;tv&lt;/code&gt; là &lt;code&gt;uname -a&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;saltenv&lt;span class="o"&gt;)&lt;/span&gt; $ salt-ssh --config ~/saltlab tv cmd.run &lt;span class="s1"&gt;&amp;#39;uname -a&amp;#39;&lt;/span&gt;
tv:
    Linux MINIPC-PN50 &lt;span class="m"&gt;5&lt;/span&gt;.8.0-55-generic &lt;span class="c1"&gt;#62~20.04.1-Ubuntu SMP Wed Jun 2 08:55:04 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Apply Salt state&lt;/h2&gt;
&lt;p&gt;Saltstate file là &lt;a href="https://docs.saltproject.io/en/latest/topics/yaml/index.html"&gt;file YAML&lt;/a&gt; có đuôi &lt;code&gt;.sls&lt;/code&gt;, khai báo (declare)
trạng thái của hệ thống mong muốn đạt được. File &lt;code&gt;htop.sls&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;install htop&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;   &lt;span class="c1"&gt;#  ID của &amp;quot;state&amp;quot;&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pkg.installed&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# loại state - tương ứng với 1 python function&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;htop&lt;/span&gt;   &lt;span class="c1"&gt;# các tham số - function argument&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cú pháp YAML trên tương ứng với Python dict sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;install htop&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;pkg.installed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;htop&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}]}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi được &lt;code&gt;apply&lt;/code&gt;, state trên sẽ cài package &lt;code&gt;htop&lt;/code&gt; lên máy, sử dụng package
manager của máy minion, dù là apt trên Ubuntu hay yum/dnf trên Fedora.&lt;/p&gt;
&lt;p&gt;Đây là một ưu điểm lớn của Salt, người dùng thậm chí không biết chính xác
câu lệnh để cài thế nào, chỉ cần liệt kê ra những gì mình cần, Salt sẽ lo tất.
Phần này nghe rất "magic", thực chất thì bên dưới pkg là 1 &lt;a href="https://github.com/saltstack/salt/blob/master/salt/states/pkg.py"&gt;Python module&lt;/a&gt;
còn &lt;a href="https://github.com/saltstack/salt/blob/v3003/salt/states/pkg.py#L1007"&gt;&lt;code&gt;installed&lt;/code&gt; là 1 function&lt;/a&gt;
chạy đủ loại if/else kiểm tra hệ thống và chọn &lt;code&gt;apt&lt;/code&gt; hay &lt;code&gt;yum&lt;/code&gt; cho phù hợp.
Salt gọi đây là &lt;a href="https://docs.saltproject.io/en/latest/ref/states/all/index.html"&gt;&lt;code&gt;state module pkg&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Gõ trên master:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ salt-ssh --config ~/saltlab tv state.apply htop
tv:
----------
          ID: install htop
    Function: pkg.installed
        Name: htop
      Result: True
     Comment: The following packages were installed/updated: htop
     Started: &lt;span class="m"&gt;15&lt;/span&gt;:09:22.550836
    Duration: &lt;span class="m"&gt;10969&lt;/span&gt;.17 ms
     Changes:
              ----------
              htop:
                  ----------
                  new:
                      &lt;span class="m"&gt;2&lt;/span&gt;.2.0-2build1
                  old:

Summary &lt;span class="k"&gt;for&lt;/span&gt; tv
------------
Succeeded: &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;changed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
Failed:    &lt;span class="m"&gt;0&lt;/span&gt;
------------
Total states run:     &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xem đầy đủ các option, các function khác của &lt;code&gt;pkg state module&lt;/code&gt; tại &lt;a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.pkg.html#module-salt.states.pkg"&gt;module-salt.states.pkg&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Copy/render file và chạy câu lệnh&lt;/h3&gt;
&lt;p&gt;File &lt;code&gt;example.sls&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;render a config file&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;file.managed&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;source&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;salt://template.j2&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;template&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;jinja&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mode&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;0400&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/tmp/ahihi.yml&lt;/span&gt;

&lt;span class="l l-Scalar l-Scalar-Plain"&gt;now run a command&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cmd.run&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cat /tmp/ahihi.yml | head&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;cmd.run&lt;/code&gt; dùng để chạy 1 câu lệnh trên minion, lệnh tùy ý. Với &lt;code&gt;cmd.run&lt;/code&gt;,
ta đã có thể làm được mọi thứ, đây là cách đơn giản nhất để thay thế các
bash script mặc dù không phải tối ưu nhất. Ví dụ: nếu chạy apt-get install để
cài package thay vì pkg.installed sẽ mất đi các lợi ích pkg.installed thực hiện
- chạy trên nhiều OS khác nhau, tự động chạy apt update).
Người mới tập dùng Salt có thể dùng &lt;code&gt;cmd.run&lt;/code&gt; để bắt đầu, nhưng nên tìm state
module có sẵn để thu được kết quả tốt hơn.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;file.managed&lt;/code&gt; có thể tải 1 file từ internet, có thể copy 1 file từ X đến Y,
trong ví dụ này nó copy file từ salt://template.j2 tới minion rồi render với
&lt;a href="https://docs.saltproject.io/en/getstarted/config/jinja.html"&gt;Jinja2 template&lt;/a&gt;,
ghi vào &lt;code&gt;/tmp/ahihi.yml&lt;/code&gt; và chmod 0400.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;salt://&lt;/code&gt; trong ví dụ này là &lt;code&gt;file_roots&lt;/code&gt; trong file cấu hình master, tức thư
mục &lt;code&gt;/home/hvn/saltlab/states&lt;/code&gt; trên máy master.&lt;/p&gt;
&lt;p&gt;Nội dung file template.j2:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt;- &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;meo&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bo&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ga&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;  - &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;i&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt;- &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;myuser: user&lt;/span&gt;
&lt;span class="x"&gt;mypassword: passwd&lt;/span&gt;

&lt;span class="x"&gt;os: &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;grains&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;osfinger&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;ips: &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;grains&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ipv4&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Jinja2 có for if/else như Python, xem
&lt;a href="https://docs.saltproject.io/en/getstarted/config/jinja.html"&gt;Jinja2 template&lt;/a&gt;
để tìm hiểu thêm.&lt;/p&gt;
&lt;h3&gt;5 phút dành cho lý thuyết: grains pillar&lt;/h3&gt;
&lt;p&gt;1 nhược điểm của Salt là theo mốt thời 2010, đặt tên cho mọi khái niệm, và tên
đó không thực sự có nhiều ý nghĩa - đơn giản chỉ là bịa ra (theo mốt của
&lt;a href="https://www.chef.io/"&gt;Chef&lt;/a&gt; - một đối thủ viết bằng Ruby).&lt;/p&gt;
&lt;p&gt;Salt có 2 khái niệm:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;grains: chứa các thông tin về máy minion (OS, version, ip, ...)&lt;/li&gt;
&lt;li&gt;pillar: chứa các thông tin truyền từ master (thường là các thông tin bí mật như
  user/password).&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;salt  grains&lt;/h4&gt;
&lt;p&gt;Ví dụ trên có truy cập 2 thông tin từ grains là tên hệ điều hành và các IPv4 của
máy minion. state.apply&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;          &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ID&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;render a config file&lt;/span&gt;
   &lt;span class=" -Error"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Function&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;file.managed&lt;/span&gt;
        &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/tmp/ahihi.yml&lt;/span&gt;
      &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Result&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;True&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Comment&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;File /tmp/ahihi.yml is in the correct state&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Started&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;19:33:25.337228&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Duration&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;34.549 ms&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Changes&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;----------&lt;/span&gt;
          &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ID&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;now run a command&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Function&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cmd.run&lt;/span&gt;
        &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cat /tmp/ahihi.yml | head&lt;/span&gt;
      &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Result&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;True&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Comment&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Command &amp;quot;cat /tmp/ahihi.yml | head&amp;quot; run&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Started&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;19:33:25.372408&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Duration&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;7.672 ms&lt;/span&gt;
     &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Changes&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
              &lt;span class="l l-Scalar l-Scalar-Plain"&gt;----------&lt;/span&gt;
              &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pid&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
                  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;42905&lt;/span&gt;
              &lt;span class="l l-Scalar l-Scalar-Plain"&gt;retcode&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
                  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;0&lt;/span&gt;
              &lt;span class="l l-Scalar l-Scalar-Plain"&gt;stderr&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
              &lt;span class="l l-Scalar l-Scalar-Plain"&gt;stdout&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;

                    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;meo&lt;/span&gt;
                    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;bo&lt;/span&gt;
                    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ga&lt;/span&gt;

              &lt;span class=" -Error"&gt;    &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;myuser&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;user&lt;/span&gt;
                  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mypassword&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;passwd&lt;/span&gt;

                  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;os&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Ubuntu-20.04&lt;/span&gt;
                  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;ips&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;127.0.0.1&amp;#39;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;192.168.0.110&amp;#39;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Để liệt kê tất cả grains của minion, dùng Salt command &lt;code&gt;grains.items&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ salt-ssh -c ~/saltlab tv grains.items
tv:
    ----------
    biosreleasedate:
        &lt;span class="m"&gt;08&lt;/span&gt;/27/2020
    biosversion:
        &lt;span class="m"&gt;0416&lt;/span&gt;
    cpu_flags:
    ...
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;salt pillar&lt;/h4&gt;
&lt;p&gt;Pillar chỉ nằm trên master, nó map file nào dành cho minion nào. File &lt;code&gt;top.sls&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;base:
  &amp;#39;*&amp;#39;:
    - common
  &amp;#39;trau&amp;#39;:
    - uds
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;*&lt;/code&gt; tức mọi minion đều có thể truy cập các pillar item trong file &lt;code&gt;common.sls&lt;/code&gt;,
chỉ &lt;code&gt;trau&lt;/code&gt; mới truy cập được nội dung trong file &lt;code&gt;uds.sls&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Các file pillar là các file &lt;code&gt;.sls&lt;/code&gt; theo syntax YAML, biểu diễn các dictionary
của Python. Ví dụ: &lt;code&gt;uds.sls&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;telegram_token&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;this_is_token&lt;/span&gt;

&lt;span class="l l-Scalar l-Scalar-Plain"&gt;database&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;username&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;root&lt;/span&gt;
  &lt;span class="l l-Scalar l-Scalar-Plain"&gt;password&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;toor&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Để liệt kê tất cả pillar item dành cho minion, dùng Salt command &lt;code&gt;pillar.items&lt;/code&gt;
(chú ý grains có s, pillar không có).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ salt-ssh -c ~/saltlab trau pillar.items
trau:
    ----------
    database:
        ----------
        password:
            toor
        username:
            root
    telegram_token:
        this_is_token
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ví dụ 1 file dùng pillar:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /lib/systemd/system/uds.service&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;Unit&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Description=UDS telegram bot&lt;/span&gt;

&lt;span class="l l-Scalar l-Scalar-Plain"&gt;[Service]&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;User=uds&lt;/span&gt;
&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Environment=BOT_TOKEN={{ pillar[&amp;#39;telegram_token&amp;#39;] }}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Deploy 1 Python project&lt;/h3&gt;
&lt;p&gt;Link này viết 1 salt formula (tên của 1 "bộ cài bằng Salt") để cài
bot telegram &lt;code&gt;uds&lt;/code&gt; chạy trên Ubuntu 18.04 với systemd.
&lt;a href="https://github.com/pymivn/udsbot-salt"&gt;udsbot-salt&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Troubleshooting&lt;/h3&gt;
&lt;p&gt;Khi kêt quả chạy apply không thành công, thêm &lt;code&gt;-ldebug&lt;/code&gt; để xem log chi tiết.&lt;/p&gt;
&lt;h2&gt;Dùng Ansible "xịn hơn" không?&lt;/h2&gt;
&lt;p&gt;Không, Ansible giống Salt đến bất ngờ, cũng viết bằng Python với các module
tương ứng, cũng dùng Jinja2, cũng viết cấu hình bằng file YAML.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/hvnsweeting/elbisna/blob/master/redis/roles/redis/tasks/main.yml"&gt;Xem ví dụ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ngày nay, Ansible phổ biến hơn nhờ nó đơn giản hơn để bắt đầu, do ít
từ khóa hay khái niệm lạ. Năm 2015, RedHat mua lại Ansible khiến cho nó
càng trở nên phổ biến hơn.&lt;/p&gt;
&lt;p&gt;Salt thành công trước Ansible (2012 2013), đứng sau là công ty SaltStack, đến
năm 2020 cũng được ông lớn &lt;a href="https://www.vmware.com/support/acquisitions/saltstack.html"&gt;VMWare
mua lại&lt;/a&gt;. Salt có
nhiều ưu điểm so với Ansible (đặc biệt là nhanh),
cung cấp nhiều tính năng phức tạp - dùng trong môi trường phức tạp.&lt;/p&gt;
&lt;p&gt;Dùng Salt chuyển sang Ansible mất nửa ngày để map lại khái niệm.&lt;/p&gt;
&lt;h2&gt;Học salt là học gì&lt;/h2&gt;
&lt;p&gt;Đa phần là học các salt module (như &lt;code&gt;pkg.installed&lt;/code&gt;) có sẵn để viết các
state, dùng chúng như các viên gạch để tự động quá trình cài đặt / cấu hình
phần mềm trên hệ thống.
Cách thực hành đơn giản nhất là dùng Salt cài các phần mềm trên chính máy tính
của mình đang dùng, thay vì gọi &lt;code&gt;salt-ssh&lt;/code&gt;, dùng&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo salt-call --local state.apply FORMULA_NAME -linfo
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Tạo 1 salt formula để deploy app Flask hello world chạy bằng gunicorn
với NGINX server rồi tạo Pull Request vào &lt;a href="https://github.com/pymivn/flask-salt"&gt;pymivn/flask-salt&lt;/a&gt;
để trăm hay đều như tay quen.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Năm COVID-19 thứ 2, 2021, Salt, Ansible, Chef hay Puppet không còn mới mẻ gì,
từng là "điểm cộng" trong các vòng tuyển dụng thì giờ là yêu cầu hiển nhiên
cho giới "DevOps", thế giới cũng đã đu theo một trend mới hơn, hot hơn
có tên Docker+Kubernetes, nhưng các CM vẫn luôn có đất dùng. Trend lên rồi sẽ
xuống, hot rồi sẽ nguội, cái gì hợp lý thì ta dùng.&lt;/p&gt;
&lt;p&gt;Đến đây, đã đủ để các Python dev deploy code như 1 DevOps engineer thực thụ,
không phải nhọc nhằn code bash.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Life's too short to remember how to write Bash code. I feel liberated.  — @laheadle on Clojurians Slack&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.saltproject.io/en/latest/topics/ssh/"&gt;salt-ssh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://github.com/saltstack/salt/issues/59942&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/2015/06/saltstack-chao-muoi-em-la-ai.html"&gt;Chào Muối, em là ai? &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://docs.saltproject.io/en/latest/contents.html&lt;/li&gt;
&lt;li&gt;Các formula cộng đồng &lt;a href="https://github.com/saltstack-formulas"&gt;saltstack-formulas&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Ủng hộ tác giả&lt;/h3&gt;
&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/p/ung-ho.html"&gt;Ủng hộ tác giả 🍺&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="saltstack"></category><category term="salt"></category><category term="deploy"></category><category term="devops"></category><category term="ansible"></category><category term="sysadmin"></category></entry><entry><title>Học Haskell không phải trầm trồ - theo cách Pymi.vn</title><link href="http://pp.pymi.vn/article/haskell1/" rel="alternate"></link><published>2021-06-10T00:00:00+07:00</published><updated>2021-06-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2021-06-10:/article/haskell1/</id><summary type="html">&lt;p&gt;ngôn ngữ lập trình luôn được xếp vào nhóm "khó học nhất" - giống Python bất ngờ - phần 1.&lt;/p&gt;</summary><content type="html">&lt;ul&gt;
&lt;li&gt;Cảnh báo: rất giống Python&lt;/li&gt;
&lt;li&gt;Chú ý: không cần biết Python&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Haskell (/ˈhæskəl/) - visub: ha-s-kồ - 1990 (lớn hơn Python 1 tuổi)
Trang chủ: &lt;a href="https://www.haskell.org/"&gt;https://www.haskell.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Haskell" src="https://www.haskell.org/img/haskell-logo.svg"&gt;&lt;/p&gt;
&lt;p&gt;Haskell là ngôn ngữ functional (lập trình hàm), thuộc nhóm "pure" blah blah blah
có thể bỏ qua và gõ cho đến cuối bài, work first, talk is cheap, later.&lt;/p&gt;
&lt;h2&gt;Cài đặt&lt;/h2&gt;
&lt;p&gt;Hướng dẫn &lt;a href="https://www.haskell.org/downloads/#linux-mac-freebsd"&gt;trang chủ&lt;/a&gt;, hỗ trợ cả Windows&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl --proto &lt;span class="s1"&gt;&amp;#39;=https&amp;#39;&lt;/span&gt; --tlsv1.2 -sSf https://get-ghcup.haskell.org &lt;span class="p"&gt;|&lt;/span&gt; sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;enter enter enter ... rồi mở terminal mới, gõ &lt;code&gt;ghci&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ghci --version
The Glorious Glasgow Haskell Compilation System, version 8.10.5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trên Ubuntu có thể dùng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt-get install -y haskell-stack
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;REPL&lt;/h2&gt;
&lt;p&gt;REPL - Read Eval Print Loop, là chương trình nhận code người dùng nhập vào
(Read), chạy code đó (Eval), in kết quả ra màn hình (Print), và cứ tiếp tục vậy
(Loop).&lt;/p&gt;
&lt;p&gt;Khái niệm này bắt nguồn từ ngôn ngữ lập trình cổ thứ 2 thế giới: LISP.&lt;/p&gt;
&lt;p&gt;Việc viết code khi dùng các ngôn ngữ có REPL thường theo các bước:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bật REPL lên&lt;/li&gt;
&lt;li&gt;gõ code thử cho tới khi thu được kết quả mong muốn&lt;/li&gt;
&lt;li&gt;copy code đó vào editor/IDE&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Câu lệnh bật REPL của Haskell có tên &lt;code&gt;ghci&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="n"&gt;ghci&lt;/span&gt;
&lt;span class="kt"&gt;GHCi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="mf"&gt;8.10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="kt"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="kt"&gt;://&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;haskell&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ghc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;  &lt;span class="kt"&gt;:?&lt;/span&gt; &lt;span class="n"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1024&lt;/span&gt;
&lt;span class="mi"&gt;2048&lt;/span&gt;

&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;:&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt;
&lt;span class="kt"&gt;Leaving&lt;/span&gt; &lt;span class="kt"&gt;GHCi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Haskell Hello world&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Prelude&amp;gt; print &lt;span class="s2"&gt;&amp;quot;Hello Pymier!&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Hello Pymier!&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Integer&lt;/h2&gt;
&lt;p&gt;cộng &lt;code&gt;+&lt;/code&gt; trừ &lt;code&gt;-&lt;/code&gt; nhân &lt;code&gt;*&lt;/code&gt; mũ/lũy thừa &lt;code&gt;^&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Prelude&amp;gt; &lt;span class="m"&gt;54&lt;/span&gt; + &lt;span class="m"&gt;5&lt;/span&gt; * &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; + &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="m"&gt;69&lt;/span&gt;
Prelude&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt; ^ &lt;span class="m"&gt;1000&lt;/span&gt;
&lt;span class="m"&gt;10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Float&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="mf"&gt;2.0&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="mf"&gt;2.5&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mf"&gt;2.5&lt;/span&gt;
&lt;span class="mf"&gt;2.0&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;
&lt;span class="mf"&gt;0.30000000000000004&lt;/span&gt;

&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mf"&gt;0.3&lt;/span&gt;
&lt;span class="kt"&gt;False&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="mf"&gt;0.3&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://pymi.vn/blog/why-not-float/"&gt;Tại sao 0.1 + 0.1 + 0.1 /= 0.3&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Boolean&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Prelude&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt; &amp;lt; &lt;span class="m"&gt;5&lt;/span&gt;
True
Prelude&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt; &amp;gt; &lt;span class="m"&gt;5&lt;/span&gt;
False
Prelude&amp;gt; &lt;span class="m"&gt;1&lt;/span&gt; + &lt;span class="nv"&gt;1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
True
Prelude&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt; - &lt;span class="m"&gt;1&lt;/span&gt; /&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
True
Prelude&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt; &amp;lt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
True
Prelude&amp;gt; &lt;span class="m"&gt;1&lt;/span&gt;/0
Infinity
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Prelude&amp;gt; True &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; True
True
Prelude&amp;gt; True &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; False
False
Prelude&amp;gt; False &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; True
False
Prelude&amp;gt; False &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; False
False
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt;
&lt;span class="kt"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;not&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;False&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Haskell boolean có tính &lt;a href="https://pymi.vn/tutorial/boolean/"&gt;short-circuit&lt;/a&gt; -
dừng lại ngay khi có thể kết luận kết quả biểu thức boolean.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="ne"&gt;error&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;huhu&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="kt"&gt;Exception:&lt;/span&gt; &lt;span class="n"&gt;huhu&lt;/span&gt;
&lt;span class="kt"&gt;CallStack&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="kt"&gt;HasCallStack&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="kt"&gt;:&lt;/span&gt;
  &lt;span class="ne"&gt;error&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;called&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;interactive&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="kt"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="n"&gt;interactive&lt;/span&gt;&lt;span class="kt"&gt;:Ghci2&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="ne"&gt;error&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;huhu&amp;quot;&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;False&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="ne"&gt;error&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;huhu&amp;quot;&lt;/span&gt;
&lt;span class="kt"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay nói cụ thể:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;||&lt;/code&gt; sẽ dừng lại và trả về kết quả ngay khi gặp &lt;code&gt;True&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; sẽ dừng lại và trả về kết quả ngay khi gặp &lt;code&gt;False&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Với các ngôn ngữ khác, boolean có short-circuit hay không thì tùy từng ngôn
ngữ quyết định, nhưng với một tính năng nổi bật của Haskell: &lt;strong&gt;Lazy&lt;/strong&gt;,
short-circuit là chuyện đương nhiên.&lt;/p&gt;
&lt;h2&gt;type&lt;/h2&gt;
&lt;p&gt;Các câu lệnh trong &lt;code&gt;ghci&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;:help&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:info&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;:&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="n"&gt;mod&lt;/span&gt;
&lt;span class="kr"&gt;type&lt;/span&gt; &lt;span class="kt"&gt;Integral&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;Constraint&lt;/span&gt;
&lt;span class="kr"&gt;class&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Real&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;Enum&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;Integral&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="kr"&gt;where&lt;/span&gt;
  &lt;span class="o"&gt;...&lt;/span&gt;
  &lt;span class="n"&gt;mod&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
  &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="c1"&gt;-- Defined in ‘GHC.Real’&lt;/span&gt;
&lt;span class="kr"&gt;infixl&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="p"&gt;`&lt;/span&gt;&lt;span class="n"&gt;mod&lt;/span&gt;&lt;span class="p"&gt;`&lt;/span&gt;

&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;:&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kr"&gt;type&lt;/span&gt; &lt;span class="kt"&gt;Num&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;Constraint&lt;/span&gt;
&lt;span class="kr"&gt;class&lt;/span&gt; &lt;span class="kt"&gt;Num&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="kr"&gt;where&lt;/span&gt;
  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
  &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="c1"&gt;-- Defined in ‘GHC.Num’&lt;/span&gt;
&lt;span class="kr"&gt;infixl&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hiển thị type:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;:&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;

&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Num&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;

&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;
&lt;span class="mf"&gt;0.1&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Fractional&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;số nguyên 1 có kiểu &lt;code&gt;Num&lt;/code&gt;, số float &lt;code&gt;0.1&lt;/code&gt; có kiểu &lt;code&gt;Fractional&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="kt"&gt;True&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Bool&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;giá trị boolean True có kiểu &lt;code&gt;Bool&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;con mèo trèo&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;con m&lt;/span&gt;&lt;span class="se"&gt;\232&lt;/span&gt;&lt;span class="s"&gt;o tr&lt;/span&gt;&lt;span class="se"&gt;\232&lt;/span&gt;&lt;span class="s"&gt;o&amp;quot;&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;Char&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;con mèo trèo&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;12&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;string là 1 list của các &lt;code&gt;Char&lt;/code&gt; (character - ký tự)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="nf"&gt;it&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Num&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;Enum&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;kiểu list được biểu diễn bởi dấu &lt;code&gt;[]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;it&lt;/code&gt; là biểu thức/kết quả cuối cùng bạn đã gõ. Tương tự &lt;code&gt;_&lt;/code&gt; trong Python interpreter.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ProjectEuler problem 1&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://projecteuler.net/problem=1"&gt;https://projecteuler.net/problem=1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chú ý: theo chương trình học của &lt;a href="https://pymi.vn"&gt;Pymi.vn&lt;/a&gt;, phần này được
học ở buổi số 4. Bạn đọc cần biết Python để hiểu phần này hoặc chỉ cần
gõ theo. Có thể đọc thêm tại &lt;a href="https://pp.pymi.vn/article/tuple_comps/"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23.
Find the sum of all the multiples of 3 or 5 below 1000.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Tạo list các số từ 1 đến 5&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Haskell không dùng &lt;code&gt;%&lt;/code&gt; cho phép chia lấy phần dư (modulo/remainder), code Python &lt;code&gt;10 % 3&lt;/code&gt; tương đương với viết Haskell &lt;code&gt;mod 10 3&lt;/code&gt; hoặc
&lt;code&gt;rem 10 3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Haskell dùng &lt;code&gt;|| &amp;amp;&amp;amp;&lt;/code&gt; thay Python &lt;code&gt;or and&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://docs.python.org/3/whatsnew/2.0.html#list-comprehensions"&gt;Python 2.0 &lt;strong&gt;MƯỢN&lt;/strong&gt; list comprehension từ Haskell&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="mi"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Haskell dùng &lt;code&gt;|&lt;/code&gt; thay chữ &lt;code&gt;for&lt;/code&gt;, dùng &lt;code&gt;&amp;lt;-&lt;/code&gt; thay chữ &lt;code&gt;in&lt;/code&gt;, dùng &lt;code&gt;,&lt;/code&gt; thay chữ &lt;code&gt;if&lt;/code&gt; so với Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;mod&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;mod&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="mi"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bonus:
bài &lt;a href="https://projecteuler.net/problem=16"&gt;PE16&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Tính tổng các chữ số của 2 mũ 1000&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Integer&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="n"&gt;show&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="mi"&gt;1366&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Các đặc tính nổi bật của Haskell&lt;/h2&gt;
&lt;p&gt;Theo &lt;a href="https://wiki.haskell.org/Introduction"&gt;wiki Haskell&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Haskell is a computer programming language. In particular, it is a polymorphically statically typed, lazy, purely functional language, quite different from most other programming languages. The language is named for Haskell Brooks Curry, whose work in mathematical logic serves as a foundation for functional languages. Haskell is based on the lambda calculus, hence the lambda we use as a logo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;polymorphically statically typed&lt;/li&gt;
&lt;li&gt;lazy&lt;/li&gt;
&lt;li&gt;purely functional&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;hoặc xem phần features trên https://www.haskell.org/&lt;/p&gt;
&lt;h3&gt;lập trình hàm là gì&lt;/h3&gt;
&lt;p&gt;Haskell là ngôn ngữ thuộc nhóm functional (lập trình hàm).&lt;/p&gt;
&lt;p&gt;Trên lý thuyết,
có nghĩa nó dựa trên &lt;a href="https://wiki.haskell.org/Lambda_calculus"&gt;"lambda calculus"&lt;/a&gt;, một mô hình/hệ thống
tính toán dùng các function (hàm toán học), khác với mô hình Turing Machine mà
các ngôn ngữ lập trình C, Java, Python, Go... dựa trên.
Hai mô hình này được chứng minh về mặt toán học là có khả năng như nhau.&lt;/p&gt;
&lt;p&gt;Về mặt thực hành, code với 1 ngôn ngữ functional thường có nghĩa là:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;không dùng vòng lặp for/while mà dùng các function có sẵn để làm việc tương tự
(vd: map, filter, fold, reduce,...) hoặc viết các &lt;a href="https://pymi.vn/blog/print-recursively/"&gt;recursive function&lt;/a&gt; để thu được
kết quả tương ứng.&lt;/li&gt;
&lt;li&gt;Các kiểu dữ liệu thường là immutable, khi thay đổi 1 list, Haskell sẽ
tạo ra 1 list mới với những thay đổi đã thực hiện (và bỏ list cũ đi).&lt;/li&gt;
&lt;li&gt;First class function: quen với việc dùng function này làm đầu vào cho function
khác. Ví dụ map &lt;code&gt;map (\x -&amp;gt; x * 2) [1..5]&lt;/code&gt; nhận function &lt;code&gt;\x -&amp;gt; x * 2&lt;/code&gt; và 1 list
để thực hiện function đó trên tất cả các phần tử trong list.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Haskell purely functional là gì&lt;/h3&gt;
&lt;p&gt;pure function là một function không có "side effect", giống hàm toán học, kết
quả đầu ra chỉ phụ thuộc đầu vào.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;luôn&lt;/span&gt; &lt;span class="n"&gt;luôn&lt;/span&gt; &lt;span class="n"&gt;bằng&lt;/span&gt; &lt;span class="mi"&gt;61&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Side effect là việc
function thực hiện 1 thay đổi nào đó (thay đổi phần tử 1 list, đọc ghi 1 file,
in ra màn hình, kết nối internet, sleep chương trình, ...) hay phụ thuộc vào
yếu tố khác với đầu vào (một chương trình phụ thuộc vào thời gian lúc nó chạy)
nghe hơi vô lý khi
một ngôn ngữ mà không tương tác với thế giới bên ngoài thì... chỉ để học toán.
Nhưng Haskell sẽ dựa trên 1 khái niệm/cơ chế hoàn toàn khác để thực hiện các
việc nói trên.&lt;/p&gt;
&lt;h3&gt;Haskell lazy là gì&lt;/h3&gt;
&lt;p&gt;lazy là chỉ thực hiện tính toán khi thực sự cần tới giá trị.
Ví dụ có thể viết code tạo ra list từ 1 tới vô cùng, nhưng vì Haskell lazy,
nó chỉ lấy ra phần tử nó cần, chứ không tạo list từ 1 tới vô cùng từ đầu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;take&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;take&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong Python, khái niệm gần nhất với lazy là &lt;a href="https://pp.pymi.vn/article/tuple_comps/"&gt;&lt;code&gt;generator&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Để Haskell bắt buộc phải tính list [1..] tới vô cùng, ta dùng 1 function cần
phải duyệt đến phần tử cuối cùng của list - như tính độ dài : &lt;code&gt;length&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="kt"&gt;CInterrupted&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;code này sẽ chạy mãi cho tới khi người dùng tắt chương trình hoặc bấm Ctrl-C.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Ngày đầu của Haskell không hề khó hơn ngày đầu học Python. Đừng vì "cộng đồng
mạng" nói khó mà chưa thử đã tin!&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://pymi.vn/tutorial/python-integer/&lt;/li&gt;
&lt;li&gt;https://pymi.vn/tutorial/python-calculation-2/&lt;/li&gt;
&lt;li&gt;&lt;a href="http://book.realworldhaskell.org/read/getting-started.html"&gt;RealWorldHaskell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;What next?&lt;/h2&gt;
&lt;p&gt;Loạt bài viết dự kiến có 6-8 bài, ứng với 6-8 buổi &lt;a href="https://pymi.vn"&gt;học Python tại pymi.vn&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;Ủng hộ tác giả viết phần tiếp theo&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/p/ung-ho.html"&gt;Ủng hộ tác giả 🍺&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="haskell"></category></entry><entry><title>Python free variable</title><link href="http://pp.pymi.vn/article/free/" rel="alternate"></link><published>2021-06-07T00:00:00+07:00</published><updated>2021-06-07T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2021-06-07:/article/free/</id><summary type="html">&lt;p&gt;tự do như biến&lt;/p&gt;</summary><content type="html">&lt;p&gt;Python có 2 loại variable (biến): local, global, và free (đếm từ 0, tất nhiên).&lt;/p&gt;
&lt;p&gt;&lt;img alt="free" src="https://images.unsplash.com/photo-1546672117-f83291ce87a9?crop=entropy&amp;amp;cs=tinysrgb&amp;amp;fit=max&amp;amp;fm=jpg&amp;amp;ixid=MnwyMzI1MzN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjMwNzQxNTI&amp;amp;ixlib=rb-1.2.1&amp;amp;q=80&amp;amp;w=600"&gt;&lt;/p&gt;
&lt;h2&gt;binding&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;x = 42&lt;/code&gt; trong Python đọc là bind name x tới object 42.
Tham khảo thêm tại bài &lt;a href="https://pymi.vn/blog/call-by/"&gt;Python call by gì?&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3 loại variable trong Python&lt;/h2&gt;
&lt;h3&gt;global variable&lt;/h3&gt;
&lt;p&gt;Đoạn code sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;x&lt;/code&gt; viết sát lề, gọi là global variable. Chạy đoạn code trên sẽ hiện ra
exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ne"&gt;NameError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;defined&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;do code dùng x trước khi x được bind tới object 42.&lt;/p&gt;
&lt;h3&gt;local variable&lt;/h3&gt;
&lt;p&gt;Đoạn code tiếp theo, chạy sẽ thấy gì? Gợi ý: không phải NameError:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;

&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;x = 42&lt;/code&gt; nằm trong 1 block (trong thân function hay class), gọi là local variable.
Trong 1 block, dùng 1 variable/name trước khi bind nó (tức là có bind, nhưng
bind sau khi dùng), exception sẽ xảy ra là&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ne"&gt;UnboundLocalError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt; &lt;span class="n"&gt;variable&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;referenced&lt;/span&gt; &lt;span class="n"&gt;before&lt;/span&gt; &lt;span class="n"&gt;assignment&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;free variable&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xóa &lt;code&gt;x = 42&lt;/code&gt; trong ví dụ phần local, ta chạy đoạn code này, lại thấy NameError.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ne"&gt;NameError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;defined&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lần này không xảy ra UnboundLocalError, do đoạn code không bind x = 42
trong thân function (block). &lt;code&gt;x&lt;/code&gt; ở đây là một free variable.&lt;/p&gt;
&lt;p&gt;Free variable hoạt động theo cách ... rất tự do. Khi không tìm thấy x trong
foo, Python sẽ đi tìm x ở global (bên ngoài function foo).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;96&lt;/span&gt;
&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Màn hình sẽ hiện ra &lt;code&gt;42&lt;/code&gt;, &lt;code&gt;100&lt;/code&gt; hay &lt;code&gt;96&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;Việc tính toán tên &lt;code&gt;x&lt;/code&gt; có giá trị gì, được thực hiện khi function &lt;strong&gt;CHẠY&lt;/strong&gt;.
Khi gọi &lt;code&gt;foo()&lt;/code&gt; ở trên, x đã có giá trị là 96.&lt;/p&gt;
&lt;h2&gt;Static analysis&lt;/h2&gt;
&lt;p&gt;Việc dùng các công cụ (phần mềm/chương trình) để phân tích/tìm lỗi code bằng
cách đọc code (text) - mà không cần chạy code, gọi là static analysis.
Trong Python phổ biến các công cụ như &lt;code&gt;pep8&lt;/code&gt;, &lt;code&gt;flake8&lt;/code&gt;, &lt;code&gt;pylint&lt;/code&gt;, &lt;a href="https://pp.pymi.vn/article/mypy/"&gt;&lt;code&gt;mypy&lt;/code&gt; cũng
có thể tính luôn&lt;/a&gt;, hay các tính năng
tích hợp sẵn của IDE như Pycharm.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;flake8&lt;/code&gt; cơ bản giống &lt;code&gt;pep8&lt;/code&gt; (tên mới là &lt;code&gt;pycodestyle&lt;/code&gt;), thêm tính năng phát
hiện thư viện không dùng tới/ hay biến không tồn tại.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;khi chạy &lt;code&gt;flake8&lt;/code&gt; với file code, &lt;code&gt;flake8&lt;/code&gt; sẽ phát hiện ra thư viện
&lt;code&gt;math&lt;/code&gt; được import nhưng không dùng, tên &lt;code&gt;x&lt;/code&gt; chưa được định nghĩa.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;flake8&lt;/span&gt; &lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;F401&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;math&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;imported&lt;/span&gt; &lt;span class="n"&gt;but&lt;/span&gt; &lt;span class="n"&gt;unused&lt;/span&gt;
&lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;F821&lt;/span&gt; &lt;span class="n"&gt;undefined&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;F841&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt; &lt;span class="n"&gt;variable&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;assigned&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;but&lt;/span&gt; &lt;span class="n"&gt;never&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;flake8&lt;/code&gt; rất hữu ích khi dễ dàng phát hiện các lỗi đơn giản như gõ nhầm tên
biến hay dùng biến không tồn tại như trên.
Nhưng khi &lt;code&gt;x&lt;/code&gt; là free variable, không công cụ nào của Python có thể phát hiện
ra lỗi này cho tới khi chạy mới thấy exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;

&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do &lt;code&gt;x&lt;/code&gt; là free variable, các công cụ phải quét hết cả file code để tìm &lt;code&gt;x&lt;/code&gt;,
và nó tìm thấy, nên tin rằng &lt;code&gt;x&lt;/code&gt; có tồn tại, nhưng đã quá muộn rồi.
Một ví dụ vô lý hơn nữa, để thấy sự bất lực của các công cụ static analysis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Hạn chế hết mức việc sử dụng global variable, free variable, cần biến gì thì
đưa argument vào function biến đó, code "sát tường" cho hết vào 1 function
main và gọi main() nếu cần chạy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;flake8&lt;/code&gt; sẽ làm tốt nhiệm vụ phát hiện ra &lt;code&gt;x&lt;/code&gt; chưa được định nghĩa trong ví dụ trên:
&lt;code&gt;F821 undefined name 'x'&lt;/code&gt;, và đoạn code này có thể viết lại để không
còn dùng global/free variable nữa:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n_pymi_vn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Tính dynamic của Python khiến các công cụ khó có thể xử lý mọi trường hợp,
công cụ sẽ chỉ giúp một phần, phần còn lại là sự cẩn thận của lập trình viên.&lt;/p&gt;
&lt;p&gt;Tự do phải chăng cần trong khuôn khổ?&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.familug.org/p/ung-ho.html"&gt;Ủng hộ tác giả 🍺&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.python.org/3/reference/executionmodel.html#interaction-with-dynamic-features"&gt;https://docs.python.org/3/reference/executionmodel.html#interaction-with-dynamic-features&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="python"></category></entry><entry><title>Cứ đi là đến (go)</title><link href="http://pp.pymi.vn/article/go12/" rel="alternate"></link><published>2021-03-11T00:00:00+07:00</published><updated>2021-03-11T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2021-03-11:/article/go12/</id><summary type="html">&lt;p&gt;Học vừa đủ Golang để nguy hiểm - phần 2 - hết&lt;/p&gt;</summary><content type="html">&lt;p&gt;Phần tiếp theo của loạt bài viết &lt;a href="http://pp.pymi.vn/article/go/"&gt;&lt;strong&gt;Học vừa đủ Golang để nguy hiểm&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Chi tiết về các khái niệm chỉ có trong Go mà không có trong Python như Pointer,
sự khác biệt về cách tổ chức package trong Go, declaration &amp;amp; initialization
(khai báo và khởi tạo variable), cùng các standard library quan trọng nhất
cho một SysAdmin/DevOps.&lt;/p&gt;
&lt;p&gt;Code trong loạt bài này lược bỏ phần package/import/declare function main, người đọc tự thêm vào để chạy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pp.pymi.vn&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// WRITE CODE HERE&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Extended Backus-Naur Form (EBNF)&lt;/h2&gt;
&lt;p&gt;Cú pháp dùng để mô tả Go syntax có tên &lt;a href="https://golang.org/ref/spec#Notation"&gt;EBNF&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Có vẻ không dễ đọc, nhưng không phải là không thể đọc nổi, bỏ qua nếu
bạn không quan tâm. Một ví dụ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;Production&lt;/span&gt;  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;production_name&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;=&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="nx"&gt;Expression&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Expression&lt;/span&gt;  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Alternative&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;|&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;Alternative&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Alternative&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Term&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;Term&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Term&lt;/span&gt;        &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;production_name&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;token&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;…&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;token&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;Group&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;Option&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;Repetition&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Group&lt;/span&gt;       &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;(&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;Expression&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Option&lt;/span&gt;      &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;Expression&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;]&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;Repetition&lt;/span&gt;  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;Expression&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;}&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://docs.python.org/3.9/reference/grammar.html"&gt;Python 3.9 dùng EBNF kết hợp với PEG&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Khai báo và khởi tạo&lt;/h2&gt;
&lt;p&gt;Declaration &amp;amp; initialization&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;VarDecl&lt;/span&gt;     &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;var&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nx"&gt;VarSpec&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;(&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;VarSpec&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;VarSpec&lt;/span&gt;     &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;IdentifierList&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nx"&gt;Type&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;=&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;ExpressionList&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;=&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;ExpressionList&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Để sử dụng 1 biến (variable) trong Go, cần làm 2 bước declaration (khai báo) và
initialization (khởi tạo giá trị).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt;
    &lt;span class="nx"&gt;z&lt;/span&gt; &lt;span class="kt"&gt;float64&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;z&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;// Output&lt;/span&gt;
&lt;span class="c1"&gt;// 0 false +0.000000e+000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khai báo biến sử dụng từ khóa &lt;code&gt;var&lt;/code&gt;, nếu không gán giá trị khởi tạo
(initialization), các biến sẽ có &lt;a href="https://golang.org/ref/spec#The_zero_value"&gt;zero
value&lt;/a&gt; tương ứng với kiểu
của nó. Tức int sẽ = 0, bool = false, string = "", pointer = nil. Nếu có gán
giá trị, biểu thức theo sau sẽ được tính toán và biến sẽ chứa giá trị này.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// Output&lt;/span&gt;
&lt;span class="c1"&gt;// 2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;Short variable declarations&lt;/em&gt;, không cần ghi type, và dùng dấu &lt;code&gt;:&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ShortVarDecl = IdentifierList &amp;quot;:=&amp;quot; ExpressionList .
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pymier&amp;quot;&lt;/span&gt;
&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;z&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;z&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;// Pymier679&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;https://golang.org/ref/spec#Variable_declarations&lt;/p&gt;
&lt;h2&gt;Scope&lt;/h2&gt;
&lt;p&gt;Scope là phạm vi hoạt động của một biến.
Mỗi tên biến chỉ có thể được định nghĩa duy nhất 1 lần trong mỗi block
(đánh dấu bởi &lt;code&gt;{}&lt;/code&gt;) như trong if/for/switch
hay function, biến này không thoát ra ngoài block - hay có scope trong block đó.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Python&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;//Python&lt;/span&gt;
    &lt;span class="c1"&gt;//3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;điều này nghĩa là nếu khai báo 1 variable trong vòng &lt;code&gt;for&lt;/code&gt; hay trong
điều kiện &lt;code&gt;if&lt;/code&gt;, thì chúng không thoát ra ngoài khỏi các khối ấy, sẽ
không có hiện lượng &lt;strong&gt;leak&lt;/strong&gt; variable như trong Python for:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mi&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# Kết quả hiện ra 2, không hiện ra Mi&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{} is hoc sinh gioi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;Tính năng&lt;/em&gt; này dễ dẫn đến bug nếu ta chuyển code đi xung quanh, hay vô tình đặt tên giống nhau tại các nơi khác, trong cùng 1 function.&lt;/p&gt;
&lt;p&gt;Trong Go:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Mi&amp;quot;&lt;/span&gt;
&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// Output&lt;/span&gt;
&lt;span class="c1"&gt;// 3 Mi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;https://golang.org/ref/spec#Declarations_and_scope&lt;/p&gt;
&lt;h2&gt;Struct&lt;/h2&gt;
&lt;p&gt;struct là khác biệt lớn đầu tiên với người code Python không dùng class (mà dùng dict).
Do trong Go không thể tạo 1 map chứa các value khác kiểu, không
có đoạn code tương tự với code Python sau đây nếu chỉ dùng map:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;boy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pika&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="mi"&gt;20088888&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;boy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="mi"&gt;20089999&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Doraemon&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20088888&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="c1"&gt;# Pika&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy nên khi cần biểu diễn 1 object trong Go, cần tạo struct:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;Student&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
    &lt;span class="nx"&gt;age&lt;/span&gt;  &lt;span class="kt"&gt;int&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;boy&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pika&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;age&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;boy&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// {Pika 18}&lt;/span&gt;
&lt;span class="nx"&gt;students&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="nx"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="mi"&gt;20088888&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;boy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="mi"&gt;20089999&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Doraemon&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;age&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20088888&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// Pika&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và vì thế, map trong Go sẽ chỉ còn được dùng khi cần "ghép cặp" key-value, tối
ưu cho việc tìm kiếm theo key. BIG NOTE: Go không có kiểu set built-in.&lt;/p&gt;
&lt;p&gt;Để viết code Python "đúng" nhất theo Go, hãy tạo class mỗi khi cần 1 object,
việc này hợp lý trên lý thuyết, nhưng trong thực hành, khi nhận được 1 JSON
string rồi &lt;code&gt;json.loads&lt;/code&gt; lên, không mấy ai ngồi viết class cả.
Trong Go thì bắt  buộc phải ngồi viết struct cho JSON đó, hoặc dùng thư viện
cung cấp sẵn struct tương ứng giá trị JSON nói trên nếu dịch vụ có Go client
SDK.&lt;/p&gt;
&lt;h2&gt;Pointer&lt;/h2&gt;
&lt;p&gt;Now is the famous POINTER!&lt;/p&gt;
&lt;p&gt;pointer vốn làm rụng tóc hàng ngàn sinh viên đại học khi học C, pointer trong
Go không khác nhiều với pointer trong C, nhưng sẽ là thứ rất khác biệt với
người đến từ Python.&lt;/p&gt;
&lt;p&gt;Code trước, nói sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;96&lt;/span&gt;
&lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Value of p: %v - Type of p: %T\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// Value of p: 0xc000014110 - Type of p: *int&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0xff == 255: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0xff&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// 0xff == 255:  true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;p&lt;/code&gt; có kiểu &lt;code&gt;*int&lt;/code&gt;, và point to &lt;code&gt;x&lt;/code&gt; (trỏ tới &lt;code&gt;x&lt;/code&gt;), dấu &lt;code&gt;*&lt;/code&gt; ở đây là
ký hiệu của kiểu pointer, đứng trước kiểu mà nó trỏ tới.
&lt;code&gt;p&lt;/code&gt; là một pointer trỏ tới &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt; có kiểu &lt;code&gt;int&lt;/code&gt; nên &lt;code&gt;p&lt;/code&gt; có kiểu &lt;code&gt;*int&lt;/code&gt;.
Còn giá trị của &lt;code&gt;p&lt;/code&gt; là gì? &lt;code&gt;0xc000014110&lt;/code&gt; là cách viết hệ hexadecimal (hệ 16),
thường được dùng tới khi viết địa chỉ bộ nhớ máy tính.&lt;/p&gt;
&lt;p&gt;Trong Python cũng vậy, khi print 1 instance của class (object):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;print(object())&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0x7f2025653c80&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chú ý kết quả trên máy bạn sẽ khác, do mỗi lần chạy, Go sẽ cấp 1 memory address
khác nhau.&lt;/p&gt;
&lt;h3&gt;Địa chỉ bộ nhớ (memory address)&lt;/h3&gt;
&lt;p&gt;Còn có các tên gọi khác như memory location, address.&lt;/p&gt;
&lt;p&gt;Trong máy tính, bộ nhớ (RAM) lưu giữ các giá trị của chương trình
đang chạy, các thanh RAM có nhiều "ô", và mỗi ô được đánh số
(trên thực tế phưc tạp hơn khi phân thành 2 loại physical address/logical
 address nhưng không bàn tới ở đây).
Khi tạo ra 1 giá trị trong Go, giá trị đó được chứa trong 1 ô, sử dụng phép
toán &lt;a href="https://golang.org/ref/spec#Address_operators"&gt;&lt;code&gt;&amp;amp;&lt;/code&gt; (address operator)&lt;/a&gt; sẽ
lấy được địa chỉ này là một số int &amp;gt; 0 biểu diễn ở dạng hex.&lt;/p&gt;
&lt;h3&gt;Pointer là gì&lt;/h3&gt;
&lt;p&gt;Một pointer là một memory address - chỉ có vậy.
Nói &lt;code&gt;p&lt;/code&gt; là một pointer point đến &lt;code&gt;x&lt;/code&gt; là cách nói thuật ngữ của câu
&lt;code&gt;p&lt;/code&gt; là giá trị memory address của ô chứa &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Trong Go, một pointer luôn phải trỏ tới 1 giá trị x nào đó, ngoại trừ pointer mới declare sẽ có giá trị &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Nếu 1 tấm biển có ghi địa chỉ của 1 quán ăn, thì tấm biển chính là pointer tới quán ăn đó.&lt;/p&gt;
&lt;p&gt;Để lấy giá trị mà &lt;code&gt;p&lt;/code&gt; trỏ tới - tức là &lt;code&gt;x&lt;/code&gt;, dùng ký hiệu: &lt;code&gt;*p&lt;/code&gt;.
Tránh nhầm lẫn dấu &lt;code&gt;*&lt;/code&gt; ở đây với dấu &lt;code&gt;*&lt;/code&gt; trong kiểu của pointer. Dấu &lt;code&gt;*&lt;/code&gt; ở đây gọi là &lt;code&gt;pointer indirection&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;96&lt;/span&gt;
&lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Value of *p: %v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;99&lt;/span&gt;
&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Value of x: %v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;// Value of *p: 96&lt;/span&gt;
&lt;span class="c1"&gt;// Value of x: 99&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thay đổi &lt;code&gt;*p&lt;/code&gt; chính là thay đổi &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Pointer dùng để làm gì?&lt;/h3&gt;
&lt;p&gt;Vì pointer là memory address, tức một con số kiểu &lt;code&gt;int&lt;/code&gt;, nó rất nhỏ, nhẹ. Người
ta dùng nó vì muốn "nhẹ", muốn tiết kiệm bộ nhớ (RAM).
Pointer thường được dùng để pass argument cho function hay return kết quả từ
function.&lt;/p&gt;
&lt;h4&gt;Call by value là gì&lt;/h4&gt;
&lt;p&gt;Go function &lt;a href="https://golang.org/ref/spec#Calls"&gt;call by value&lt;/a&gt;, tức nếu gọi function với argument nào, thì function được gọi sẽ nhận được 1 bản &lt;strong&gt;copy&lt;/strong&gt; của argument đó. Khi function return, giá trị return này được &lt;strong&gt;copy&lt;/strong&gt; tới function gọi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;n&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;meo Meo&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;strings&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ToUpper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ví dụ trên, &lt;code&gt;main&lt;/code&gt; gọi &lt;code&gt;ToUpper&lt;/code&gt;, &lt;code&gt;ToUpper&lt;/code&gt; sẽ nhận được 1 bản copy của &lt;code&gt;n&lt;/code&gt;, khi &lt;code&gt;ToUpper&lt;/code&gt; xử lý xong, &lt;code&gt;main&lt;/code&gt; sẽ nhận được 1 bản copy của kết quả mà &lt;code&gt;ToUpper&lt;/code&gt; return.&lt;/p&gt;
&lt;p&gt;Copy không có vấn đề gì khi kích thước nhỏ, nhưng khi kích thước dữ liệu lớn, copy sẽ tốn RAM/CPU, vậy nên người ta dùng pointer để chia sẻ chung address, dùng chung 1 giá trị thay vì copy để tiết kiệm RAM.
Việc này thực hiện bằng cách gọi function với pointer argument và return kiểu pointer. Khi call function với pointer argument, pointer argument vẫn được copy, nhưng copy address chỉ là copy 1 số int nhỏ bé.&lt;/p&gt;
&lt;p&gt;Note: &lt;a href="https://pymi.vn/blog/call-by/"&gt;Python call by object reference&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Dẫn tới câu hỏi tiếp theo...&lt;/p&gt;
&lt;h3&gt;Bao nhiêu là lớn, khi nào thì dùng pointer?&lt;/h3&gt;
&lt;p&gt;Một giá trị kiểu &lt;code&gt;int&lt;/code&gt; với kích thước lớn nhất trong Go là &lt;code&gt;int64&lt;/code&gt; có kích thước 64 bits hay 64/8 == 8 bytes, đây được coi là nhỏ. Vậy bao nhiêu là lớn? 80 bytes? 800 bytes? 8 Kilobyte (8000B, 8KB) ...? quyết định sao là ở lập trình viên, &lt;a href="https://stackoverflow.com/questions/23542989/pointers-vs-values-in-parameters-and-return-values"&gt;và vì lập trình viên nhiều khi cũng không biết thế nào là lớn, nên hầu hết đều mặc định dùng pointer cho "tiết kiệm RAM"/nhẹ.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nếu tác giả của Go cũng nghĩ vậy, có lẽ họ mặc định function call by reference (dùng chung thông qua chia sẻ địa chỉ) thay vì call by value (copy giá trị) luôn cho khỏi phải nghĩ.&lt;/p&gt;
&lt;p&gt;Nhìn kỹ ra, lý do dùng pointer nói trên là 1 cách để "tối ưu" về bộ nhớ và tốc độ, nhưng việc này lại không tối ưu cho sự đơn giản, dễ hiểu của code - thứ luôn được đánh giá quan trọng hơn trong các chương trình thực tế.&lt;/p&gt;
&lt;p&gt;Không bao giờ bạn thấy function &lt;code&gt;sump&lt;/code&gt; nào trông thế này cả, kể cả nó
có vẻ như dùng ít tài nguyên hơn:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;sump&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;r&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;r&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;sump&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;// 3&lt;/span&gt;
&lt;span class="c1"&gt;// 3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu tới đây vẫn chưa hiểu pointer là gì, hãy thử vận may với bài viết của &lt;a href="https://dave.cheney.net/2017/04/26/understand-go-pointers-in-less-than-800-words-or-your-money-back"&gt;Dave Cheney&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Method&lt;/h2&gt;
&lt;p&gt;method của struct là một cú pháp rất sáng tạo và khác biệt với các ngôn ngữ phổ biến (C, Python)... nhưng nó chỉ là 1 cách viết đơn giản (syntactic sugar) để pass struct argument cho method. Ví dụ sau đây, method addAge và
function addAge là như nhau.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;User&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
    &lt;span class="nx"&gt;age&lt;/span&gt;  &lt;span class="kt"&gt;int&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;u&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;addAge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;n&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;age&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nx"&gt;n&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;addAge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;u&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;n&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;age&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nx"&gt;n&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;u&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pika&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;age&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addAge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nx"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pika&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;age&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;addAge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v == %v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;// Kết quả như nhau&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;struct&lt;/code&gt; argument được mặc định pass vào cho method gọi là &lt;code&gt;method receiver&lt;/code&gt;,
method receiver hầu hết đều là pointer, lý do xem lại phần pointer và link đính kèm.
&lt;code&gt;method receiver&lt;/code&gt; giống như &lt;code&gt;self&lt;/code&gt; argument trong method của Python class.&lt;/p&gt;
&lt;h2&gt;Interface&lt;/h2&gt;
&lt;p&gt;Một var kiểu &lt;code&gt;interface{}&lt;/code&gt; có thể chứa mọi giá trị, biến Go thành dynamic
typing giống như Python, nhưng đấy không phải lý do người ta tạo ra interface.&lt;/p&gt;
&lt;p&gt;Trích Go &lt;a href="https://golang.org/ref/spec#Interface_types"&gt;spec&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An interface type specifies a method set called its interface. A variable of interface type can store a value of any type with a method set that is any superset of the interface. Such a type is said to implement the interface. The value of an uninitialized variable of interface type is nil.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;InterfaceType&lt;/span&gt;      &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;interface&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nx"&gt;MethodSpec&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;InterfaceTypeName&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;}&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;MethodSpec&lt;/span&gt;         &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;MethodName&lt;/span&gt; &lt;span class="nx"&gt;Signature&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;MethodName&lt;/span&gt;         &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;identifier&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nx"&gt;InterfaceTypeName&lt;/span&gt;  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;TypeName&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;kiểu &lt;code&gt;interface&lt;/code&gt; dùng để định nghĩa 1 bộ các method. Thay vì cách dùng trong OOP phổ biến (Java, C#), một giá trị kiểu A là một giá trị kiểu A hoặc kế thừa kiểu A (inheritance), thì Go nói một giá trị kiểu A nếu nó có đủ các method trong interface A.
Nhờ tính năng này, Go có thể viết 1 function nhận vào 1 interface, và khi gọi, có thể nhận vào bất kỳ kiểu nào đã implement interface này. Đây gọi là &lt;code&gt;polymorphism&lt;/code&gt; - 1 trong &lt;a href="https://www.freecodecamp.org/news/four-pillars-of-object-oriented-programming/"&gt;4 đặc tính quan trọng của OOP&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Packages&lt;/h2&gt;
&lt;p&gt;Mỗi thư mục trong Go là 1 package riêng biệt, thư mục con là 1 package khác, không liên quan gì tới thư mục chứa nó.
&lt;a href="https://docs.google.com/document/d/1e8kOo3r51b2BWtTs_1uADIA5djfXhPT36s6eHVRIvaU/edit#!"&gt;Thư mục &lt;code&gt;internal/&lt;/code&gt; chỉ cho phép các thư mục chứa nó dùng, không cho phép các thư mục/project  khác dùng&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Concurrency&lt;/h2&gt;
&lt;p&gt;Concurrency &lt;strike&gt;trong Go&lt;/strike&gt; là một vấn đề phức tạp.
Mặc dù concurrency là một thế mạnh của Go so với các ngôn ngữ khác,
nó vẫn đầy những vấn đề khó khăn, dễ sai, và không hoàn hảo (goroutine leak).
thread &amp;amp; multiprocess &amp;amp; async trong Python, hay các ngôn ngữ khác, cũng không phải ngoại lệ.&lt;/p&gt;
&lt;h2&gt;Cost&lt;/h2&gt;
&lt;p&gt;Một triết lý trong thiết kế của Go là khiến lập trình viên nhìn thấy
"cost" của code mình viết.
Ví dụ trong Python viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="c1"&gt;# O(n)&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;  &lt;span class="c1"&gt;# O(1)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;chỉ thấy 1 chữ &lt;code&gt;in&lt;/code&gt; và không thấy &lt;strong&gt;rõ&lt;/strong&gt; là phải mất bao nhiêu phép tính, thì Go tối ưu thiết kế cho việc đó, dẫn tới việc muốn tìm 1 giá trị trong 1 slice/array, chỉ có cách là dùng 1 vòng for duyệt qua từng phần tử -&amp;gt; O(n).&lt;/p&gt;
&lt;h2&gt;Stdlib for DevOps&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Xử lý CLI argument: &lt;code&gt;flag&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Logging: &lt;code&gt;log&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Testing: &lt;code&gt;testing&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Xử lý file, thư mục, process: &lt;code&gt;io&lt;/code&gt;, &lt;code&gt;os&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;HTTP: &lt;code&gt;net/http&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;JSON: &lt;code&gt;encoding/json&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cộng đồng Go &lt;a href="https://go-proverbs.github.io/"&gt;ưa chuộng việc copy 1 chút thay vì cài thêm thư viện bên ngoài&lt;/a&gt;, ưu chuộng dùng bộ stdlib có sẵn.&lt;/p&gt;
&lt;h3&gt;Example&lt;/h3&gt;
&lt;p&gt;Script liệt kê các GitHub repositories của 1 GitHub user (NOTE: no pagination)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;Script lists GitHub repos of given username.&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;encoding/json&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;flag&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;log&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;net/http&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;os&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nx"&gt;urlFmt&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://api.github.com/users/%s/repos&amp;quot;&lt;/span&gt;

    &lt;span class="nx"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Parse&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="nx"&gt;username&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Arg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;username&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Usage: ./cli username\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nx"&gt;os&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nx"&gt;url&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Sprintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;urlFmt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;username&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nx"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatalf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Failed to get URL: %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nx"&gt;decoder&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;json&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;NewDecoder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Body&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;repos&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;Name&lt;/span&gt;    &lt;span class="kt"&gt;string&lt;/span&gt;
        &lt;span class="nx"&gt;HtmlUrl&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="s"&gt;`json:&amp;quot;html_url&amp;quot;`&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;decoder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatalf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Failed to decode JSON: %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;repos&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%3d %s %s\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;HtmlUrl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Go đơn giản, nhưng không dễ&lt;/h2&gt;
&lt;p&gt;Go đơn giản - đơn giản tức là ít khái niệm, ít cú pháp. Nhưng không dễ - dễ tức là không mất nhiều suy nghĩ, nhiều công sức làm một việc. Kiểm tra 1 phần tử trong slice, thêm 1 phần tử vào giữa array, ... các "bài toán nhỏ" mà Python chỉ mất 1 dòng code, thì trong Go là cả một vấn đề lớn mà người ta phải viết hẳn &lt;a href="https://github.com/golang/go/wiki/SliceTricks"&gt;wiki rồi chia sẻ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.arp242.net/go-easy.html"&gt;Go is simple, but not easy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Go có không it trap/gotchas dù ngôn ngữ có vẻ đơn giản:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://devs.cloudimmunity.com/gotchas-and-common-mistakes-in-go-golang/"&gt;50 Shades of Go: Traps, Gotchas, and Common Mistakes for New Golang Devs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rytisbiel.com/2021/03/06/darker-corners-of-go/"&gt;Darker Corners of Go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Like &amp;amp; Dislike&lt;/h2&gt;
&lt;p&gt;Vậy anh có thích Go hay không?&lt;/p&gt;
&lt;p&gt;Đó là 1 câu hỏi bẫy! ngày còn 20, tôi sẽ trả lời ngay là không hay có, nhưng giờ nhận ra, cuộc sống đâu phải là binary mà chỉ có 0 với 1. Khi ta thích thứ gì, ta có thể thích chỗ này không thích chỗ kia. Khẩu vị con người cũng thay đổi, thứ không thích hôm nay có khi mai lại "từ thích thích thành thương thương"... Ngôn ngữ lập trình cũng chỉ là công cụ, có gì mà phải yêu với ghét...&lt;/p&gt;
&lt;p&gt;&lt;a href="https://youtu.be/OWQMcEa6fr4"&gt;&lt;img alt="Amee" src="https://img.youtube.com/vi/OWQMcEa6fr4/0.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Like&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Compile thành binary + cross compiling: deploy trở thành câu chuyện rất đơn giản: copy file.&lt;/li&gt;
&lt;li&gt;Bộ stdlib đầy đủ: HTTP, JSON - hai công cụ quan trọng của DevOps.&lt;/li&gt;
&lt;li&gt;Được hỗ trợ rộng rãi bởi các nhà cung cấp dịch vụ: AWS, GCP... tất nhiên Python cũng được hỗ trợ nhiều, nhưng nếu bạn dùng 1 ngôn ngữ trẻ nào đó như... Elixir, &lt;a href="https://blog.darklang.com/new-backend-fsharp/"&gt;Rust hay già mà không rất phổ biến như Erlang, Ocaml thì đều không được hỗ trợ nhiều vậy&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Dislike&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Code dài dòng&lt;/li&gt;
&lt;li&gt;Không easy&lt;/li&gt;
&lt;li&gt;Quản lý package thay đổi liên tục từ 2014, giờ chắc đã ổn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Go là một ngôn ngữ đơn giản nhưng không dễ, ai cũng học được nhưng để có thể
dùng thoải mái sẽ cần một thời gian luyện tập cho quen sau khi đã dính lời
nguyền ngắn gọn, dễ dàng của Python. Go là một ngôn ngữ hiện đại, tốt, đáng bỏ
thời gian đầu tư làm quen để cho vào bộ công cụ của bạn... và vẫn yêu Python.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://golang.org/ref/spec"&gt;Go spec&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://go-proverbs.github.io/"&gt;go-proverbs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.darklang.com/new-backend-fsharp/"&gt;Ocaml to F#&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.darklang.com/new-backend-fsharp/"&gt;Dave Cheney on pointer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.arp242.net/go-easy.html"&gt;Go easy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/ardanlabs/gotraining"&gt;Ultimate Go - non-free course&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.infoq.com/presentations/Simple-Made-Easy/"&gt;Simple made easy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;
sau một lần nữa 6 tháng code Go và chắc lại còn lâu mới code nữa...&lt;/p&gt;</content><category term="Trang chủ"></category><category term="golang"></category><category term="go"></category></entry><entry><title>Mẹ ơi, con trượt rồi!</title><link href="http://pp.pymi.vn/article/dh/" rel="alternate"></link><published>2020-10-05T00:00:00+07:00</published><updated>2020-10-05T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-10-05:/article/dh/</id><summary type="html">&lt;p&gt;Trượt đại học, rồi sao? không học đại học, thì làm cái gì?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Tôi là một người may mắn, và tôi không phải nói câu này.
Nhưng giờ đã 12 năm sau cái ngày đó (2008), nhìn lại, thì đại học mang lại
cho tôi những gì?
Và nếu bạn trượt đại học, thì giờ làm gì đây?&lt;/p&gt;
&lt;h2&gt;Trượt đại học thì sao?&lt;/h2&gt;
&lt;p&gt;Thì buồn.&lt;/p&gt;
&lt;p&gt;Đấy là điều đầu tiên có thể cảm nhận được. Dù chưa trải qua, chỉ cần nhìn những
đứa bạn kém may mắn hơn chúng nó buồn, thậm chí còn xa lánh mình, sẽ hiểu
trượt đại học thì buồn.&lt;/p&gt;
&lt;h3&gt;Thế tại sao lại buồn?&lt;/h3&gt;
&lt;p&gt;Xã hội sinh ra một định kiến: học hết cấp 3 thì PHẢI thi đại học, và đỗ
đại học là giỏi, là vinh quang, còn trượt thì là ... không giỏi.
Bạn sẽ bị coi như 1 kẻ kém cỏi, hàng xóm, người quen, bạn bố mẹ sẽ hỏi thăm.
Và bởi vì nó đã là một định kiến xã hội, nên 1 2 con người thay đổi cũng
gặp rất nhiều khó khăn.
Cái sức ép xã hội khiến bạn phải buồn, khiến bạn nghĩ rằng mình kém cỏi, vậy nên
bạn buồn. Hay đơn giản buồn vì bố mẹ/người thân bạn buồn.
Ngoài ra, phải rời xa bạn bè vì chúng nó đều đi lên thành phố học hết, cũng buồn.&lt;/p&gt;
&lt;p&gt;Nhớ rằng "học tài, thi phận", bởi nếu như bạn được 25 điểm mà cái trường bạn
chọn năm nay nó tăng nhanh như chỉ số PM 2.5 ở thủ đô, lấy hản 27 thay vì 23
như năm trước, thì đâu phải do bạn kém?
Hay thằng hàng xóm được 15 điểm, đăng ký vào trường năm nay lấy 15, thì nó
lại đỗ. Hay con ông kia ôn trúng tủ, còn bạn thì lệch, nó đỗ là may hơn, chứ
đâu phải giỏi hơn.&lt;/p&gt;
&lt;p&gt;Năm 18 tuổi, tôi thi đại học vì 1 lý do đơn giản: vì đấy là điều
ai cũng làm sau khi học xong lớp 12. Trong cái đầu của 1 thằng học sinh miền núi
đi thi được cộng thêm 1.5 điểm, không hề từng nghĩ đến câu "tại sao lại phải học đại học",
hay "học đại học để làm gì?". Chuyện chọn trường cũng đơn giản chỉ là "thích nghịch
máy tính thì vào bách khoa" chứ chả hiểu bách khoa dạy cái gì để làm với máy tính.&lt;/p&gt;
&lt;p&gt;Thế nên bạn có thể buồn, nhưng nhớ nghĩ kỹ hơn chút, là tại sao mình phải buồn.&lt;/p&gt;
&lt;h2&gt;Học đại học để làm gì&lt;/h2&gt;
&lt;p&gt;Ngày ấy, hiểu đơn giản là cứ đi đại học thôi, đi đại học là thành công,
đi đại học để học đại học.
Học để ra trường, kiếm được 1 tấm &lt;strong&gt;bằng đại học&lt;/strong&gt;, rồi cầm về để mang đi xin
việc, làm ở cơ quan nào đó.&lt;/p&gt;
&lt;p&gt;Giờ ngẫm lại, xã hội muốn mình đi học đại học mục đích ra là để kiếm
cho mình được 1 công việc, nuôi bản thân, đóng góp cho xã hội.&lt;/p&gt;
&lt;p&gt;Cái bằng là thứ công cụ để xin việc của thời ngày xưa, là tấm vé giải độc đắc
để kiếm được 1 chỗ ngon trong cơ quan toàn là cán bộ.&lt;/p&gt;
&lt;p&gt;Còn giờ là năm thứ 20 của thế kỷ 21, tấm bằng trở nên bớt quan trọng hơn nhiều,
kể cả cầm 1 tấm bằng, đi xin việc thì vẫn phải THI (hay gọi nhẹ nhàng hơn là &lt;a href="http://pp.pymi.vn/article/phongvan/"&gt;"phỏng vấn"&lt;/a&gt;).
Ngoài ra, rất nhiều nơi / ngành nghề, không hề quan tâm đến bằng cấp, đặc biệt
là ngành công nghệ thông tin.&lt;/p&gt;
&lt;p&gt;Nếu anh giỏi, anh làm được, thì mang cái sản phẩm của mình ra mà khoe, còn
anh chả có gì khoe, thì đành thôi: mang khoe cái bằng.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Xin chào, đây là website tôi làm ra, giải quyết vấn đề này, sử dụng công nghệ
kia ... app di động 1 triệu lượt tải trên app store ...&lt;/li&gt;
&lt;li&gt;Xin chào, em không biết code web/app nhưng em có bằng khá Bách Khoa, em chưa
làm ra sản phẩm nào ngoài đoạn code tính tổng từ 1 đến 1000.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cái bằng, không phải là mục đích của việc học đại học. Học đại học là để có được
"kỹ năng"/"trình độ", cái bằng chỉ là "bằng chứng" do trường đại học đó đánh giá,
theo tiêu chuẩn của trường đó.
Vậy nên nếu không học đại học, ta sẽ không có "bằng chứng" do trường đại học đó
cung cấp, nhưng không hề liên quan đến chuyện "kỹ năng"/"trình độ", thứ mà
hoàn toàn có thể học ở chỗ khác.&lt;/p&gt;
&lt;h2&gt;Học đại học được gì&lt;/h2&gt;
&lt;p&gt;Nếu coi trường học như một cỗ máy, thì đầu vào là các sinh viên khá "thông minh"
do điểm thi đầu vào trên mức N, còn đầu ra sẽ các kỹ sữ biết làm việc mà họ
được đào tạo.  Lý thuyết là vậy, còn thực tế thì khác hoàn toàn lý thuyết.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Khuôn mặt một sinh viên mùa ôn thi" src="http://pp.pymi.vn/images/ray-hennessy-2NwntN4J2Gw-unsplash.jpg"&gt;
&lt;span&gt;Khuôn mặt một sinh viên mùa ôn thi - Photo by &lt;a href="https://unsplash.com/@rayhennessy?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Ray Hennessy&lt;/a&gt; on &lt;a href="https://unsplash.com/t/nature?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhìn lại, 5 năm đại học tôi có được:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Được lên thủ đô sống, làm quen với "văn minh xã hội". Lần đầu xuống nhập học
được học ngay bài học ăn phở không hỏi giá, bị chém đẹp 50k (thời 2008).&lt;/li&gt;
&lt;li&gt;Những người bạn. Vui vẻ cùng nhau đến lớp ngủ, cùng nhau vượt qua các kỳ thi
lại, cùng nhau uống rượu, cùng nhau đi chơi...
Thứ tình bạn trong sáng (như hồi cấp 3), những người anh em chia ngọt sẻ bùi,
điều mà sau này đi làm rồi, hay có gia đình riêng rồi, sẽ rất khó mà kiếm được.&lt;/li&gt;
&lt;li&gt;Quãng thời gian sinh viên, học hành thì ít mà chơi thì nhiều, những va vấp
nhẹ nhàng với xã hội khi lần đầu rời xa gia định đến 1 nơi xa lạ.&lt;/li&gt;
&lt;li&gt;Một ngôi trường có cháo lòng, cháo sườn, bánh mì, rượu ốc ngon.&lt;/li&gt;
&lt;li&gt;Những hoạt động thanh niên cấp tiến như sinh viên tình nguyện, tiếp sức mùa
thi, chiếc khăn gió ấm, mùa đông không lạnh...&lt;/li&gt;
&lt;li&gt;Khả năng tự học: cái này là kỹ năng tự luyện được, lôi sách lôi vở ra mà
đọc mà luyện đề thi còn qua môn, chứ làm gì có ai dạy cho.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Còn kiến thức? không nhiều lắm. Những kiến thức ngày nay đi làm, đều do tôi
tự mày mò, nhờ sự ham mê máy tính từ ngày còn nhỏ.
Blog &lt;a href="https://www.familug.org/"&gt;FAMILUG&lt;/a&gt; viết từ năm thứ 2 đại học là bằng chứng
ấy. Tôi code Python khi ở Việt Nam chẳng mấy ai biết tên, tôi dùng Ubuntu
khi mọi người còn không biết nó tồn tại.&lt;/p&gt;
&lt;p&gt;Nói vậy không có nghĩa là 5 năm trường không dạy gì. Trường có dạy,
vấn đề là bạn có học hay không? và học có giỏi hay không? Một phần nhỏ sinh viên
thuộc nhóm có học, và học giỏi, ra sẽ học lên cao, xin học bổng nước ngoài,
được giữ làm giảng viên, hay xin được công việc phù hợp. Nhưng nhớ là số này
rất ít, một khóa học 100 sinh
viên thì có 1, 2, 3, 4 thằng, chứ không phải là 20 thằng. Với nhóm này, học đại học
còn có thêm cái lợi: quan hệ tốt với thầy cô, nhiều cơ hội xin học bổng du học
lên cao, làm đề tài nghiên cứu khoa học cùng thầy cô ...
Đây là cái đầu ra mong ước, chuẩn của các trường. Số còn lại, chiếm tới hơn 90%,
mới là phần đáng nói của câu chuyện.&lt;/p&gt;
&lt;p&gt;Bằng giỏi Bách Khoa thời ấy, hiếm như khẩu trang đầu mùa COVID-19, sinh viên
ra trường đúng hạn thì ít, bằng khá đã là học hành tử tế lắm rồi. Bằng khá Bách
Khoa nó không nhiều nhan nhản như bằng giỏi bên kinh tế nha. Số này cỡ
2 chục người trong 1 khóa 100 người, cũng bằng số sinh viên ra trường trước hạn,
bỏ học/đuổi học/quên đăng ký môn học... rồi bị đuổi.&lt;/p&gt;
&lt;p&gt;Cái nhóm 60 sinh viên bằng "trung bình", ra trường không đúng hạn ấy, học được gì
ở trường? Năm 2008-2013+, khoa/viện toán ứng dụng và tin học Bách Khoa Hà Nội dạy:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2 năm học đại cương: toán, lý, hóa, nhiệt, điện, cơ học kỹ thuật, vẽ kỹ
thuật, điện tử, triết học Mac Lê Nin, tư tưởng Hồ Chí Minh, ... các môn học
được coi là nền tảng phải có của mọi kỹ sư. Và để thêm chắc, các môn toán lý hóa
có tới 5 7 môn khác nhau, lý 1 2 3 nữa cho nó chắc. Đây là thời kỳ học chán nản
nhất cho các sinh viên, trượt/thi lại triền miên, bởi đây toàn những môn lý thuyết
khó nhai. Có những môn học lại 10 kỳ, cho đến khi qua được thì cũng là lúc ra trường.
Gọi là học, chứ thi xong là coi như trả hết chữ thầy, kiến thức cũng chẳng dùng
đến bao giờ, như cách tra biểu đồ nhiệt chẳng hạn. Ở đâu đó, ai đó làm một
nghề nào đó, có thể đang dùng, thậm chí là quan trọng. Sinh viên ra trường đi
làm có người dùng tới có người không, nên nhớ đây là chương trình để đào tạo
hàng loạt người, nên đứng dưới góc độ nhà trường, bạn thà dạy thừa còn hơn thiếu.&lt;/li&gt;
&lt;li&gt;3 năm học chuyên ngành: Toán-Tin. Hầu hết sinh viên khóa này học toán-tin đơn
giản là vì trượt nguyện vọng 1, rơi tự do xuống mà vào toán tin. Bách Khoa thời
ấy, học 1 năm đại cương, lấy điểm 2 kỳ đầu để xét phân khoa. Đây cũng là thời mà hận những thằng giỏi học đại cương, chúng nó nộp vào CNTT
ầm ầm, chỉ đơn giản là vì ngành hot, ra dễ kiếm việc lương cao - chứ thậm chí
chưa chạm tay vào máy tính 1 lần.
Khoa nào nhiều người vào thì hot, điểm cao, khoa nào không ai đăng ký... thì
rơi tự do.
Không nhiều sinh viên vào Toán-Tin để học toán, chắc cũng là một phần lý do
mà kết quả học tập cũng không mấy đẹp đẽ gì. Hơn nửa chương trình chuyên ngành
3 năm này là toán, một chút ít "tin" cho có gọi là. Sinh viên muốn làm được
đồ án tin để ra trường, phải tự kiếm chỗ mà học lập trình cho tử tế (tự học mà
giỏi được thì tốt, ai cũng làm được thì người ta không phải mở trường,
dựng trung tâm). Đừng hy vọng sẽ được học lập trình, ra thành 1 lập trình viên
chuyên nghiệp từ
đây. Với những sinh viên muốn theo ngành "tin học", thì phần toán kia rất khó
nuốt, khô khan, chẳng có chỗ dùng, không có hứng học, thi khó qua, điểm sẽ thấp.
Chương trình học lạc hậu, đặc biệt với các môn tin, khi mà công nghệ thay đổi
hàng năm còn toán thì trăm năm mới đổi. Đây là tên vài môn toán kinh (khủng)
điển: giải tích hàm, phương trình đạo hàm riêng,
giải tích số, giải tích phức, toán kinh tế, các phương pháp tối ưu, hệ mờ ?!?
Chất lượng giảng dạy thì rất phụ thuộc vào giảng viên, một số môn có thầy cô
dạy hay, phong cách hay, lôi cuốn sinh viên học dù môn học không có nhiều tính
ứng dụng thấy ngay, có môn thầy đến lớp hì hục chép đầy 6 cái bảng 9 lần rồi về,
sinh viên ra vào thậm chí không biết...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đấy là thời đó, cũng gần 10 năm rồi, thời ấy học mạng neuron và hệ mờ trên giấy,
chỉ biết lấy công thức ra tính, chả ai biết để làm gì,
chưa ai nghe tới Machine Learning hay Deep Learning.
Còn giờ thì &lt;a href="https://vnexpress.net/dai-hoc-bach-khoa-ha-noi-lay-diem-chuan-cao-nhat-la-29-04-4171374.html"&gt;Toán Tin đầu vào hẳn 27.56&lt;/a&gt;, xin được mừng cho viện nhà.&lt;/p&gt;
&lt;p&gt;Xem &lt;a href="http://sami.hust.edu.vn/co-van-hoc-tap/ke-hoach-hoc-tap-chuan/"&gt;chương trình đào tạo mới tại đây&lt;/a&gt;
thấy đã bớt được nhiều môn học &lt;strong&gt;nền tảng&lt;/strong&gt;, &lt;strong&gt;quan trọng&lt;/strong&gt; như hóa hay nhiệt
đi rồi, mừng cho các tài năng đất nước.&lt;/p&gt;
&lt;p&gt;Nói vậy, không nghĩa là không nên học đại học. Đỗ rồi thì đi học thôi,
nhưng nên thử để biết mình thích gì/hợp làm gì, mà tìm học thêm, chứ đừng
thụ động ngồi chờ trường dạy cho.&lt;/p&gt;
&lt;h2&gt;Trượt đại học thì làm gì&lt;/h2&gt;
&lt;p&gt;Trượt đại học thì đi học cái khác, hoặc đi làm. Học đại học là con đường có vẻ
như "dễ"/"sáng" nhất để dẫn đến "thành công"/"thành tài", nhưng không phải con
đường duy nhất. Cũng chẳng có gì đảm bảo, hàng năm &lt;a href="https://vnexpress.net/topic/thac-si-that-nghiep-17483"&gt;sinh viên đại học, thậm chí
cao học, ra trường vẫn thất nghiệp ầm ầm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nếu muốn, nghỉ ngơi 1 thời gian rồi 3 tháng sau bắt đầu ôn thi để sang năm...
chơi lại trò chơi may rủi.&lt;/p&gt;
&lt;p&gt;Học đại học thời nay là một khoản đầu tư không nhỏ, học phí các trường công
giờ cũng cao chót vót, mỗi kỳ học đóng học phí bằng 1/2 -&amp;gt; 1 con iPhone mới
nhất vừa ra. Học 10 kỳ là 10 con (~tối thiểu 60 triệu cho 5 năm học), chưa kể
thi lại, chưa tính chi phí ăn ở 4-5 năm.
Nên nếu chỗ nào học phí 50 triệu, trong vòng 2 năm, hay &lt;a href="https://pymi.vn/"&gt;5 triệu trong vòng 2
tháng&lt;/a&gt;
mà cho bạn cơ hội kiếm việc làm lương 8-10 triệu/tháng thì đừng xem là đắt,
đi làm vài tháng là hồi vốn.
Ngoài ra, nếu tôi học nửa năm rồi đi làm, sau 5 năm tôi có 4.5 năm kinh nghiệm,
lương thừa X3 mấy cậu sinh viên mới rón rén ra trường.&lt;/p&gt;
&lt;p&gt;Điều quan trọng là tìm ra thứ khiến mình thích thú, đam mê. Nếu có rồi, cứ thế
mà học theo, nếu chưa biết, đỗ đại học, đi học 5 năm chăm chỉ ra rồi nhận ra mình không
thích mới đổi, lúc ấy mới là muộn, đó mới là thất bại đáng lo.&lt;/p&gt;
&lt;p&gt;Những thứ quan trọng cần đầu tư:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ngoại ngữ: phổ biến, dễ học nhất là tiếng Anh. Dù học đại học hay không, đây
vẫn là thứ quan trọng nhất. Nó mở ra cả 1 chân trời cơ hội, hàng triệu tài
liệu hướng dẫn miễn phí bằng tiếng Anh trên internet, dù học bất cứ thứ gì,
điều kiện làm các công việc lương cao, công ty nước ngoài.&lt;/li&gt;
&lt;li&gt;Rèn luyện sức khỏe: tập gì cũng được, có sức khỏe, có cơ thể đẹp
là một lợi thế cả đời, cực lớn, thậm chí giúp kiếm được nhiều công việc lương
cực cao, ngàn đô 1 ngày!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nếu muốn học ngành Công Nghệ Thông Tin, học xong đi kiếm việc làm lương khởi điểm
8-10 triệu, ghé ngay &lt;a href="https://pymi.vn"&gt;PyMi.vn&lt;/a&gt; để đăng ký học lập trình Python
tại Hà Nội - Sài Gòn (TP HCM).&lt;/p&gt;
&lt;h3&gt;Học có 1.5 tháng mà đi làm được?&lt;/h3&gt;
&lt;p&gt;Tất nhiên là phải học, phải đầu tư thời gian, chăm chỉ luyện bài, thì học ra mới
dễ xin được việc, mỗi tuần dành ~ 20 tiếng để cày cuốc bài tập.
Chứ đừng nghĩ tới lớp xem giảng bài, về nhà bận đi chơi, rồi
ra thì có người mời đi làm, sorry babe, ở đây không bán rượu mơ.&lt;/p&gt;
&lt;p&gt;PyMi không chỉ dạy Python, mà sử dụng các công cụ / practice của lập trình viên
trong suốt quá trình học (vd: Git/GitLab/CI/Code Review).&lt;/p&gt;
&lt;h3&gt;Lương chỉ có 8-10 triệu?&lt;/h3&gt;
&lt;p&gt;Đây là mức lương khởi điểm cho vị trí lập trình viên Python (thường là lập
trình web-backend). Mức lương này ngang ngửa với sinh viên đại học mới ra trường.
Còn muốn học 2 tháng ra làm lương ngàn đô, có lẽ qua bên các kênh đầu tư tài
chính thì nhiều cơ hội hơn.&lt;/p&gt;
&lt;p&gt;Sau khi đi làm 1 2 năm có thể tăng lên 15 triệu, hay $1000, và cứ thế tăng tiếp...
PS: muốn &amp;gt; $1000, phải có ngoại ngữ tốt.&lt;/p&gt;
&lt;h3&gt;Tài liệu trên mạng đầy, lên youtube xem rồi tự học&lt;/h3&gt;
&lt;p&gt;Tự học là một kỹ năng không phải ai cũng có.
Kỹ năng tự học phải luyện nhiều, mới có. Cũng chẳng phải đến đại học thì mới biết
tự học. Cứ tự học nhiều (như 5 năm ở Bách Khoa) thì khác dần biết cách thôi.
Nếu tự học mà hiệu quả được, đó là điều rất đáng mừng, bạn cũng không cần
phải đi đại học làm gì cho mất thời gian.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Lên youtube xem/đọc tài liệu không hiểu thì lấy ai để hỏi?&lt;/li&gt;
&lt;li&gt;Tài liệu chất lượng kém, đặc biệt các tài liệu tiếng Việt dùng Google
Translate rồi paste vào. Tài liệu viết bởi những người không có trình độ, liệu
bạn có phân biệt được?&lt;/li&gt;
&lt;li&gt;Lên các diễn đàn/FaceBook group để hỏi rồi ngồi chờ hy vọng có ai đó tốt giúp
trả lời, mà trả lời đúng hay sai cũng không chắc nữa.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nếu lý do ngồi chờ cộng đồng trả lời sau vài ngày rồi mới học tiếp
là để "tiết kiệm tiền", thì chỉ chứng minh 1 điều là thời gian của bạn
quá rẻ.&lt;/p&gt;
&lt;p&gt;Tự học ngoài ra còn gặp một số vẫn đề như: "đâm đầu vào tường" nhiều, do không
ai chỉ cho đâu là đúng sai, phải tự tìm ra, vậy nên mất thời gian hơn. Đi học,
không hỏi thầy thì còn hỏi bạn, nhanh hơn rất nhiều.
Ngoài ra bạn còn không biết mình không biết những gì.&lt;/p&gt;
&lt;p&gt;Một khi đã tự học rồi, thì lo tập trung vào việc học, làm bài tập,
tránh mất thời gian ít bổ ích trên các group online.&lt;/p&gt;
&lt;h3&gt;Các khóa học tiếng Anh trên mạng rẻ bèo, như Udemy&lt;/h3&gt;
&lt;p&gt;Nếu xem được mà hiểu thì trình độ tiếng Anh của bạn cũng thuộc top trên của
người Việt Nam đó, chúc mừng nha. Như đã viết ở trên, nếu đã có tiếng Anh,
thì toàn bộ phần còn lại chỉ là game dễ.&lt;/p&gt;
&lt;p&gt;Các khóa học cũng có loại this, loại that. Học code mà chỉ xem video, không thò
tay vào code, không có bài tập, không có sửa bài, thì chỉ là xem video.&lt;/p&gt;
&lt;p&gt;Code là kỹ năng, muốn giỏi phải luyện tập nhiều.
Làm ra phải được chấm (review), để biết là tốt hay xấu, đúng hay sai.&lt;/p&gt;
&lt;h3&gt;Học đại học 5 năm ra còn chẳng ăn ai, đòi học vài tháng&lt;/h3&gt;
&lt;p&gt;Bạn đã thấy có thằng học như điên 3 năm, học đủ cả sinh sử địa, giáo dục công
dân nữa để "rèn luyện tư duy" mà trượt đại học khối A, còn có thằng đi ôn lò
vài tháng, trúng tủ đỗ luôn chưa?&lt;/p&gt;
&lt;p&gt;5 năm đại học không phải là học cả 5 năm, thời gian chơi có khi hết 4 năm rưỡi.
10 thằng học giỏi có đến 90 thằng loại bình thường.&lt;/p&gt;
&lt;p&gt;Xem lại chương trình đại học Bách Khoa ở trên để thấy nếu muốn làm lập trình
viên (nghề ghi đầu tiên trong bảng quảng cáo học Toán Tin), thì chỉ có vài môn
học cuối khóa có chút liên quan, mà muốn ra đi làm được vẫn phải học thêm rất
nhiều.&lt;/p&gt;
&lt;p&gt;Học lâu mà sai không có ý nghĩa gì so với học đúng mà nhanh.&lt;/p&gt;
&lt;p&gt;Kiến thức ở các trường đại học Việt Nam đều rất chậm thay đổi, trong khi công
nghệ thay đổi hàng năm. 5 năm học, dùng C/Pascal vài ba project nhỏ ở trường
sẽ khống kiếm cho bạn 1 công việc dev Python.&lt;/p&gt;
&lt;p&gt;Giờ không biết đã trường nào dạy dùng git chưa, hay vẫn Turbo C màn hình xanh
menu đỏ rồi tự hào công nghệ?&lt;/p&gt;
&lt;h3&gt;Học vậy không có "kiến thức cơ bản"/"kiến thức nền tảng"&lt;/h3&gt;
&lt;p&gt;"Kiến thức cơ bản" cụ thể là cái gì? hiểu cách các vi mạch điện hoạt động
rồi chạy code như thế nào? (học đại học ở Việt Nam cũng không giúp bạn hiểu cái
này), hay hiểu cách đổi 8 bit thành 1 byte?&lt;/p&gt;
&lt;p&gt;Hay kiến thức cơ bản là môn "cấu trúc dữ liệu giải thuật/toán rời rạc"
học trên giấy trong 1 kỳ mà cứ ngỡ như không đi đại học thì không được học/
không học được? Có bao nhiêu kiến thức cơ bản ấy ở lại trong sinh viên sau
5 năm ra trường, học môn ấy từ năm thứ 2.&lt;/p&gt;
&lt;p&gt;Có 2 cách tiếp cần vấn đề, từ dưới lên, hoặc từ trên xuống. Các trường đại học
dạy theo kiểu từ dưới lên, đến lúc lên đến trên thì sinh viên đã quên hết cái
bên dưới.&lt;/p&gt;
&lt;p&gt;Các trung tâm thì sẽ dạy từ trên xuống, học cái làm được luôn, có gì không hiểu
thì đào sâu, tìm hiểu thêm.&lt;/p&gt;
&lt;p&gt;Đừng nghĩ biết code mấy cái thuật toán sắp xếp học ở trường mà hơn người ta
gõ &lt;code&gt;list.sort()&lt;/code&gt;, cái bạn học ở trường, lúc đi ra làm, đâu có dùng?
Bạn có biết &lt;code&gt;list.sort()&lt;/code&gt; của Python dùng thuật toán gì không?&lt;/p&gt;
&lt;p&gt;Nếu bạn thuộc "on the top của hành tinh này", thiết kế thuật toán sắp xếp phù
hợp với bài toán cụ thể, rõ ràng bạn không phải đối tượng của bài viết này.&lt;/p&gt;
&lt;h3&gt;Sao bài này toàn ví dụ viện Toán Tin - Bách Khoa Hà Nội&lt;/h3&gt;
&lt;p&gt;Vì tác giả đã học ở đó. Bạn học khoa khác, cậu chuyện có thể khác.&lt;/p&gt;
&lt;h3&gt;Học xong có làm được cái này, cái kia không?&lt;/h3&gt;
&lt;p&gt;Vui lòng &lt;strong&gt;đọc kỹ&lt;/strong&gt; trang chủ &lt;a href="https://pymi.vn"&gt;Pymi&lt;/a&gt; và CV mẫu của học viên
(cũng có link trên trang chủ).&lt;/p&gt;
&lt;p&gt;Nói tóm lại, người muốn, sẽ tìm cách, còn không muốn, sẽ tìm lý do.&lt;/p&gt;
&lt;h2&gt;Hành động của chúng ta (Action Item)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tự hỏi xem học đại học để làm gì?&lt;/li&gt;
&lt;li&gt;Ngừng huyễn hoặc bản về sự cao siêu của đại học, hay "chỉ học đại học mới được học".&lt;/li&gt;
&lt;li&gt;Hồi tưởng xem học đại học đã học được gì có ích? và viết 1 bài.&lt;/li&gt;
&lt;li&gt;Tìm cái bằng đại học xem nó ở góc nào.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;quot;Don&amp;#39;t let schooling interfere with your education.&amp;quot; - Mark Twain
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trượt đại học nó không khủng khiếp như trượt vỏ chuối. Có đau vì sức ép xã hội,
chứ không lo đập đầu xuống đất mà mất trí.&lt;/p&gt;
&lt;p&gt;Đứng dậy, cầm laptop lên và đi học Python tại &lt;a href="https://pymi.vn"&gt;PyMi.vn&lt;/a&gt; đi nhé.&lt;/p&gt;
&lt;h2&gt;Đọc thêm&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://pp.pymi.vn/article/phongvan/"&gt;"phỏng vấn"&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pymi.vn"&gt;Trang chủ PyMi.vn&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="life"></category></entry><entry><title>Vừa đủ để đi (go)</title><link href="http://pp.pymi.vn/article/go/" rel="alternate"></link><published>2020-09-06T00:00:00+07:00</published><updated>2020-09-06T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-09-06:/article/go/</id><summary type="html">&lt;p&gt;Học vừa đủ Golang để nguy hiểm - phần 1&lt;/p&gt;</summary><content type="html">&lt;p&gt;Series bài viết giúp lập trình viên đã biết Python bắt đầu code Go mượt mà hơn - tài liệu bổ trợ cho &lt;a href="https://tour.golang.org/"&gt;Go tour&lt;/a&gt; chứ không để thay thế - phần 1.&lt;/p&gt;
&lt;p&gt;Đã có phần 2 &lt;a href="http://pp.pymi.vn/article/go12/"&gt;&lt;strong&gt;Cứ đi là đến&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Golang là gì&lt;/h2&gt;
&lt;p&gt;&lt;img alt="gopher" src="https://golang.org/lib/godoc/images/home-gopher.png"&gt;&lt;/p&gt;
&lt;p&gt;Go (hay còn gọi là Golang theo tên trang chủ &lt;a href="https://golang.org"&gt;golang.org&lt;/a&gt;) là một ngôn ngữ lập
trình mới xuất hiện trong công chúng vào năm 2009 (vs: Python 1991, Java 1995),
tại Google.&lt;/p&gt;
&lt;p&gt;Go được thiết kế ra với mục tiêu thay thế cho C++, nhưng khi tung ra cộng
đồng, nó lại trở thành ngôn ngữ hấp dẫn đối với các lập trình viên dùng
ngôn ngữ bậc cao hơn như &lt;a href="http://www.catb.org/~esr/reposurgeon/GoNotes.html"&gt;Python&lt;/a&gt;,
&lt;a href="https://blog.iron.io/how-we-went-from-30-servers-to-2-go/"&gt;Ruby&lt;/a&gt;, PHP, NodeJS... nhờ khả năng chạy code
nhanh, dùng ít tài nguyên hơn, deploy dễ hơn so với các ngôn ngữ này.&lt;/p&gt;
&lt;p&gt;Go trở thành một trào lưu (trend) công nghệ trên internet, với các bài viết
"Write X in Go" luôn trở thành bài hot (và giờ thì tới Rust).
Go được sử dụng như một ngôn ngữ "backend", rất thịnh hành tại các startup
công nghệ để viết "service" trong các hệ thống "microservice", web API.
&lt;a href="https://blog.golang.org/survey2019-results"&gt;Go còn được dùng phổ biến để viết các câu lệnh command line&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Go đã ở giai đoạn "production ready", đủ ổn định và đã được chạy trên các &lt;a href="https://github.com/golang/go/wiki/GoUsers"&gt;hệ thống
lớn trên toàn cầu&lt;/a&gt;.
Các sản phẩm opensource viết bằng Go được dùng rộng rãi như:
Kubernetes, Docker, Terraform, InfluxDB, Prometheus, Grafana, ...
Go trở thành ngôn ngữ được ưa chuộng và phổ biến trên các dịch vụ cloud,
devops.&lt;/p&gt;
&lt;p&gt;Những lĩnh vực khác cũng đã có mặt Go nhưng chưa thực sự thành công: mobile,
frontend (JavaScript), làm website (như Django/RubyOnRails), Machine Learning.&lt;/p&gt;
&lt;h2&gt;Những ưu điểm nổi bật của Go&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ngôn ngữ đơn giản: Go có ít khái niệm hơn các ngôn ngữ lập trình khác
C++/Java/Python/Ruby... Go tại năm 2020 có &lt;a href="https://golang.org/ref/spec#Keywords"&gt;25
keywords&lt;/a&gt;, &lt;a href="https://docs.python.org/3.8/reference/lexical_analysis.html#keywords"&gt;Python 3.8 có 35
keywords&lt;/a&gt;.
Hầu hết các công ty tuyển lập trình viên Go đều không yêu cầu kinh nghiệm code
Go,
 chỉ cần tuyển 1 lập trình viên đã dùng ngôn ngữ khác, qua training 1-2 tuần
 là đã có thể viết code production, trông không khác gì lập trình viên lâu năm.&lt;/li&gt;
&lt;li&gt;Code Go viết bằng chính Go, ai cũng có thể đọc &lt;a href="https://github.com/golang/go/blob/master/src/runtime/map.go"&gt;kiểu dữ liệu map được viết thế nào&lt;/a&gt; - so với Python (CPython) sẽ phải đọc code C.&lt;/li&gt;
&lt;li&gt;Hệ thống thư viện có sẵn (stardard library) đa dạng, đầy đủ - ngang ngửa Python, thậm chí còn hơn: gửi HTTP request chỉ cần dùng &lt;code&gt;net/http&lt;/code&gt;, không phải &lt;a href="http://pp.pymi.vn/article/requests/"&gt;cài requests như Python (mặc dù Python có thể dùng urllib nhưng không mấy ai dùng)&lt;/a&gt;, đầy đủ &lt;code&gt;json&lt;/code&gt;, &lt;code&gt;regexp&lt;/code&gt;, cho tới HTTP server sẵn sàng chạy production.&lt;/li&gt;
&lt;li&gt;Compile nhanh: so với các ngôn ngữ C/C++/Java/C#... thì Go compile nhanh gấp
nhiều lần&lt;/li&gt;
&lt;li&gt;Sản phẩm compile tạo ra là 1 file binary. Sau đó
 chỉ cần mang file này đi chạy là xong - điểm này khác biệt lớn so với Python,
 NodeJS, Ruby - phải cài các "dependency" (pip/npm/gem) rồi mới chạy được code (Go cũng cần
 tải các dependency, nhưng chỉ cần thực hiện trước khi compile ra file binary).&lt;/li&gt;
&lt;li&gt;Code chạy nhanh: Go tuy không nhanh bằng C/C++/C#/Java trong hầu hết các
  trường hợp, chậm hơn cỡ 2-5 lần, nhưng nhanh hơn Python/Ruby cỡ &lt;a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/which-programs-are-fastest.html"&gt;20-100 lần&lt;/a&gt;,&lt;/li&gt;
&lt;li&gt;Tốn ít memory - bộ nhớ: ít hơn &lt;a href="https://blog.iron.io/how-we-went-from-30-servers-to-2-go/"&gt;Ruby cỡ 15 lần&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Quản lý bộ nhớ tự động (tương tự Python/Ruby/Java...)&lt;/li&gt;
&lt;li&gt;Dễ viết code concurrency, dùng multi-core (thay vì dùng thread/async).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Những khác biệt chủ yếu với Python&lt;/h2&gt;
&lt;h3&gt;Cách viết và chạy code&lt;/h3&gt;
&lt;p&gt;Go là compiled language, trước khi chạy được code phải qua 1 bước compile để
tạo ra file binary, rồi sau đó mới chạy được file này.
&lt;a href="http://pp.pymi.vn/article/repl/"&gt;Go không có sẵn REPL, không bật lên gõ code trực tiếp như Python được&lt;/a&gt;.
Mỗi lần sửa gì, thử gì, phải compile lại rồi mới chạy được.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;go build
./filename
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy nên cách nhanh nhất để thử 1 đoạn code trong Go có lẽ là viết unittest.
&lt;a href="https://golang.org/doc/code.html#Testing"&gt;test rất phổ biến với một Go project&lt;/a&gt;,
là một phần có sẵn trong bộ công cụ dev.&lt;/p&gt;
&lt;p&gt;Với 1 file code đơn giản, có thể dùng lệnh &lt;code&gt;go run main.go&lt;/code&gt; để làm gộp 2 bước,
compile rồi chạy file kết quả luôn.&lt;/p&gt;
&lt;h3&gt;Auto format - go fmt&lt;/h3&gt;
&lt;p&gt;Go là ngôn ngữ lập trình đầu tiên đưa 1 công cụ format code tự động vào tiêu chuẩn,
chấm dứt mọi tranh cãi về code-style/format code. Ý tưởng tuyệt vời này sau được
copy sang nhiều ngôn ngữ khác (như &lt;a href="http://pp.pymi.vn/article/black/"&gt;Python black&lt;/a&gt;)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;go fmt
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Chú ý&lt;/h4&gt;
&lt;p&gt;Không xuống dòng tùy tiện trong &lt;code&gt;()&lt;/code&gt; như Python (Vd: khi gọi function). Ví dụ
sau sẽ &lt;a href="https://play.golang.org/p/dluh98DPVIR"&gt;không compile&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Go &lt;a href="https://golang.org/ref/spec#Semicolons"&gt;tự động thêm &lt;code&gt;;&lt;/code&gt; vào các dòng
khi nó xử lý file code&lt;/a&gt;. Tốt nhất là
viết hết trên 1 dòng rồi để gofmt lo chuyện format.&lt;/p&gt;
&lt;h3&gt;Static typing&lt;/h3&gt;
&lt;p&gt;Python là ngôn ngữ dynamic typing, Go là static typing.
Nếu chưa từng code ngôn ngữ static typing hay chưa dùng type annotation của Python,
khác biệt này sẽ gây chút khó khăn lúc bắt đầu code Go.&lt;/p&gt;
&lt;p&gt;Theo &lt;a href="https://wiki.python.org/moin/Why%20is%20Python%20a%20dynamic%20language%20and%20also%20a%20strongly%20typed%20language"&gt;python wiki&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a statically typed language, the type of variables must be known (and
usually declared) at the point at which it is used. Attempting to use
it will be an error. In a dynamically typed language, objects still have a
type, but it is determined at runtime. You are free to bind names (variables)
to different objects with a different type. So long as you only perform
operations valid for the type the interpreter doesn't care what type they
actually are.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Static/dynamic typing nói tới kiểu (type) của 1 biến (variable/name).
Trong dynamic typing, kiểu của 1 biến có thể thay đổi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PyMi&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong static typing, kiểu của 1 biến là cố định, và được khai báo ngay từ
trước khi dùng, code sau sẽ gặp lỗi khi compile, và không tạo ra binary nào để chạy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;PyMi&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cannot use &lt;span class="s2"&gt;&amp;quot;PyMi&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt; untyped string&lt;span class="o"&gt;)&lt;/span&gt; as &lt;span class="nb"&gt;type&lt;/span&gt; int in assignment
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong Python3.6+, &lt;a href="http://pp.pymi.vn/article/mypy/"&gt;sử dụng type annotation, kết hợp với mypy&lt;/a&gt;
để check cũng sẽ
cho lỗi tương tự (nhưng vẫn chạy được).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PyMi&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy typetest.py
typetest.py:2: error: Incompatible types in assignment &lt;span class="o"&gt;(&lt;/span&gt;expression has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt;, variable has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
Found &lt;span class="m"&gt;1&lt;/span&gt; error in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kiểu của các biến trong Go nói chung phải khai báo (declare), Go có thể tự suy
luận (type inference) được trong một vài trường hợp đơn giản.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;PyMi&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Low level&lt;/h3&gt;
&lt;p&gt;Được thiết kế nhằm thay C/C++ pha lẫn sự đơn giản dễ đọc của Python,
code Go thường đơn giản hơn code C/C++ nhưng khá "thủ công"/"low level"
so với code Python. Lập trình viên Python code Go nên quen với việc bỏ bớt
đi nhiều tính năng tiện lợi, phải viết nhiều code hơn.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go không có list comprehension&lt;/li&gt;
&lt;li&gt;Go không có map/filter&lt;/li&gt;
&lt;li&gt;Go không có kiểu set&lt;/li&gt;
&lt;li&gt;Go không có &lt;code&gt;4 in [2,3,4]&lt;/code&gt; để &lt;a href="https://stackoverflow.com/questions/38654383/how-to-search-for-an-element-in-a-golang-slice"&gt;kiểm tra phần tử có trong list không&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sort trong Go chắc chắn dài hơn &lt;code&gt;L.sort(reverse=True)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Reverse string sẽ không phải là&lt;code&gt;s[::-1]&lt;/code&gt; mà &lt;a href="https://stackoverflow.com/questions/1752414/how-to-reverse-a-string-in-go"&gt;dài cả mét&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Không đơn giản chỉ &lt;code&gt;json.loads&lt;/code&gt; để biến &lt;code&gt;str&lt;/code&gt; thành &lt;code&gt;dict&lt;/code&gt; mà phải định
  nghĩa struct theo cấu trúc của JSON.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Code Go nhìn chung sẽ dài hơn code Python, vậy nên lập trình viên nên sắm cho
mình một IDE xịn (như GoLand/IntelliJ IDEA , VSCode hay &lt;code&gt;vim&lt;/code&gt; + &lt;code&gt;vim-go&lt;/code&gt;), với khả năng &lt;a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets"&gt;dùng snippet để
sinh code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sự bất tiện này sẽ đỡ khó chịu đi nhiều khi đã quen dùng snippet.&lt;/p&gt;
&lt;h2&gt;Học lập trình Go (khi đã biết Python)&lt;/h2&gt;
&lt;h3&gt;Bao nhiêu là đủ? Em vui là được có phải không!&lt;/h3&gt;
&lt;p&gt;Không ai đọc hết quyển từ điển tiếng Việt rồi mới ra nói câu đầu tiên,
không ai học lên tiến sỹ âm nhạc rồi mới chạm tay vào đánh đàn. Khi &lt;a href="https://pymi.vn"&gt;học Python
tại PyMi.vn&lt;/a&gt;, ta học từng chút, dùng từng chút, chứ không học hết lý thuyết
cả Python rồi mới thực hành. Cũng không phải học &lt;code&gt;async&lt;/code&gt;, &lt;code&gt;threading&lt;/code&gt;, &lt;a href="https://stackoverflow.com/questions/100003/what-are-metaclasses-in-python"&gt;metaclass&lt;/a&gt;
rồi mới chịu đi làm.&lt;/p&gt;
&lt;p&gt;Học Go cũng vậy, dùng gì học đấy, cần gì học đấy.
Cần gì thì phụ thuộc vào bạn định làm gì, một Python web developer sẽ học
Django, ORM, làm việc với database trong khi một SysAdmin/DevOps engineer lại
làm việc với file, process...&lt;/p&gt;
&lt;h3&gt;Tài liệu&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Tài liệu chính thống, đầy đủ và hiệu quả để học go là Go Tour: &lt;a href="https://tour.golang.org/"&gt;https://tour.golang.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Bài tập có giải trên &lt;a href="https://exercism.io/tracks/go"&gt;exercism.io&lt;/a&gt; - chọn practice mode.&lt;/li&gt;
&lt;li&gt;FAQ giải đáp các thắc mắc thường gặp: &lt;a href="https://golang.org/doc/faq"&gt;https://golang.org/doc/faq&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Effective Go hướng dẫn viết Go theo cách của Gophers: &lt;a href="https://golang.org/doc/effective_go.html"&gt;https://golang.org/doc/effective_go.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Các tài liệu khác: &lt;a href="https://github.com/golang/go/wiki/Learn"&gt;learn&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Viết code Go&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://golang.org/doc/tutorial/getting-started"&gt;Cài Go lên máy rồi viết code ra file&lt;/a&gt;, hoặc code online trên trang Play &lt;a href="https://play.golang.org/"&gt;https://play.golang.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Go chạy code từ function &lt;code&gt;main&lt;/code&gt; thuộc &lt;code&gt;package main&lt;/code&gt;. code "Hello world!" như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, world.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Naming&lt;/h3&gt;
&lt;p&gt;Go dùng &lt;code&gt;camelCase&lt;/code&gt;, với ý nghĩa đặc biệt khi chữ cái đầu viết hoa hay viết thường.
Nếu viết hoa, var/function/type đó sẽ trở thành "public", code bên ngoài package hiện tại truy cập được, còn không viết hoa sẽ là "private".&lt;/p&gt;
&lt;h3&gt;Data types&lt;/h3&gt;
&lt;h4&gt;Built-in&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;nil: &lt;code&gt;nil&lt;/code&gt; là một giá trị, không có kiểu, đại diện cho sự "không tồn tại".&lt;/li&gt;
&lt;li&gt;bool: kiểu boolean gồm 2 giá trị &lt;code&gt;true&lt;/code&gt; &lt;code&gt;false&lt;/code&gt;, các boolean operator &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; (and), &lt;code&gt;||&lt;/code&gt; (or) tuân theo &lt;a href="https://pymi.vn/tutorial/boolean/"&gt;&lt;code&gt;short-circuit&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;int: các kiểu số trong Go đều có kích thước, int có kích thước 32 hoặc 64 bits &lt;a href="https://golang.org/doc/faq#q_int_sizes"&gt;tùy theo bản (chủ yếu 64 bits)&lt;/a&gt;.
  Các kiểu cụ thể &lt;code&gt;int8 int16 int32 int64&lt;/code&gt;, có kích thước là 2 mũ n, int8 int16 thường chỉ dùng khi tối ưu về memory. int64 biểu diễn được giá trị trong khoảng (&lt;code&gt;-2**64/2, 2**64/2&lt;/code&gt;), muốn tính giá trị lớn có thể &lt;a href="https://golang.org/pkg/math/big/#Int.String"&gt;sử dụng package có sẵn &lt;code&gt;math/big&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;float32&lt;/code&gt; hoặc &lt;code&gt;float64&lt;/code&gt;: chú ý không có kiểu &lt;code&gt;float&lt;/code&gt;. &lt;a href="https://pymi.vn/blog/why-not-float/"&gt;Tuân theo chuẩn IEE754&lt;/a&gt; nên &lt;code&gt;x, y, z := 0.1, 0.1, 0.1&lt;/code&gt; thì &lt;code&gt;x + y + z == 0.3&lt;/code&gt; sẽ trả về false. Chú ý ở trên tạo các biến để các giá trị 0.1 có kiểu float64, nếu viết trực tiếp &lt;code&gt;0.1 + 0.1 + 0.1 == 0.3&lt;/code&gt; sẽ là so sánh constants và trả về true &lt;a href="https://play.golang.org/p/TWRRr_lM7jk"&gt;https://play.golang.org/p/TWRRr_lM7jk&lt;/a&gt;. Đọc thêm về constants tại &lt;a href="https://blog.golang.org/constants"&gt;blog Go&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;string: giống như string của Python, immutable, có thể truy cập các chữ cái &lt;a href="https://blog.golang.org/strings"&gt;bằng cách chuyển thành runes&lt;/a&gt; (&lt;code&gt;s := []rune(sting)&lt;/code&gt;) rồi  dùng index: &lt;code&gt;s[3]&lt;/code&gt;. String bên dưới là 1 chuỗi các byte, hay một byte array/byte slice &lt;code&gt;[]byte{'h', 'e', 'l', 'l', 'o'}&lt;/code&gt;, có thể convert thành string: &lt;code&gt;string(bytes)&lt;/code&gt;. Python cũng có kiểu &lt;code&gt;bytes&lt;/code&gt;, cũng chuyển thành &lt;code&gt;str&lt;/code&gt; bằng cách decode &lt;code&gt;b'abc'.decode('utf-8')&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;array/slice: Go array giống như C, các phần tử phải cùng kiểu, và kích thước cố định không đổi. &lt;a href="https://www.youtube.com/watch?v=5DVV36uqQ4E"&gt;Array ít được dùng trực tiếp&lt;/a&gt;
  nó được dùng bên dưới slice và slice linh hoạt như list trong Python. Ví dụ về slice&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;ns&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;ns&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;ns&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;// như extend trong python list&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://play.golang.org/p/SCW8F0EqCmW"&gt;https://play.golang.org/p/SCW8F0EqCmW&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;map: giống dict của Python, key phải so sánh &lt;code&gt;==&lt;/code&gt; được, map và slice không
làm key được, thứ tự key là ngẫu nhiên. Map trong Go dùng khi cần nối
key-value, tìm kiếm nhanh, nhưng không dùng như 1 object như dict Python
&lt;code&gt;{"name": "Pymier", "age": 20}&lt;/code&gt;,
do map phải có kiểu cố định cho key, value. &lt;a href="https://play.golang.org/p/JRu3lp_mEGj"&gt;Xem code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;users&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nb"&gt;make&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nx"&gt;users&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20081269&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pymier69&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;users&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20081234&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pymier1&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;users&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20081239&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pymier2&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;users&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d: %s\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;users&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20081239&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cú pháp &lt;a href="https://golang.org/ref/spec#Composite_literals"&gt;&lt;code&gt;composite literal&lt;/code&gt;&lt;/a&gt; giúp tạo giá trị cho struct/slice/array/map.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class="nx"&gt;xs&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="kd"&gt;map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
         &lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="mi"&gt;345&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
     &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Các kiểu khác &lt;code&gt;struct&lt;/code&gt;, &lt;code&gt;pointer&lt;/code&gt;, &lt;code&gt;function&lt;/code&gt;, &lt;code&gt;interface&lt;/code&gt;, &lt;code&gt;channel&lt;/code&gt;
sẽ được nhắc tới sau, xem đầy đủ tại &lt;a href="https://golang.org/ref/spec#Types"&gt;spec&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Struct &amp;amp; method&lt;/h4&gt;
&lt;p&gt;Python có class, cung cấp đủ các tính năng tiêu chuẩn của OOP (object-oriented
programming - lập trình hướng đối tượng).  Định nghĩa 1 class tạo ra 1
kiểu dữ liệu mới và cho phép đóng gói dữ liệu (data) với tính năng (method) lại
với nhau.&lt;/p&gt;
&lt;p&gt;Go &lt;code&gt;struct&lt;/code&gt;: A struct is a collection of fields.&lt;/p&gt;
&lt;p&gt;struct không cung cấp các tính năng của OOP (như inheritance), nhưng cũng
tạo ra 1 kiểu dữ liệu mới và cho phép đóng gói dữ liệu (data) với tính năng
(method) lại với nhau. &lt;a href="https://play.golang.org/p/tQMPLn9OXcj"&gt;https://play.golang.org/p/tQMPLn9OXcj&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;Rectangle&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;Width&lt;/span&gt;  &lt;span class="kt"&gt;float64&lt;/span&gt;
    &lt;span class="nx"&gt;Height&lt;/span&gt; &lt;span class="kt"&gt;float64&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;r&lt;/span&gt; &lt;span class="nx"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Area&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kt"&gt;float64&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Width&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Height&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;r&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;Width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;Height&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%f %T&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;r&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Area&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code tương tự trong Python3, với type annotation&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;height&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;area&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;height&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong Go, function gắn với các struct gọi là method, &lt;code&gt;(r Rectangle)&lt;/code&gt; gọi là receiver, đứng trước tên &lt;code&gt;Area()&lt;/code&gt; trông lạ so với các ngôn ngữ khác, nhưng nó đóng vai trò như &lt;code&gt;self&lt;/code&gt; trong Python method.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Remember: a method is just a function with a receiver argument.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;interface, type assertion, type switch&lt;/h4&gt;
&lt;p&gt;Một interface type định nghĩa 1 tập hợp các method.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An interface type is defined as a set of method signatures.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Một value của type interface có thể chứa bất kỳ giá trị nào implement các method qui định trong interface đó.&lt;/p&gt;
&lt;p&gt;Empty interface &lt;code&gt;interface{}&lt;/code&gt; là trường hợp đặc biệt, nó có thể chứa mọi giá
trị do không cần có method nào.&lt;/p&gt;
&lt;p&gt;Một value kiểu &lt;code&gt;interface{}&lt;/code&gt; đánh sập mọi đảm bảo về type trong Golang, biến
Go thành dynamic typing như Python. Nó như lối thoát linh hoạt giữa mọi
sự cứng nhắc/static.&lt;/p&gt;
&lt;p&gt;Sử dụng type assertion để truy cập giá trị ẩn dưới &lt;code&gt;interface{}&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="nx"&gt;anything&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;PyMi.vn&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v %T\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;anything&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v %T\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%v %T\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;.(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;anything&lt;/span&gt;&lt;span class="p"&gt;.(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://play.golang.org/p/mNXTI-4C3pU"&gt;https://play.golang.org/p/mNXTI-4C3pU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;hoặc dùng &lt;code&gt;switch&lt;/code&gt; để xử lý các kiểu khác nhau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;.(&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Twice %v is %v\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%q is %v bytes long\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;v&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Control flow (if/else/for)&lt;/h3&gt;
&lt;p&gt;Go không có while, dùng for để loop đủ kiểu. Để lặp vô hạn như while, dùng &lt;code&gt;for { }&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;if cho phép định nghĩa một biến chỉ dùng trong if, khá giống với warus operator của Python 3.8.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="p"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;big number&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;We don&amp;#39;t talk any more&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;ns&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;meo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;bo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;value&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;ns&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d %s\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://play.golang.org/p/rHJP4ghomzo"&gt;https://play.golang.org/p/rHJP4ghomzo&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Function&lt;/h3&gt;
&lt;p&gt;Định nghĩa function không khác Python đáng kể, ngoại trừ việc thay vì return tuple, Go có thể return nhiều giá trị (và không có kiểu tuple).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;TwiceAndThrice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://golang.org/doc/faq#overloading"&gt;Go không hỗ trợ overloading - một function dùng với số lượng argument khác nhau&lt;/a&gt;
, nên cũng không hỗ trợ default argument &lt;code&gt;pyfunc(x, y=10)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Cách duy nhất để gọi function là đưa vào các argument theo thứ tự, không
có &lt;a href="https://docs.python.org/3/tutorial/controlflow.html#keyword-arguments"&gt;keyword argument như Python&lt;/a&gt; (&lt;code&gt;python_function(x=5, y=7)&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Có thể dùng function làm argument của function khác, việc này rất phổ biến trong Go, khái niệm này có tên &lt;code&gt;first class function&lt;/code&gt;.
Function nhận function khác làm argument được gọi là &lt;code&gt;higher order function&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Error handling&lt;/h3&gt;
&lt;p&gt;Go không có exception, lỗi không được xử lý khiến chương trình kết thúc qua việc gọi function "panic" (runtime error).
Ví dụ khi dùng type assertion để truy cập kiểu string dưới 1 empty interface chứa giá trị int.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;panic&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nx"&gt;conversion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt; &lt;span class="nx"&gt;is&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;not&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Các function thay vì tạo ra exception, thường trả về giá trị kiểu &lt;code&gt;error&lt;/code&gt; kèm kết quả.
Ví dụ function trong package &lt;code&gt;strconv&lt;/code&gt; dùng để convert string thành int:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;Atoi&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu thành công, error sẽ là &lt;code&gt;nil&lt;/code&gt; còn biến kiểu int chứa giá trị, nếu s không phải dạng string của 1 số int, error sẽ có giá trị khác &lt;code&gt;nil&lt;/code&gt; và thường chứa chi tiết về lỗi xảy ra. &lt;code&gt;error&lt;/code&gt; là kiểu dữ liệu interface.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="kt"&gt;error&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;mọi kiểu dữ liệu có method &lt;code&gt;Error()&lt;/code&gt; return &lt;code&gt;string&lt;/code&gt; đều có thể là 1 &lt;code&gt;error&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Do các function đều viết theo cách này, nên code gọi 1 function trong Go thường đi kèm với 1 đoạn kiểm tra &lt;code&gt;error&lt;/code&gt; ngay sau đó rồi mới xử lý giá trị nhận được:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;42&amp;quot;&lt;/span&gt;
    &lt;span class="nx"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;strconv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Atoi&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nb"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;value&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cách làm này gây nhiều tranh cãi, nhưng vẫn là cách làm chính thống của Go.
Go dễ dãi hơn so với Java (khi 1 function xảy ra exception gì thì phải khai báo có thể xảy ra exception, và code gọi bắt buộc phải xử lý).
Bỏ qua giá trị của &lt;code&gt;err&lt;/code&gt; là chuyện hoàn toàn làm được, như viết code Python không xử lý exception, khi có error xảy ra, chương trình thường sẽ... chết.&lt;/p&gt;
&lt;p&gt;Cách return error này không ÉP được lập trình viên phải xử lý mọi lỗi, nhưng tạo ra 1 nền văn hóa trong cộng đồng code Golang: luôn xử lý (hay ít nhất là nghĩ tới) error mọi lúc, mọi nơi.&lt;/p&gt;
&lt;h3&gt;Import&lt;/h3&gt;
&lt;p&gt;Cú pháp tương tự Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;packagename&amp;quot;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;rồi gọi function qua &lt;code&gt;package.Function&lt;/code&gt;, vd: &lt;code&gt;fmt.Println&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Package &amp;amp; Install 3rd packages&lt;/h3&gt;
&lt;p&gt;Đầu mỗi file code Go phải bắt đầu bằng&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;packagename&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tất cả các file go trong cùng 1 thư mục (không tính thư mục con) phải khai
báo cùng package, chúng sẽ được gộp lại làm một (trừ phần import, mỗi file
phải tự import thư viện mình dùng). Có thể coi việc các file khác nhau chỉ để
thuận tiện tổ chức code, chứ vẫn là trong 1 file. Các function trong cùng 1
package (khác file) có thể gọi nhau thoải mái, không cần import lẫn nhau.&lt;/p&gt;
&lt;p&gt;Việc này khác với Python, mỗi file.py tự động là 1 module riêng biệt.&lt;/p&gt;
&lt;p&gt;Go cài package bằng lệnh &lt;code&gt;go get&lt;/code&gt;, sau đó import tên package - là một đường dẫn theo cấu trúc URL online.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ go get github.com/stretchr/testify/assert
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Package "testing" của Go không có "assert", cài package từ github rồi dùng
assert.Equal để kiểm tra 2 giá trị có bằng nhau không, và message hiển thị khi chúng không bằng nhau.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// main_test.go&lt;/span&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;github.com/stretchr/testify/assert&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;TestSomething&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;testing&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;T&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// assert equality&lt;/span&gt;
    &lt;span class="nx"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;they should be equal&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; $ go &lt;span class="nb"&gt;test&lt;/span&gt; -v
&lt;span class="o"&gt;===&lt;/span&gt; RUN   TestSomething
--- PASS: TestSomething &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.00s&lt;span class="o"&gt;)&lt;/span&gt;
PASS
ok      _/home/hvn/MyData   &lt;span class="m"&gt;0&lt;/span&gt;.002s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Danh sách các package xem tại &lt;a href="https://github.com/avelino/awesome-go"&gt;awesome-go&lt;/a&gt; và &lt;a href="https://godoc.org/"&gt;godoc&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;IO: read/write file&lt;/h3&gt;
&lt;p&gt;Đọc file từng dòng và ghi file:&lt;/p&gt;
&lt;p&gt;Ghi file:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tạo file với os.Create, thu được 1 File struct&lt;/li&gt;
&lt;li&gt;Gọi method File.WriteString để ghi string&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;os&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bundau.mamtom&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;defer&lt;/span&gt; &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;WriteString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bundau\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu bỏ qua phần xử lý error thì cũng không khác Python là mấy.&lt;/p&gt;
&lt;p&gt;Đọc file:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mở file bằng os.Open, thu được 1 File struct&lt;/li&gt;
&lt;li&gt;Tạo 1 "Scanner" để giúp xử lý logic đọc file theo từng dòng&lt;/li&gt;
&lt;li&gt;Lặp qua scanner.Scan() để lấy từng dòng qua scanner.Text()&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;os&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bundau.mamtom&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;defer&lt;/span&gt; &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="nx"&gt;scanner&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;bufio&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;NewScanner&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;lines&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;scanner&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Scan&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;lines&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;lines&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;scanner&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;scanner&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://play.golang.org/p/Jv80_bRJc2H"&gt;https://play.golang.org/p/Jv80_bRJc2H&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Giải bài &lt;a href="https://projecteuler.net/problem=1"&gt;Project Euler 1&lt;/a&gt; bằng Go:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Find the sum of all the multiples of 3 or 5 below 1000.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giải bài &lt;a href="https://projecteuler.net/problem=16"&gt;Project Euler 16&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What is the sum of the digits of the number 2 to the power of 1000?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;math/big&amp;quot;&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;strconv&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nx"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;twoToThePowerOf1000&lt;/span&gt; &lt;span class="nx"&gt;big&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Int&lt;/span&gt;
    &lt;span class="nx"&gt;twoToThePowerOf1000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;big&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;NewInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;big&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;NewInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// Có thể tính sum luôn nhưng bài này minh họa slice&lt;/span&gt;
    &lt;span class="nx"&gt;digits&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;twoToThePowerOf1000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;String&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;digit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nx"&gt;strconv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Atoi&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="nx"&gt;digits&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;digits&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;digit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;range&lt;/span&gt; &lt;span class="nx"&gt;digits&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;v&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;People &amp;amp; Community&lt;/h2&gt;
&lt;p&gt;Go có cộng đồng trên toàn cầu, có forum/slack/IRC để thảo luận, xem tại &lt;a href="https://golang.org/help/#help"&gt;help&lt;/a&gt; - có cả bằng Tiếng Việt.&lt;/p&gt;
&lt;p&gt;Những nhân vật đáng chú ý/follow trong cộng đồng Go gồm các tác giả, core dev, ...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.golang.org/index"&gt;Go blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Rob_Pike"&gt;Rob Pike&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://dave.cheney.net/category/golang"&gt;Dave Cheney&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://swtch.com/~rsc/"&gt;Russ Cox&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Go là một ngôn ngữ lập trình đơn giản và thú vị, với những kiến thức trong bài này, ta đã có thể bắt đầu dùng Go để viết các chương trình không hề đơn giản.
Phần tiếp sẽ trình bày chi tiết về các khái niệm chỉ có trong Go mà không có trong Python như Pointer, sự khác biệt về cách tổ chức package trong Go, declaration &amp;amp; initialization (khai báo và khởi tạo variable), cùng các standard library quan trọng nhất cho một SysAdmin/DevOps.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.iron.io/how-we-went-from-30-servers-to-2-go/"&gt;https://blog.iron.io/how-we-went-from-30-servers-to-2-go/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.iron.io/go-after-2-years-in-production/"&gt;https://blog.iron.io/go-after-2-years-in-production/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.golang.org/survey2019-results"&gt;https://blog.golang.org/survey2019-results&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/golang/go/wiki/SuccessStories"&gt;https://github.com/golang/go/wiki/SuccessStories&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.catb.org/~esr/reposurgeon/GoNotes.html"&gt;Notes on the Go translation of Reposurgeon - from Python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hn.algolia.com/?q=go"&gt;https://hn.algolia.com/?q=go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Next&lt;/h2&gt;
&lt;p&gt;Đã có phần 2 &lt;a href="http://pp.pymi.vn/article/go12/"&gt;&lt;strong&gt;Cứ đi là đến&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="golang"></category><category term="go"></category></entry><entry><title>Viết code dễ đổi, dễ test như thế nào?</title><link href="http://pp.pymi.vn/article/repl/" rel="alternate"></link><published>2020-08-17T00:00:00+07:00</published><updated>2020-08-17T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-08-17:/article/repl/</id><summary type="html">&lt;p&gt;Tận dụng tối đa REPL của Python, tính năng mà C, Java, Golang không có&lt;/p&gt;</summary><content type="html">&lt;p&gt;Các lập trình viên chuyển sang code Python từ các ngôn ngữ lập trình khác như
Java, C, Golang... thường bắt đầu code bằng việc bật một cái IDE to đùng
(PyCharm) lên,
rồi viết chục dòng code, sau đó bấm nút "tam giác" để chạy từ trên xuống dưới.
Đó là cách làm phổ biến, tiêu chuẩn khi viết code C, Java, Golang... nhưng là
một cách làm rất không ... Python.&lt;/p&gt;
&lt;p&gt;Khi học Python, việc đầu tiên ta làm là bật &lt;code&gt;python&lt;/code&gt; từ terminal, rồi gõ trực
tiếp các dòng code vào đó, enter để thấy kết quả:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt;
&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Apr&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="mi"&gt;2020&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mo"&gt;01&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;GCC&lt;/span&gt; &lt;span class="mf"&gt;8.4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;linux&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; is the answer of life.&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;42 is the answer of life.&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Còn khi đi làm, viết code Python? Cũng vậy!&lt;/p&gt;
&lt;p&gt;Khả năng gõ code trực tiếp, enter thấy ngay kết quả như trên, là một tính năng
cực kỳ hấp dẫn/quan trọng của Python cũng như các ngôn ngữ lập trình có &lt;code&gt;REPL&lt;/code&gt;
như Ruby, Clojure, JavaScript, LISP, Ocaml, Elixir, F#... nó cho phép người
dùng khám phá,
vui chơi thoải mái với dữ liệu một cách tương tác, thấy kết quả nhanh nhất, thay
vì phải ngồi tưởng tượng, đoán, chờ compile,
và dựa vào IDE trợ giúp như các ngôn ngữ không có REPL.&lt;/p&gt;
&lt;p&gt;&lt;img alt="xkcd303" src="https://imgs.xkcd.com/comics/compiling.png"&gt;&lt;/p&gt;
&lt;p&gt;Đây là chế độ &lt;a href="https://docs.python.org/3/tutorial/interpreter.html"&gt;"interactive mode"&lt;/a&gt;
của Python interpreter, khái niệm này có cái tên khác chung hơn là: REPL.&lt;/p&gt;
&lt;p&gt;(Chú ý: Golang có các project như &lt;a href="https://github.com/motemen/gore"&gt;&lt;code&gt;gore&lt;/code&gt;&lt;/a&gt; hay
 &lt;code&gt;yaegi&lt;/code&gt; nhưng đều rất hạn chế so với REPL của các ngôn ngữ kể trên).&lt;/p&gt;
&lt;h2&gt;REPL&lt;/h2&gt;
&lt;p&gt;REPL - Read Eval Print Loop, là môi trường nhận đầu vào từ người dùng (&lt;code&gt;Read&lt;/code&gt;),
chạy input đó (&lt;code&gt;Eval&lt;/code&gt;), in kết quả ra màn hình (&lt;code&gt;Print&lt;/code&gt;), và cứ tiếp tục vậy
(&lt;code&gt;Loop&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Khái niệm này bắt nguồn từ ngôn ngữ lập trình cổ thứ 2 thế giới: &lt;a href="https://pp.pymi.vn/article/scm1/"&gt;LISP&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Việc viết code khi dùng các ngôn ngữ có REPL thường theo các bước:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bật REPL lên&lt;/li&gt;
&lt;li&gt;gõ code thử cho tới khi thu được kết quả mong muốn&lt;/li&gt;
&lt;li&gt;copy code đó vào editor/IDE&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Ví dụ&lt;/h2&gt;
&lt;p&gt;Đoạn code Python 3 sau sẽ truy cập API của GitHub, lấy các repo của Pymivn về,
lọc ra các repo có &amp;gt; 0 star, sắp xếp giảm dần theo số star,
rồi in ra output ở dạng dễ đọc.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# githubstars.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://api.github.com/users/pymivn/repos&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;has_stars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;
                &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;html_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;stars&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{} - {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stars&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu viết theo kiểu này, rồi cho vào IDE, bấm nút tam giác để chạy, những nhược
điểm sau sẽ xuất hiện:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mỗi lần chạy, code sẽ truy cập vào API GitHub 1 lần, việc này ngoài chậm,
phụ thuộc vào mạng internet mỗi lần chạy,
còn thêm nhược điểm nữa là sẽ dùng tốn "quota" hàng ngày của bạn (VD GitHub chỉ
cho phép gọi API n lần 1 ngày).&lt;/li&gt;
&lt;li&gt;Trừ khi bạn code 1 lần chuẩn luôn, còn không thì mất khoảng 5 7 lần mới ra
đoạn code trên.&lt;/li&gt;
&lt;li&gt;Không test từng phần (bước) của đoạn code được.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thay vì vậy, viết lại một phần code như sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;getrepos&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://api.github.com/users/pymivn/repos&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lưu vào file &lt;code&gt;github.py&lt;/code&gt;, rồi vào terminal, bật &lt;code&gt;python3&lt;/code&gt; lên, gõ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;github&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getrepos&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nc"&gt;list&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;, 23)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;dict_keys&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;node_id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;full_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;private&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;owner&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;html_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;description&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fork&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;forks_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;keys_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;collaborators_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;teams_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hooks_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;issue_events_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;events_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;assignees_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;branches_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tags_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;blobs_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;git_tags_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;git_refs_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;trees_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;statuses_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;languages_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;stargazers_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;contributors_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;subscribers_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;subscription_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;commits_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;git_commits_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;comments_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;issue_comment_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;contents_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;compare_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;merges_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;archive_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;downloads_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;issues_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pulls_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;milestones_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;notifications_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;labels_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;releases_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;deployments_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;updated_at&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pushed_at&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;git_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ssh_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;clone_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;svn_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;homepage&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;size&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;stargazers_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;watchers_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;language&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;has_issues&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;has_projects&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;has_downloads&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;has_wiki&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;has_pages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;forks_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;mirror_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;archived&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;disabled&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;open_issues_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;license&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;forks&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;open_issues&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;watchers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;default_branch&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;stargazers_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;has_stars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;stargazers_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;stars_urls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;stargazers_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;html_url&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;stars_urls&lt;/span&gt;
&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/awesome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/cpuisfast&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/hoidap-python&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/lekhome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/math-stats-ml&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/people&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/pyjobs_crawlers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/Python_Hanoi_Meetup&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;stars_urls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;fmt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{} - {}&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;stars_urls&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;awesome&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ml&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Python_Hanoi_Meetup&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;people&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuisfast&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pyjobs_crawlers&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lekhome&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pymivn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;hoidap&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Với cách làm này, chỉ cần gọi GitHub API duy nhất 1 lần, còn sau đó thử
thoải mái cho đến khi thu được kết quả mong muốn thì copy vào file cuối cùng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;getrepos&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://api.github.com/users/pymivn/repos&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;filter_repos_have_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_star_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;html_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getrepos&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;repos_have_stars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;filter_repos_have_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;stars_urls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;get_star_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;repos_have_stars&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;stars_urls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;fmt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{} - {}&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;stars_urls&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau này nếu code có bug, lại bật REPL lên, gọi các function để debug trực tiếp
dễ dàng, từng bước một.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;ipython&lt;/span&gt;
&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Jul&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="mi"&gt;2020&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;copyright&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;credits&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;license&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;
&lt;span class="n"&gt;IPython&lt;/span&gt; &lt;span class="mf"&gt;7.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="n"&gt;An&lt;/span&gt; &lt;span class="n"&gt;enhanced&lt;/span&gt; &lt;span class="n"&gt;Interactive&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;?&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;github&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getrepos&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;have_stars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter_repos_have_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;have_stars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_star_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;have_stars&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/awesome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/cpuisfast&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/hoidap-python&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/lekhome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/math-stats-ml&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/people&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/pyjobs_crawlers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/Python_Hanoi_Meetup&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_star_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;have_stars&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/awesome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/math-stats-ml&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/Python_Hanoi_Meetup&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/people&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/cpuisfast&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/pyjobs_crawlers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/lekhome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
 &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://github.com/pymivn/hoidap-python&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Dev với IPython&lt;/h2&gt;
&lt;p&gt;IPython (&lt;code&gt;pip install ipython&lt;/code&gt;) cung cấp thêm các tính năng giúp cách code này
hiệu quả hơn.&lt;/p&gt;
&lt;p&gt;IPython có màu mè, auto-indent tự thụt sau for/if giúp gõ nhanh hơn.&lt;/p&gt;
&lt;p&gt;Magic command &lt;code&gt;%hist&lt;/code&gt; sẽ hiện full history những gì user đã gõ, giúp copy code
để paste ra IDE/Editor dễ hơn, không bao gồm output.&lt;/p&gt;
&lt;p&gt;Magic command &lt;code&gt;%edit&lt;/code&gt; sẽ mở hẳn editor ra để sửa code, sau khi đóng lại, code
sẽ được chạy, các biến sẽ tồn tại trong môi trường đang code.&lt;/p&gt;
&lt;p&gt;Ví dụ này gõ &lt;code&gt;%edit&lt;/code&gt; lần đầu định nghĩa list &lt;code&gt;ns&lt;/code&gt;, rồi gõ &lt;code&gt;%edit&lt;/code&gt; lần 2 để
print ra list ns định nghĩa trước đó:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;ipython&lt;/span&gt;
&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Apr&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="mi"&gt;2020&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mo"&gt;01&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;copyright&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;credits&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;license&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;
&lt;span class="n"&gt;IPython&lt;/span&gt; &lt;span class="mf"&gt;7.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="n"&gt;An&lt;/span&gt; &lt;span class="n"&gt;enhanced&lt;/span&gt; &lt;span class="n"&gt;Interactive&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;?&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;edit&lt;/span&gt;
&lt;span class="n"&gt;IPython&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;temporary&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="n"&gt;named&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ipython_edit_2v90rimj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ipython_edit_wf_rn_nc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;span class="n"&gt;Editing&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Executing&lt;/span&gt; &lt;span class="n"&gt;edited&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;ns = [1,2,3,4]&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;edit&lt;/span&gt;
&lt;span class="n"&gt;IPython&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;temporary&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="n"&gt;named&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ipython_edit_qb43pml6&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ipython_edit_tph7_5x6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;span class="n"&gt;Editing&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Executing&lt;/span&gt; &lt;span class="n"&gt;edited&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;print(ns)&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Đổi editor&lt;/h3&gt;
&lt;p&gt;ra shell, gõ &lt;code&gt;echo $EDITOR&lt;/code&gt; xem đang đặt
là gì, thay bằng câu lệnh mở editor mình muốn, ví dụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;EDITOR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nano
$ ipython
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Chạy file rồi bật REPL&lt;/h3&gt;
&lt;p&gt;Python hay IPython đều hỗ trợ &lt;a href="https://pp.pymi.vn/article/pythoni/"&gt;option
&lt;code&gt;-i&lt;/code&gt;&lt;/a&gt;, sau khi chạy với 1 file code
sẽ tự động vào chế độ interactive mode&lt;/p&gt;
&lt;h2&gt;Jupyter&lt;/h2&gt;
&lt;p&gt;Code trên Jupyter (&lt;code&gt;pip install jupyter&lt;/code&gt;) cũng cho khả năng linh hoạt tương tự.
Code xong File &amp;gt; Save As Python file.&lt;/p&gt;
&lt;h2&gt;Unittest&lt;/h2&gt;
&lt;p&gt;Trong các ngôn ngữ không có REPL, cách thử 1 đoạn code nhanh nhất là viết
1 function cần thử, rồi viết unittest, rồi chạy test thay vì chạy cả 1 chương
trình ngàn dòng.
Với Python, ta chỉ cần bật REPL lên, import module vào và khám phá.&lt;/p&gt;
&lt;p&gt;Code viết theo cách mới trên vừa dễ gõ trực tiếp trong REPL, vừa dễ viết unittest,
ví dụ viết nhanh unittest chạy bằng &lt;code&gt;pytest&lt;/code&gt; (&lt;code&gt;pip install pytest&lt;/code&gt;) như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# test_github.py&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;github&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;bad&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;html_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;bad_repo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;good&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;html_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://github.com/pymivn/awesome&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;blah&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;blo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;sample_repos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;bad&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter_repos_have_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sample_repos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_star_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stargazers_count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;html_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bad&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_stars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Viết code bằng REPL hay bằng &lt;a href="https://en.wikipedia.org/wiki/Test-driven_development"&gt;unittest
TDD&lt;/a&gt; đều mang tới một
kết quả chung: code dễ sửa, dễ test.&lt;/p&gt;
&lt;p&gt;Tất nhiên REPL không thay thế hoàn toàn cho unittest, nhưng nó mang lại môi
trường thử nghiệm nhanh chóng &lt;del&gt;tương đương như&lt;/del&gt; hơn nhiều unittest ở
các ngôn ngữ khác.&lt;/p&gt;
&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Cài ngay IPython, Jupyter rồi bật lên mỗi khi muốn code Python.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Đừng đọc tiếng Anh theo kiểu Tiếng Việt, đừng code Python theo kiểu Java.
REPL là một phát minh có sức mạnh khủng khiếp mà các Pythonista nên vận dụng,
sử dụng, và lạm dụng hết mình.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="best-practice"></category></entry><entry><title>Phỏng vấn</title><link href="http://pp.pymi.vn/article/phongvan/" rel="alternate"></link><published>2020-04-10T00:00:00+07:00</published><updated>2020-04-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-04-10:/article/phongvan/</id><summary type="html">&lt;p&gt;phỏng vấn thì chuẩn bị gì? làm thế nào để "deal" lương? học xong xin việc thế nào?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Phỏng vấn là hai từ mang yếu tố quyết định, nhưng ít khi được nhắc đến.
Nó thường bị xem như sự may mắn, hay do "giỏi", hay quan hệ tốt ...
Bài viết này giải đáp các thắc mắc thầm kín khi đi phỏng vấn xin việc, đặc biệt
dành cho những người kiếm công việc lập trình đầu tiên.&lt;/p&gt;
&lt;h2&gt;Phỏng vấn là gì?&lt;/h2&gt;
&lt;p&gt;Khi muốn đi làm, một lập trình viên sẽ liên hệ với một công ty để "xin việc" nhằm
có một công việc, được trả lương tại công ty đó, ở đây ví dụ là PAMA corp.&lt;/p&gt;
&lt;p&gt;PAMA corp sẽ cử một hoặc một nhóm người thực hiện việc "kiểm tra đầu vào". Sau
quá trình kiểm tra, nếu phía PAMA corp đồng ý, phía lập trình viên đồng ý,
sẽ ký một hợp đồng lao động, rồi lập trình viên đi làm, và được trả lương.&lt;/p&gt;
&lt;h2&gt;Nộp "đơn xin việc" thế nào?&lt;/h2&gt;
&lt;p&gt;Thông thường, tức không phải các trường hợp ngoại lệ như bị "săn" đón đi làm,
hay có quan hệ được "giới thiệu" vào làm, thì:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lập trình viên sẽ lên các trang tuyển dụng/tìm việc (&lt;a href="https://jobs.pymi.vn/"&gt;như PyJobs&lt;/a&gt;)/trang chủ của công ty cụ thể để tìm công việc mong muốn,&lt;/li&gt;
&lt;li&gt;hoặc các "head hunter" chuyên đi săn ứng viên hay HR (human resource - nhân
  sự) của các công ty chủ động liên hệ, mời (or gạ) nộp hồ sơ phỏng vấn. Chú ý
  đây là một nghề hái ra tiền, nên đừng shock nếu được mời chào đon đả.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Quy trình phỏng vấn ra sao?&lt;/h2&gt;
&lt;p&gt;Thông thường sẽ có:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HH/HR gọi điện, thống nhất về Job description (JD - yêu cầu công việc), có
  thể có cả mức lương thưởng/chính sách. Nếu không có, hãy hỏi kỹ, cụ thể để
  khỏi mất thời gian. Bạn sẽ không muốn tốn thời gian 4 tuần đi qua 8 vòng phỏng
  vấn để biết mức thu nhập tối đa công ty sẽ trả cho vị trí đó là 1.500 USD, trong
  khi thu nhập hiện tại của bạn đang là 3000 USD.
  HR sẽ chốt quy trình phỏng vấn (mấy vòng), thời gian phỏng vấn vòng 1.&lt;/li&gt;
&lt;li&gt;Vòng 0: các công ty có thể có bài test online, thường là code 2-3 bài thuật
  toán trong vòng 1 tiếng trên 1 trang code online như hackerank.com.
  Hoặc cũng có thể cho 1 bài "test" về nhà làm 1 sản phẩm gì đó rồi nộp sau 1
  tuần.&lt;/li&gt;
&lt;li&gt;Nếu có vòng 0, và nếu đạt yêu cầu, HR sẽ email/ gọi điện hẹn phỏng vấn vòng 1.&lt;/li&gt;
&lt;li&gt;Vòng 1, có thể là cả vòng 2, hay thậm chí vòng N, là việc gặp và trả lời các
  câu hỏi do đại diện phía công ty đưa ra.&lt;/li&gt;
&lt;li&gt;Nếu N vòng này thành công, sẽ tới vòng cuối cùng: "deal" lương. Dựa vào kết
  quả N vòng trước mà công ty quyết định có tuyển lập trinh viên không, và
  trả thù lao bao nhiêu.&lt;/li&gt;
&lt;li&gt;Hai bên nếu đồng ý sẽ ký giấy tờ, và hẹn ngày đi làm. Với người đang đi làm
  ở công ty khác, sẽ thỏa thuận sau thời gian X ngày (thường là 30-45 ngày)
  sẽ đi làm do đó là thời gian cần thiết để xin nghỉ, chấm dứt hợp đồng với
  công ty cũ.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Đơn xin việc - Resume - CV&lt;/h2&gt;
&lt;p&gt;Thường là 1 file PDF (để đọc được trên mọi hệ điều hành),
bằng tiếng Anh (để tỏ ra chuyên nghiệp), có link GitHub đến các project cá
nhân thay vì đính kèm file RAR.&lt;/p&gt;
&lt;p&gt;Xem mẫu CV học viên mới tốt nghiệp &lt;a href="https://pymi.vn"&gt;pymivn&lt;/a&gt;
tại &lt;a href="https://bit.ly/pymicv"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tránh các mẫu CV có "thanh năng lượng" đánh giá 3 sao 5 sao. Really? bạn
có chắc mình đạt 3 sao? so với ai? So với Guido van Rossum?
Để 4 5 sao nhiều khi phản tác dụng khiến cho phía bên kia tìm cách mà dìm bạn
xuống, khiêm tốn là một (đức) tính được yêu thích (trước) khi đi làm.&lt;/p&gt;
&lt;h2&gt;Các vấn đề bất cập của quy trình phỏng vấn&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Không có chuẩn, không có khuôn mẫu, mỗi chỗ một kiểu. Có khi lý do
  không ai viết bài về chuyện phỏng vấn bởi nó chả bao giờ giống nhau cả.&lt;/li&gt;
&lt;li&gt;Vậy nên những thứ viết trong bài này, hãy xem là tương đối, bởi tác giả
  không muốn thêm chữ "một cách tương đối" cuối mỗi câu, hay "đôi khi"/"hầu
  hết" ở mỗi đầu câu.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Những bí quyết phỏng vấn&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;HIỂU rằng ký hợp đồng lao động và đi làm cho một công ty, đó là một thỏa
  thuận &lt;strong&gt;kinh tế&lt;/strong&gt; giữa 2 bên, thuận mua - vừa bán, như đi mua thịt mua rau.
  Phía công ty dùng tiền để mua - phía lập trình viên bán sức lao động. Không
  phải chuyện xin cho, ơn huệ, nợ nần gì ai cả. Không có công ty làm việc không
  vì lợi nhuận, nhận vào làm vì &lt;a href="https://www.youtube.com/watch?v=iJKV5miglAg"&gt;thương bạn như thương cây bàng
  non&lt;/a&gt;. Cũng không có chuyện "anh
  em như thể người nhà, bạn bè đồng nghiệp như là người thân". No, please.
  Bạn sẽ bị thay thế bất cứ lúc nào nếu không còn có lợi cho công ty.&lt;/li&gt;
&lt;li&gt;Không để lộ mức lương hiện tại, bằng mọi giá. Vì lý do gì công ty PAMA corp
  cần biết mức lương cũ của bạn? lý do duy nhất là để ép nó xuống. Nếu bạn nói
  lương hiện tại 10 triệu, công ty hoàn toàn tự tin trả bạn 11 triệu. Nhưng nếu
  không biết, họ chỉ có thể trả thấp hơn 1 chút mức bạn yêu cầu. Ở Mỹ, có hẳn
  &lt;a href="https://www.sfgate.com/business/networth/article/New-law-bans-California-employers-from-asking-12274431.php"&gt;luật cấm các công ty hỏi lịch sử lương ứng viên&lt;/a&gt;. Ở Việt Nam không có luật này, nhưng nếu bị hỏi, hãy nói đã kỹ thỏa thuận
  không tiết lộ &lt;a href="https://en.wikipedia.org/wiki/Non-disclosure_agreement"&gt;NDA&lt;/a&gt;
  của công ty cũ / hiện tại. HR sẽ hỏi vòng rằng "mức mong đợi của
  anh là bao nhiêu?", lúc đó cứ thoải mái nói mức bạn mong muốn, hay cộng 7-10
  triệu vào mức hiện tại, không mấy ai nhảy việc để nhận thêm 1 triệu mỗi tháng
  cả.&lt;/li&gt;
&lt;li&gt;Hỏi rõ mức thu nhập cụ thể, kể cả khoảng (range - từ X đến Y). Rất nhiều công
  ty để lương theo kiểu "thỏa thuận", hay "có thể thương lượng", hay HR cương
  quyết không nói mà đòi phải qua vòng phỏng vấn. Cũng nên chú ý rằng, nếu
  công ty nói là max 2000 USD hay upto 2000 USD, thường nghĩa là họ chỉ trả max
  1 nghìn mốt.&lt;/li&gt;
&lt;li&gt;Hỏi rõ lương làm Gross hay Net, search internet để hiểu rõ sự khác nhau này.&lt;/li&gt;
&lt;li&gt;Nhận 80% lương thử việc là điều thường thấy, nhưng không phải bắt buộc.
  Ít khi thấy ở các vị trí câp cao vài nghìn USD.&lt;/li&gt;
&lt;li&gt;Không phải "giỏi" kỹ thuật hơn thì lương cao hơn. Có chăng lý do lương A cao
  hơn B dù trình độ "ngang nhau" là bởi A giỏi thương lượng/đàm phán/thỏa
  thuận hơn B.&lt;/li&gt;
&lt;li&gt;Các câu hỏi mang tính chất dìm hàng như bằng cấp (đặc biệt khi bạn không tốt
  nghiệp đại học ngành công nghệ thông tin) nhằm làm căn cứ để giảm lương của bạn.
  Chỉ một số các công ty nhà nước/ngân hàng mới thực sự đòi hỏi bằng cấp. Hay
  khi phải cân nhấc 2 ứng viên ngang ngửa, bằng mới được lôi ra.&lt;/li&gt;
&lt;li&gt;Mức lương tối thiểu cho một lập trình viên Python biết làm web Flask hay
  dùng pandas hay viết crawler (hay tốt nghiệp &lt;a href="https://pymi.vn"&gt;Pymi.vn&lt;/a&gt;)
  là 8-10 triệu VND tại năm 2019. Sau 1 năm kinh nghiệm,
  con số này có thể gấp đôi, hoặc hơn.&lt;/li&gt;
&lt;li&gt;Các yêu cầu ghi trong JD là yêu cầu lý tưởng, chứ không phải điều kiện tiên
  quyết. Như 2 năm kinh nghiệm hay bằng đại học, hay 10 dòng yêu cầu khác.&lt;/li&gt;
&lt;li&gt;Trượt phỏng vấn 10 công ty: chúc mừng, bạn đã đánh 10 con quái và lên level 2.
  Thất bại là một phần tất yếu của thành công.
  Quan trọng là về biết rút kinh nghiệm, học những câu trả lời sai để lần sau
  còn làm đúng. Rồi bạn sẽ ngạc nhiên khi nhiều công ty/nhiều vòng phỏng vấn
  có "kho" câu hỏi trùng nhau.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Kỹ thuật&lt;/h2&gt;
&lt;p&gt;Bên trên toàn nói chuyện thoả thuận, tiền, thế còn các câu hỏi kỹ thuật thì sao?
các thuật toán cao siêu thì thế nào???&lt;/p&gt;
&lt;p&gt;Thực ra những vấn đề kỹ thuật không mang nhiều tính chất quyết định. Đúng như
táo quân nói, những thứ khác quan trọng hơn:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;quan hệ: rất nhiều người đi làm nhờ quan hệ, quan hệ ở đây không có nghĩa xấu
  như trong táo quân. Một lập trình viên giỏi chưa chắc có việc nhanh bằng
  một thanh niên biết code có nhiều môi quen biết, biết chỗ nào đang cần người.
  Nhiều mối ngon cũng đến do ông A chỉ biết thằng B làm Python, chả biết thằng
  nào khác cả. Lên mạng đi tuyển lại phải đau đầu với chuyện tuyển dụng/ cạnh
  tranh với hàng trăm công ty khác khi dev Python giờ hot như cồn và khẩu trang.&lt;/li&gt;
&lt;li&gt;may mắn: ôn đúng bài, bị hỏi toàn cái biết, hay đẹp trai cũng là một dạng may
  mắn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Những điều không phải là thất bại&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Các công ty phỏng vấn Python nhưng lại toàn hỏi C, Java, PHP... Nếu là một
  lập trình viên Python / backend, thì khi phỏng vấn tôi cần trả lời các vấn
  đề về Python, hay SQL, hay thậm chí tool làm việc như git, docker. Nhưng
  chẳng có lý do gì lại hỏi C array so sánh với Python list, hay Java/C#
  design pattern cho Python cả. Khi gặp những công ty hỏi kiểu này, bạn không trả
  lời được thì đừng trách mình "dốt". Nếu có được hỏi lại, hãy hỏi họ giá trị gì
  mang lại khi họ hỏi những câu đó với 1 lập trình viên Python. Hoặc bạn sẽ
  biết phía bên kia không biết gì về Python (không hiếm với các công ty outsource),
  hoặc sẽ học được điều gì đó.&lt;/li&gt;
&lt;li&gt;Trượt các câu hỏi thuật toán/IQ: các câu hỏi này rất đa dạng, trừ khi bạn
  dành đủ 6 tháng 2 năm cày luyện Cracking Coding Interview để thi vào Google,
  cày leetcode... thì đừng mong trả lời được mọi câu hỏi thuật toán lắt léo.
  Và nên nhớ, công ty bạn đang nộp vào, không phải là Google.
  Quy trình phỏng vấn dùng các câu hỏi thuật toán &lt;a href="https://news.ycombinator.com/item?id=22331804"&gt;hiện được xem như một quy
  trình nhiều lỗ hổng&lt;/a&gt;,
  bởi nó không phải 1 cách tốt để dánh giá ứng viên.&lt;/li&gt;
&lt;li&gt;Trượt các câu hỏi lý thuyết trong trường đại học: bên tuyển dụng thường hay hỏi
  kể tên các thuật toán sort bạn biết: bubble sort, quick sort, merge sort,
  heapsort, insert sort, hay cả &lt;a href="https://www.familug.org/2014/12/algorithm-sleep-sort.html"&gt;sleep sort&lt;/a&gt;
  thế nhưng chưa chắc họ đã biết tên thuật toán sort trong Python (list.sort)
  tên là gì? (it's Tim sort) và khả năng cao khác, là họ không giải thích được khi
  nào bạn phải dùng các thuật toán trường học trên thay vì Tim sort có sẵn
  trong Python.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fun fact&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Có những công ty thực hiện đến hơn 10 cuộc phỏng vấn (phỏng vấn lần lượt từng
  người trong team), kéo dài vài tháng.&lt;/li&gt;
&lt;li&gt;Có nhiều công ty "top", "hot", "đỉnh", "chỉ tuyển người giỏi nhất", nhưng trả
  mức thù lao mà chỗ nào cũng trả được.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Dặn dò&lt;/h2&gt;
&lt;p&gt;Nhớ làm thành thạo bài tập của &lt;a href="https://pymi.vn"&gt;pymi&lt;/a&gt; và đọc &lt;a href="https://faq.pymi.vn/"&gt;PYMI interview
FAQs&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Phỏng vấn là một kỹ năng, giống như code, để giỏi, cần phải rèn luyện nhiều.
Phỏng vấn là một cuộc đấu trí, thậm chí chẳng có câu hỏi kỹ thuật chi tiết nào
được đưa ra mà ứng viên vẫn hoàn thành xuất sắc cuộc phỏng vấn.&lt;/p&gt;
&lt;p&gt;Nếu lần đầu đi nộp CV, hãy rải thảm tất cả các công ty, hãy đi phỏng vấn thật
nhiều, trượt thật nhiều, rút kinh nghiệm, rồi sau 10 lần phỏng vấn, kiểu gì
chả trúng 1. Còn nếu đã đi làm, trừ khi ấm chỗ leader/trưởng phòng/giám đốc/CTO/
CBE thì mỗi mùa xuân hạ thu đông cũng nên đi phỏng vấn 1 lần để biết trình độ
mình ở đâu, và đáng giá được bao nhiêu nào.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="interview"></category><category term="xin việc"></category><category term="phỏng vấn"></category><category term="HR"></category><category term="HH"></category></entry><entry><title>Dùng Python như các CLI tool</title><link href="http://pp.pymi.vn/article/pycli/" rel="alternate"></link><published>2020-03-24T00:00:00+07:00</published><updated>2020-03-24T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-24:/article/pycli/</id><summary type="html">&lt;p&gt;Python vốn được dùng để viết script, code trong file nhưng vẫn tỏa sáng khi gõ trong command line&lt;/p&gt;</summary><content type="html">&lt;p&gt;Những "hacker" trên dòng lệnh luôn gõ nhoay nhoáy các &lt;a href="https://www.familug.org/search/label/CLI"&gt;"command
line"&lt;/a&gt; để xử lý text: &lt;a href="https://www.familug.org/search/label/CCGU"&gt;grep, cut,
uniq, sort,...&lt;/a&gt; hay đôi khi chơi hẳn
sed hoặc &lt;a href="https://pp.pymi.vn/article/awk/"&gt;AWK&lt;/a&gt;, thậm chí Perl5.&lt;/p&gt;
&lt;p&gt;Thời xưa, Perl5 vốn là công cụ số một của các
&lt;a href="https://www.familug.org/2015/01/e-tro-thanh-linux-sysadmin.html"&gt;SysAdmin&lt;/a&gt;,
khi mà Python vẫn chưa phổ biến do quá sạch đẹp nhưng cũng hơi "dài dòng" (so
với Perl). Muốn làm gì với Python cũng phải viết ra 1 file, rồi chmod
a+x rồi mới chạy được. Perl thì có cả ngàn phép biến hóa chỉ bằng 1 dòng, gọi
là &lt;a href="https://duckduckgo.com/?q=perl+one-liners&amp;amp;t=ffab&amp;amp;ia=web"&gt;one-liner&lt;/a&gt; hay
trên &lt;a href="https://en.wikipedia.org/wiki/One-liner_program#Perl"&gt;Wikipedia&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;lne&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;print if $_ eq reverse&amp;#39;&lt;/span&gt; &lt;span class="sr"&gt;/usr/s&lt;/span&gt;&lt;span class="n"&gt;hare&lt;/span&gt;&lt;span class="sr"&gt;/dict/&lt;/span&gt;&lt;span class="n"&gt;american&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;english&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;1 dòng trên để tìm ra các từ "palindrome' (ngược xuôi như nhau).&lt;/p&gt;
&lt;h2&gt;Python&lt;/h2&gt;
&lt;h3&gt;Python 1-liner&lt;/h3&gt;
&lt;p&gt;Python 1-liner vốn không ngắn như mong đợi, do code Python
nhấn mạnh vào sự rõ ràng dễ đọc, nên không có các ký tự bí hiểm &lt;code&gt;$_&lt;/code&gt; như Perl. Viết
Python 1 dòng dùng option &lt;code&gt;-c&lt;/code&gt; như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;import math; print(math.sqrt(2**1000))&amp;#39;&lt;/span&gt;
&lt;span class="mf"&gt;3.273390607896142e+150&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Các dòng không cần phải xuống dòng mà dùng dấu &lt;code&gt;;&lt;/code&gt; để ngăn cách. Nhưng viết
&lt;code&gt;for&lt;/code&gt; hay &lt;code&gt;if&lt;/code&gt; thì ... hơi khó.&lt;/p&gt;
&lt;h3&gt;Python nhiều dòng&lt;/h3&gt;
&lt;p&gt;Cách này đơn giản hơn, viêt code thành nhiều dòng, ý hệt như code trong file. Dùng dấu single quote &lt;code&gt;'&lt;/code&gt; rồi enter để gõ code, sau đó kết thúc bằng dầu single quote &lt;code&gt;'&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="nb"&gt;sum&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="mi"&gt;45&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ví dụ sau lấy ra Shell của user &lt;code&gt;root&lt;/code&gt; ghi trong file /etc/passwd, viết HOA:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;BIN&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;BASH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay đếm số ký tự kết quả trên bằng lệnh &lt;code&gt;wc&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39; | wc -c&lt;/span&gt;
&lt;span class="mi"&gt;11&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Không phải 1 dòng, nhưng đẹp hơn 1 dòng, và hoàn toàn hợp lý.&lt;/p&gt;
&lt;p&gt;Ví dụ khác để in JSON đẹp:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{&amp;quot;name&amp;quot;: &amp;quot;PyMIers&amp;quot;, &amp;quot;year&amp;quot;: 2020}&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;indent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PyMIers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;year&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2020&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hay dùng module có sẵn:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{&amp;quot;name&amp;quot;: &amp;quot;PyMIers&amp;quot;, &amp;quot;year&amp;quot;: 2020}&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tool&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PyMIers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;year&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2020&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hoặc tìm các Palindromes trong file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;[::&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39; &amp;lt; /usr/share/dict/american-english | head -5&lt;/span&gt;
&lt;span class="n"&gt;ada&lt;/span&gt;
&lt;span class="n"&gt;ana&lt;/span&gt;
&lt;span class="n"&gt;anna&lt;/span&gt;
&lt;span class="n"&gt;ara&lt;/span&gt;
&lt;span class="n"&gt;ava&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cách khác:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;fileinput&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;fileinput&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;[::&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39; /usr/share/dict/american-english | head -3&lt;/span&gt;
&lt;span class="n"&gt;ada&lt;/span&gt;
&lt;span class="n"&gt;ana&lt;/span&gt;
&lt;span class="n"&gt;anna&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Thử thách&lt;/h3&gt;
&lt;p&gt;Viết lại ví dụ sau chỉ dùng các command line, không dùng Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;BIN&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;BASH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Pro tips&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;trong code không dùng dấu &lt;code&gt;'&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;không được gõ sai&lt;/strong&gt; vì sửa lại hơi mệt, nếu không có khả năng này,
  hãy viết code vào file.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Python dài và chất, đừng ngại dùng khi gõ CLI.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="CLI"></category></entry><entry><title>Lib requests có gì hay mà dùng thay urllib</title><link href="http://pp.pymi.vn/article/requests/" rel="alternate"></link><published>2020-03-18T00:00:00+07:00</published><updated>2020-03-18T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-18:/article/requests/</id><summary type="html">&lt;p&gt;Giải mã thành công của thư viện được dùng nhiều nhất trong Python&lt;/p&gt;</summary><content type="html">&lt;p&gt;Python là một ngôn ngữ già, có thể bạn chưa biết, &lt;a href="https://www.familug.org/2016/02/python-python-tuoi-gi.html"&gt;Python tuổi
dê&lt;/a&gt;
Python ra đời &lt;a href="https://en.wikipedia.org/wiki/History_of_the_World_Wide_Web#1980%E2%80%931991:_Invention_and_implementation"&gt;từ thời mới có
HTTP&lt;/a&gt;,
và nổi tiếng là &lt;a href="https://xkcd.com/353/"&gt;hỗ trợ tận răng&lt;/a&gt;, nên không
có gì lạ nếu Python có kèm sẵn thư viện standard để thực hiện HTTP request
với tên &lt;code&gt;urllib&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Vậy nhưng khi lên mạng tìm kiếm hay hỏi quanh đây: &lt;strong&gt;dùng gì để gọi HTTP
trong Python?&lt;/strong&gt;, câu trả lời phần lớn đều là cài: &lt;code&gt;pip install requests&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Requests không phải có từ ngày Python xuất hiện, nhưng vào thời Python 2.6 2.7
(cỡ 2012-2013), requests đã rất phổ biến, ví dụ như câu trả lời &lt;a href="https://stackoverflow.com/a/15869929/807703"&gt;trên
StackOverFlow năm 2013&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Requests (có chữ s) xuất hiện với một API cực kỳ thân thiệt, với motto (khẩu
hiệu):
&lt;strong&gt;Python HTTP for Humans&lt;/strong&gt; do &lt;code&gt;urllib&lt;/code&gt; có sẵn trong Python2 quá rắc rối.
API của requests nổi tiếng đến mức &lt;a href="https://github.com/levigross/grequests"&gt;gần như ngôn ngữ lập trình nào cũng
có một thư viện "nhái" requests của
Python&lt;/a&gt;, nó quá đơn giản, tới mức
... trước đây không thư viện nào từng làm vậy.&lt;/p&gt;
&lt;p&gt;(API của thư viện là các function mà thư viện đó public cho người dùng sử dụng,
ví dụ requests có: requests.get, requests.post.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="requests logo" src="https://raw.githubusercontent.com/psf/requests/master/ext/requests-logo.png"&gt;&lt;/p&gt;
&lt;p&gt;Sau gần chục năm phát triển, &lt;code&gt;requests&lt;/code&gt; giờ đã nằm dưới mái nhà &lt;a href="https://github.com/psf/requests/"&gt;Python Software
Foundation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Với các tính năng được quảng cáo ở bản &lt;a href="https://github.com/psf/requests/tree/v1.0.0"&gt;v1.0.0, cuối năm 2012&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    International Domains and URLs
    Keep-Alive &amp;amp; Connection Pooling
    Sessions with Cookie Persistence
    Browser-style SSL Verification
    Basic/Digest Authentication
    Elegant Key/Value Cookies
    Automatic Decompression
    Unicode Response Bodies
    Multipart File Uploads
    Connection Timeouts
    Thread-safety
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có thể dễ đoán rằng những tính năng được quảng cáo trên chính là những gì
&lt;code&gt;urllib&lt;/code&gt; Python thời đó chưa hỗ trợ (trong Python còn có cả thư viện tên
&lt;code&gt;urllib2&lt;/code&gt;... để thêm phần phức tạp). Nhưng với Python 3.5 trở đi, rất nhiều
trong số trên đã được hỗ trợ trong &lt;code&gt;urllib&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Còn đây là các tính năng được quảng cáo ở &lt;a href="https://github.com/psf/requests/blob/v2.23.0/README.md#supported-features--bestpractices"&gt;phiên bản mới nhất&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Keep-Alive &amp;amp; Connection Pooling
    International Domains and URLs
    Sessions with Cookie Persistence
    Browser-style SSL Verification
    Automatic Content Decoding
    Basic/Digest Authentication
    Elegant Key/Value Cookies
    Automatic Decompression
    Unicode Response Bodies
    HTTP(S) Proxy Support
    Multipart File Uploads
    Streaming Downloads
    Connection Timeouts
    Chunked Requests
    .netrc Support
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu bạn đọc các tính năng này mà không hiểu gì, thì nó chỉ chứng minh một điều
là HTTP là một giao thức rất lằng nhằng và phức tạp.
Đáng kể nhất có:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Browser-style SSL Verification: liên quan tới SSL - tức là bảo mật. &lt;code&gt;urllib&lt;/code&gt;
mãi tới &lt;a href="https://docs.python.org/3/library/http.client.html#http.client.HTTPSConnection"&gt;Python 3.4.3 mới thực hiện kiểm tra SSL một cách mặc
định&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Changed in version 3.4.3: This class now performs all the necessary
certificate and hostname checks by default. To revert to the previous,
unverified, behavior ssl._create_unverified_context() can be passed to
the context parameter.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Connection Pooling: bình thường khi viết code truy cập vào 1 website, ta
có thể nghĩ đơn giản là requests.get rồi lấy kết quả là xong chuyện, hết phiên.
Nếu muốn truy cập trang khác cùng website đó, ta lại requests.get để truy cập
mới. Phía dưới &lt;code&gt;requests.get&lt;/code&gt; thực hiện tạo 1 &lt;code&gt;TCP connection&lt;/code&gt;, sau đó mới gửi
&lt;code&gt;HTTP request&lt;/code&gt; qua &lt;code&gt;connection&lt;/code&gt; này. Việc tạo
connection là công việc khá tốn kém (CPU, thời gian), đặc biệt với HTTPS,
tạo SSL connection còn tốn hơn nhiều lần. Do vậy, để
tăng hiệu năng, requests sẽ tự giữ lại &lt;code&gt;connection&lt;/code&gt; và dùng lại để truy cập
website nếu như các yêu cầu sau đó cùng website, khác page. Xem code tại
&lt;a href="https://github.com/psf/requests/blob/v2.23.0/requests/adapters.py#L129"&gt;adapters.py&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Việc này ảnh hưởng tới hiệu năng, nhưng không ảnh hưởng gì nếu bạn chỉ gọi
1 request tới mỗi website.&lt;/p&gt;
&lt;h2&gt;Đọc code requests&lt;/h2&gt;
&lt;p&gt;Lib &lt;code&gt;requests&lt;/code&gt; thuộc loại nhỏ, tổng cộng 5000 dòng gồm rất nhiều comment.
Nó tận dụng các thư viện ngoài khác thay vì tự làm
tất cả: &lt;code&gt;urllib3&lt;/code&gt; để thực hiện connection pooling, thực hiện HTTP requests,
dùng &lt;code&gt;certifi&lt;/code&gt; để cung cấp các SSL certificate mới nhất như các trình duyệt.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wc -l *&lt;span class="p"&gt;|&lt;/span&gt; sort -nr
wc: __pycache__: Is a directory
   &lt;span class="m"&gt;5049&lt;/span&gt; total
    &lt;span class="m"&gt;982&lt;/span&gt; utils.py
    &lt;span class="m"&gt;954&lt;/span&gt; models.py
    &lt;span class="m"&gt;767&lt;/span&gt; sessions.py
    &lt;span class="m"&gt;549&lt;/span&gt; cookies.py
    &lt;span class="m"&gt;533&lt;/span&gt; adapters.py
    &lt;span class="m"&gt;305&lt;/span&gt; auth.py
    &lt;span class="m"&gt;161&lt;/span&gt; api.py
    &lt;span class="m"&gt;131&lt;/span&gt; __init__.py
    &lt;span class="m"&gt;126&lt;/span&gt; exceptions.py
    &lt;span class="m"&gt;123&lt;/span&gt; status_codes.py
    &lt;span class="m"&gt;119&lt;/span&gt; help.py
    &lt;span class="m"&gt;105&lt;/span&gt; structures.py
     &lt;span class="m"&gt;72&lt;/span&gt; compat.py
     &lt;span class="m"&gt;42&lt;/span&gt; _internal_utils.py
     &lt;span class="m"&gt;34&lt;/span&gt; hooks.py
     &lt;span class="m"&gt;18&lt;/span&gt; certs.py
     &lt;span class="m"&gt;14&lt;/span&gt; __version__.py
     &lt;span class="m"&gt;14&lt;/span&gt; packages.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Phần API đơn giản lừng danh nằm trong file &lt;code&gt;api.py&lt;/code&gt;, trích bỏ comment:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;sessions&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# By using the &amp;#39;with&amp;#39; statement we are sure the session is closed, thus we&lt;/span&gt;
    &lt;span class="c1"&gt;# avoid leaving sockets open which can trigger a ResourceWarning in some&lt;/span&gt;
    &lt;span class="c1"&gt;# cases, and look like a memory leak in others.&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;sessions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;allow_redirects&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;get&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;options&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;allow_redirects&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;options&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;allow_redirects&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;head&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;post&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;put&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;patch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;patch&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;delete&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;urllib3&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://urllib3.readthedocs.io/en/latest/"&gt;&lt;code&gt;urllib3&lt;/code&gt;&lt;/a&gt; là dependency quan trọng
của &lt;code&gt;requests&lt;/code&gt;, nó đảm nhận những công việc nặng nề:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;urllib3 brings many critical features that are missing from the Python
standard libraries:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Thread safety.
Connection pooling.
Client-side SSL/TLS verification.
File uploads with multipart encoding.
Helpers for retrying requests and dealing with HTTP redirects.
Support for gzip and deflate encoding.
Proxy support for HTTP and SOCKS.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code mẫu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib3&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PoolManager&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://httpbin.org/robots.txt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;
&lt;span class="mi"&gt;200&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;User-agent: *&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;Disallow: /deny&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;urllib&lt;/h2&gt;
&lt;p&gt;urllib và urllib2 thời Python2.7 là những em gái dính lời nguyền mà ai cũng
muốn tha thứ. Nhưng ở Python 3.6+, việc dùng urllib không còn quá phức tạp,
hãy coi nó như 1 file, nhớ đóng file, hoặc dùng &lt;code&gt;with&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;urllib đã kiểm tra SSL certificate&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Nov&lt;/span&gt;  &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;02&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;GCC&lt;/span&gt; &lt;span class="mf"&gt;8.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;linux&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://dantri.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/urllib/request.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1318&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;do_open&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_sslobj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_handshake&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SSLError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SSL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CERTIFICATE_VERIFY_FAILED&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="n"&gt;verify&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;852&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;URLError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;URLError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SSL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CERTIFICATE_VERIFY_FAILED&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="n"&gt;verify&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;852&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kết quả tương tự khi dùng &lt;code&gt;requests&lt;/code&gt; do URL &lt;code&gt;https://dantri.com&lt;/code&gt; SSL certificate
đẫ hết hạn &lt;code&gt;Expire: January 19, 2020&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://dantri.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/home/hvn/py3/lib/python3.6/site-packages/urllib3/connectionpool.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;672&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/lib/python3.6/ssl.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;689&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;do_handshake&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_sslobj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_handshake&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SSLError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SSL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CERTIFICATE_VERIFY_FAILED&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="n"&gt;verify&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_ssl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;852&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;urllib redirect ngon lành&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://gmail.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;https://accounts.google.com/ServiceLogin?service=mail&amp;amp;passive=true&amp;amp;rm=false&amp;amp;continue=https://mail.google.com/mail/&amp;amp;ss=1&amp;amp;scc=1&amp;amp;ltmpl=default&amp;amp;ltmplcache=2&amp;amp;emr=1&amp;amp;osid=1&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://gmail.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;https://accounts.google.com/ServiceLogin?service=mail&amp;amp;passive=true&amp;amp;rm=false&amp;amp;continue=https://mail.google.com/mail/&amp;amp;ss=1&amp;amp;scc=1&amp;amp;ltmpl=default&amp;amp;ltmplcache=2&amp;amp;emr=1&amp;amp;osid=1&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;urllib với JSON API&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://httpbin.org/ip&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;171.247.169.69&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;   &lt;span class="n"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://httpbin.org/post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;POST&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;           &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pymi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;since&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2015&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;           &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;           &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pymi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;since&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2015&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Tra cứu thông tin COVID-19&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://corona-stats.online/IT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="err"&gt;╔═══════╤═══════╤═══════════╤═══════════╤════════╤════════╤═════════════╤═════════════╤═════════╤══════════╗&lt;/span&gt;
&lt;span class="err"&gt;║&lt;/span&gt;       &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Confirmed&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Recovered&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Deaths&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Active&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Mortality&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Recovered&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;Day&lt;/span&gt; &lt;span class="err"&gt;▲&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;Week&lt;/span&gt; &lt;span class="err"&gt;▲&lt;/span&gt; &lt;span class="err"&gt;║&lt;/span&gt;
&lt;span class="err"&gt;╟───────┼───────┼───────────┼───────────┼────────┼────────┼─────────────┼─────────────┼─────────┼──────────╢&lt;/span&gt;
&lt;span class="err"&gt;║&lt;/span&gt; &lt;span class="n"&gt;Italy&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="n"&gt;Total&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt;    &lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;506&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;941&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;503&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mo"&gt;062&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt;        &lt;span class="mf"&gt;7.94&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt;        &lt;span class="mf"&gt;9.33&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;526&lt;/span&gt; &lt;span class="err"&gt;▲&lt;/span&gt; &lt;span class="err"&gt;│&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;357&lt;/span&gt; &lt;span class="err"&gt;▲&lt;/span&gt; &lt;span class="err"&gt;║&lt;/span&gt;
&lt;span class="err"&gt;╚═══════╧═══════╧═══════════╧═══════════╧════════╧════════╧═════════════╧═════════════╧═════════╧══════════╝&lt;/span&gt;

&lt;span class="n"&gt;Stay&lt;/span&gt; &lt;span class="n"&gt;safe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Stay&lt;/span&gt; &lt;span class="n"&gt;inside&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Code&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sagarkarira&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;coronavirus&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracker&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;
&lt;span class="n"&gt;Twitter&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;twitter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ekrysis&lt;/span&gt;

&lt;span class="n"&gt;Last&lt;/span&gt; &lt;span class="n"&gt;Updated&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Mar&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2020&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;03&lt;/span&gt; &lt;span class="n"&gt;UTC&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Có thể dùng &lt;code&gt;urllib&lt;/code&gt; khi script/chương trình chỉ truy cập mỗi website
một lần, dùng trong các script ngắn, hay khi không tiện cài &lt;code&gt;requests&lt;/code&gt;.
Nhớ sử dụng &lt;a href="https://requests.readthedocs.io/en/v2.9.1/user/advanced/#session-objects"&gt;&lt;code&gt;requests&lt;/code&gt; Session&lt;/a&gt;
khi truy cập 1 website nhiều lần để tăng hiệu năng.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Requests thành công vì sự đơn giản không thể hơn của nó, chứ không phải vì
kỹ thuật cao siêu phức tạp.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A designer knows he has achieved perfection not when there is nothing left to add, but when there is nothing left to take away.
The New Hacker's Dictionary - Eric S. Raymond,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nhớ mặc định là dùng &lt;code&gt;requests&lt;/code&gt;, nhưng không bị sốc khi thấy người ta dùng
&lt;code&gt;urllib&lt;/code&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="requests"></category><category term="urllib"></category><category term="HTTP"></category></entry><entry><title>Django dễ hơn Flask</title><link href="http://pp.pymi.vn/article/djangovsflask/" rel="alternate"></link><published>2020-03-16T00:00:00+07:00</published><updated>2020-03-16T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-16:/article/djangovsflask/</id><summary type="html">&lt;p&gt;Flask là một micro-framework, thường được xem như đơn giản hơn Django, nhưng nói vậy mà không phải vậy.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Django và Flask là hai web-framework phổ biến nhất - thành công nhất của Python.
Ngày này, khi nhìn các bảng tuyển dụng, sẽ thường thấy yêu cầu Django để làm web
nhưng Flask dần trở thành công cụ quen thuộc của giới làm data.
Nếu ai có hỏi "nên học cái nào" thì câu trả lời chuẩn nhất chỉ có một: nên học
cả hai.&lt;/p&gt;
&lt;h2&gt;Web framework là gì&lt;/h2&gt;
&lt;p&gt;Một framework là một bộ thư viện, thường gồm nhiều tính năng phục vụ đưa ra
sản phẩm cuối cùng chạm tới người dùng. Ví dụ &lt;code&gt;requests&lt;/code&gt; là một library,
chỉ cung cấp tính năng HTTP client, hay &lt;code&gt;bs4&lt;/code&gt; chỉ cung cấp tính năng bóc tách/
truy cập dữ liệu HTML, hay &lt;code&gt;sqlalchemy&lt;/code&gt; là library giúp truy cập và tương tác
với database, thì Flask/Django cung cấp một bộ khung kèm các "thư viện" để
làm ra một sản phẩm tới tay người dùng (trang web).
Frame trong tiếng Anh có nghĩa là "khung", framework cung cấp cái khung, lập
trình viên điền những thứ mình muốn vào đó, framework sẽ tự lo chạy. Vì vậy
khi dùng framework, sẽ có cảm giác như ta không biết nó hoạt động thế nào,
chỉ biết là điền đúng những thứ yêu cầu thì nó sẽ hoạt động.&lt;/p&gt;
&lt;p&gt;Django là framework đầy đủ (full-fledge), có đủ mọi thứ, nên sẽ càng có thêm
cảm giác ta chỉ điền chút xíu là nó tự chạy, mọi thứ đều có khuôn mẫu sẫn rồi.
Flask là micro-framework, chỉ có phần khung cơ bản, các phần còn lại cho phép
người dùng tùy chọn mà đắp vào, vậy nên có phần dễ hiểu hơn, ít phép màu hơn.&lt;/p&gt;
&lt;p&gt;Cũng vì sự khác biệt này, dẫn tới tài liệu trang chủ của 2 framework viết
rất khác nhau. Flask vào đời bằng một website dùng 7 dòng code, khiến người dùng
rất dễ học, dễ bắt đầu với sự đơn giản này. Còn Django lại dùng ví dụ phức tạp,
mặc định người dùng sẽ cần làm thứ "phức tạp" như vậy nên học thế cho quen.&lt;/p&gt;
&lt;p&gt;Thế nhưng nếu không dựa vào 2 cái tutorial đấy để đánh giá, liệu Django có
phức tạp hơn Flask, hay thậm chí còn đơn giản hơn? Bài nầy sẽ dựa trên 2 yếu
tố để so sánh: 1. số khái niệm bạn cần biết 2. số dòng code bạn cần viết.&lt;/p&gt;
&lt;p&gt;Bắt đầu.&lt;/p&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;h4&gt;Cài đặt Flask&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install flask
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Cài đặt Django&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kết quả: hòa, dễ như nhau: &lt;code&gt;Flask 1 - Django 1&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Viết một website hello world và hello mình&lt;/h3&gt;
&lt;h4&gt;Flask&lt;/h4&gt;
&lt;p&gt;Tạo 1 file tên bất kỳ nhưng tốt nhất đặt là &lt;code&gt;hello.py&lt;/code&gt; (tuyệt đối không đặt
là &lt;code&gt;flask.py&lt;/code&gt; do trùng tên flask)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;my website&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;hello_world&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Hello world&amp;quot;&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/hello/&amp;lt;string:name&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Hello {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy, &lt;a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#a-minimal-application"&gt;theo hướng dẫn trên trang chủ&lt;/a&gt;
(nếu dùng Windows vào xem lệnh tương ứng):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;FLASK_APP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;hello.py
$ flask run
 * Running on http://127.0.0.1:5000/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Điểm ấn tượng nhất ở đây là chỉ có 10 dòng, trong đúng 1 file, mà chạy thành
trang web.&lt;/p&gt;
&lt;p&gt;Tổng số thao tác phải làm: 3 - tạo 1 file, điền nội dung, gõ lệnh để chạy.&lt;/p&gt;
&lt;h4&gt;Django&lt;/h4&gt;
&lt;p&gt;Django không làm web trong 1 file, nó dùng các câu lệnh có sẵn để sinh ra các
file, tức ta chỉ phải gõ lệnh, chứ không phải gõ nhiều code.
Gõ 3 lệnh sau là chạy luôn trang web:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ django-admin startproject project1
$ &lt;span class="nb"&gt;cd&lt;/span&gt; project1/
$ ./manage.py startapp hello
$ ./manage.py runserver
Starting development server at http://127.0.0.1:8000/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ngay lập tức đã có trang web mẫu của Django - thậm chí chưa gõ tí code nào.
Để có kết quả giống Flask ở trên, cần sửa 2 file:&lt;/p&gt;
&lt;p&gt;File &lt;code&gt;hello/views.py&lt;/code&gt;, viết các function tương tự flask:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.http&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;hello_world&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello world&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File &lt;code&gt;project1/urls.py&lt;/code&gt; thêm 3 dòng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;hello&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;views&lt;/span&gt;

&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="c1"&gt;# có sẵn&lt;/span&gt;
    &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;admin/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urls&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;  &lt;span class="c1"&gt;# có sẵn&lt;/span&gt;
    &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hello_world&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello_world&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello/&amp;lt;str:name&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# có sẵn&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giờ chạy &lt;code&gt;./manage runserver&lt;/code&gt; sẽ có kết quả y hệt Flask.&lt;/p&gt;
&lt;h4&gt;So sánh thao tác&lt;/h4&gt;
&lt;p&gt;Tổng số dòng code phải thêm vào Django là 8 - cũng chính bằng số dòng Flask
phải viết - không tính dòng trống. Django phải chạy nhiều hơn 2 lệnh - nhưng
chỉ cần phải làm khi bắt đầu dự án. Flask viết code trong 1 file, còn Django
phải sửa 2 file. ở đây có thể xem như hòa nhau không bên nào hơn/kém quá cả.&lt;/p&gt;
&lt;h4&gt;So sánh khái niệm&lt;/h4&gt;
&lt;p&gt;Phần khác nhau chủ đạo giữa Django và Flask là cách ghi URL.
Người dùng Flask tạo một Flask object, đặt tên là app, sau đó sử dụng
&lt;code&gt;decorator&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;@app.route(&amp;quot;/hello/&amp;lt;string:name&amp;gt;&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;để gắn đường dẫn &lt;code&gt;/hello/name&lt;/code&gt; cho function ngay dưới nó (function hello).
Decorator không phải một khái niệm đơn giản ở đây, mặc dù người dùng có thể
cứ nhắm mắt rồi gõ &lt;code&gt;@&lt;/code&gt; theo và hiểu nôm na là gắn đường dẫn cũng được.&lt;/p&gt;
&lt;p&gt;Django chọn giải pháp ghép đường dẫn với function thông qua file &lt;code&gt;urls.py&lt;/code&gt;,
import module &lt;code&gt;views&lt;/code&gt; từ thư mục &lt;code&gt;hello/&lt;/code&gt; (tạo lúc chạy "startapp hello"),
sau đó gán đường dẫn bằng cách gọi function &lt;code&gt;path&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello/&amp;lt;str:name&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Dài dòng hơn Flask một chút là phải ghi &lt;code&gt;name="hello"&lt;/code&gt;, không có &lt;code&gt;/&lt;/code&gt; ở đầu URL,
và kiểu &lt;code&gt;str&lt;/code&gt; thì ghi là &lt;code&gt;str&lt;/code&gt; chứ không ghi &lt;code&gt;string&lt;/code&gt; như Flask.&lt;/p&gt;
&lt;p&gt;Khi mới bắt đầu, khó có thể thấy lý do Django viết riêng file &lt;code&gt;urls.py&lt;/code&gt; để làm
gì, khi mà flask @ lên đầu rất gọn ghẽ. Thì tới lúc có 20 URL bạn sẽ hiểu tại
sao. Làm thế nào để liệt kê tất cả URL trong app của mình? Các URL của Flask
rải rác khắc nơi, mỗi cái nằm trên đầu 1 function, nếu như mỗi function dài 50
dòng, thì việc tìm sẽ khá vất vả - hoặc phải dùng chức năng tìm kiếm, hoặc phải
có IDE để hỗ trợ. Còn với Django tất cả đều nằm gọn trong &lt;code&gt;urls.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Không hiểu tại sao Flask lại chọn &lt;code&gt;string&lt;/code&gt; để ám chỉ kiểu string trong Python,
vốn viết là &lt;code&gt;str&lt;/code&gt;, Django lại ghi thêm điểm ở đây.&lt;/p&gt;
&lt;p&gt;Có thể bạn đã biết, rằng không nhất thiết phải dùng &lt;code&gt;@&lt;/code&gt; trong Flask,
bởi decorator này chỉ làm đơn giản có 1 việc: giống Django. Thay vì viết hai
dòng &lt;code&gt;@app.route&lt;/code&gt; trên đầu function, viết hai dòng này SAU khi định nghĩa
các function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;app.add_url_rule(&amp;quot;/&amp;quot;, &amp;quot;hello_world&amp;quot;, hello_world)
app.add_url_rule(&amp;quot;/hello/&amp;lt;string:name&amp;gt;&amp;quot;, &amp;quot;hello&amp;quot;, hello)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đây chính làm điều mà &lt;code&gt;@app.route&lt;/code&gt; làm, như mô tả trong tài liệu của nó:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A decorator that is used to register a view function for a
given URL rule.  This does the same thing as :meth:&lt;code&gt;add_url_rule&lt;/code&gt;
but is intended for decorator usage::&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Chốt: Django gõ nhiều hơn 2 lệnh, sửa thêm 1 file, nhưng sử dụng ít khái niệm
cao cấp hơn Flask. Nếu dễ tính, thì cho là hòa, còn không Django dành chiến
thắng ở đây.&lt;/p&gt;
&lt;p&gt;Tỉ số: &lt;code&gt;2 - 2&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Thêm trang dùng template&lt;/h3&gt;
&lt;h4&gt;Flask&lt;/h4&gt;
&lt;p&gt;Tạo 1 thư mục tên &lt;code&gt;templates&lt;/code&gt; ngay cạnh file &lt;code&gt;hello.py&lt;/code&gt;, rồi tạo file
&lt;code&gt;index.html&lt;/code&gt; chứa code HTML và Jinja2 template.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;fw&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;frameworks&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;fw&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;b&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;fw&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
  &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;fw&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;
  &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code sửa thành&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;
&lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/web&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;frameworks&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;index.html&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;frameworks&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Flask&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Django&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Django&lt;/h4&gt;
&lt;p&gt;Tạo thư mục tên &lt;code&gt;templates/hello&lt;/code&gt; trong thư mục
&lt;code&gt;hello&lt;/code&gt;, sau đó tạo &lt;code&gt;index.html&lt;/code&gt; và nội dung copy y hệt phần template của Flask.&lt;/p&gt;
&lt;p&gt;Thêm function sau vào &lt;code&gt;hello/views.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chú ý render đã được import sẵn ở file view.py ngay khi tạo app&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;frameworks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;hello/index.html&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;frameworks&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Flask&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Django&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và thêm 1 dòng vào &lt;code&gt;project1/urls.py&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  path(&amp;#39;web&amp;#39;, views.frameworks, name=&amp;#39;frameworks&amp;#39;),
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ngoài ra phải thêm &lt;code&gt;'hello'&lt;/code&gt; vào file &lt;code&gt;project1/settings.py&lt;/code&gt;
Trong list &lt;code&gt;INSTALLED_APPS&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
     &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
     &lt;span class="s1"&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Phần này lại hòa, template mặc định của Flask là &lt;code&gt;jinja2&lt;/code&gt; tương đương với
Django template, kể cả cú pháp cũng rất giống nhau. Django phải thêm 1
dòng vào file &lt;code&gt;settings.py&lt;/code&gt; nhưng việc này cũng chỉ phải làm một lần duy nhất
(lẽ ra nên làm luôn sau khi createapp từ đầu).&lt;/p&gt;
&lt;h3&gt;Django app&lt;/h3&gt;
&lt;p&gt;Khi chạy lệnh &lt;code&gt;startproject&lt;/code&gt; ban đầu, nó sinh ra các file cần thiết cho một
dự án Django (&lt;code&gt;urls.py&lt;/code&gt;, &lt;code&gt;settings.py&lt;/code&gt;, &lt;code&gt;manager.py&lt;/code&gt; ..., và nó chỉ phải chạy
duy nhất 1 lần trong 1 dự án. Với Flask, bạn tạo thư mục bằng tay.&lt;/p&gt;
&lt;p&gt;Django đưa ra khái niệm có nhiều &lt;em&gt;app&lt;/em&gt; trong một dự án. Flask cũng có khái
niệm tương tự, gọi là &lt;a href="https://flask.palletsprojects.com/en/1.1.x/blueprints/"&gt;Blueprint&lt;/a&gt;.
Nó không cần thiết cho ví dụ 6-10 dòng, nhưng khi làm một website nhiều tính năng
thì blueprint là cách tổ chức chính thức của Flask, ngay cả trong bài tutorial
của Flask cũng dùng luôn khái niệm này. Như vậy chỉ khác nhau việc học trước
hay học sau, chứ không phải Flask thì không dùng tới.&lt;/p&gt;
&lt;p&gt;Flask không ép (không hướng dẫn) người dùng cách tổ chức code, khi dự án lớn
dần lên, có 3-5000 dòng code, ắt phải sinh ra file mới, phải sắp xếp, tổ chức
sao cho hợp lý - mà thế nào là hợp lý thì không phải ai cũng tìm ngay ra cách.
Dự án Flask khi rơi vào tay lập trình viên chưa có nhiều kinh nghiệm làm web
sẽ dẫn tới code mỗi thứ một nơi, đi tìm cũng thấy mệt. Flask không hướng dẫn
người dùng ngay từ đầu, nếu gặp phải người chưa có kinh nghiệm tổ chức, sẽ
trở thành vô tổ chức.&lt;/p&gt;
&lt;p&gt;Django bắt đầu bằng việc đặt mỗi thứ vào một nơi quy định sẵn, ban đầu có vẻ
hơi phiền phức, nhưng sự gọn gàng ngăn nắp sẽ trả lợi ích rõ ràng về sau.
Bạn có thể xem 10 dự án Django, cấu trúc đều như nhau, như mẫu của Django,
thì 10 dự án Flask mỗi cái một kiểu.&lt;/p&gt;
&lt;p&gt;Tỉ số: Flask 2 - Django 3&lt;/p&gt;
&lt;h3&gt;Thêm Database, thêm tính năng đăng nhập, thêm trang admin&lt;/h3&gt;
&lt;p&gt;Đến đây, việc của người dùng Django là mở tài liệu ra, đọc phần model, đọc phần
admin page rồi làm theo hướng dẫn, đầy đủ hàng trăm tính năng có sẵn, thì
người dùng Flask lại phải lo đi tìm:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dùng database nào? nếu dùng MySQL thì dùng driver nào?&lt;/li&gt;
&lt;li&gt;có dùng ORM không? nếu có thì phải học SQLAlchemy, tương đương với học Django ORM&lt;/li&gt;
&lt;li&gt;dùng SQLAlchemy rồi có phải dùng flask-sqlalchemy không (có).&lt;/li&gt;
&lt;li&gt;khi đổi schema table (thêm/bớt/sửa cột trong 1 SQL table) thì phải làm thế nào?
  MigrateDB thì dùng cái gì? (Flask-Migrate / alembic)&lt;/li&gt;
&lt;li&gt;Viết trang admin (ví dụ website quản lý sinh viên thì đây là trang để thêm/bớt/sửa/xóa sinh viên)
  thì viết ra sao (có thể dùng flask-admin)&lt;/li&gt;
&lt;li&gt;Đăng nhập thì làm thế nào? (flask-httpauth)&lt;/li&gt;
&lt;li&gt;Nhập/validate form thì dùng cái chi? (WTForm)&lt;/li&gt;
&lt;li&gt;... tiếp tục ...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=AdfSLq7XNoI" title="Tìm"&gt;&lt;img alt="Tìm MIN" src="http://img.youtube.com/vi/AdfSLq7XNoI/0.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tỉ số: Flask 2 - Django 4&lt;/p&gt;
&lt;h3&gt;Kết quả&lt;/h3&gt;
&lt;p&gt;Hòa.&lt;/p&gt;
&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;pip install django&lt;/code&gt; dùng ngay và luôn thôi.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Bài này không nói Django hoàn hảo, dùng cho mọi trường hợp. Ví dụ nếu
website của bạn không dùng database, không cần trang admin (như web của data
science) thì Flask nhanh, nhẹ hơn Django nhiều phần. Hay khi bạn biết mình đang
làm gì, biết đủ những thư viện để dùng ghép lại xịn hơn cả những gì Django
có sẵn, thì Flask là lựa chọn tuyệt hảo. Flask không phải đồ chơi, &lt;a href="https://eng.uber.com/building-tincup-microservice-implementation/"&gt;phần
core của Uber đã từng được viết bằng
Flask&lt;/a&gt;,
&lt;a href="https://airflow.apache.org/"&gt;Airflow&lt;/a&gt; - công cụ không thể thiếu trong các hệ
thống data cũng chính là một sản phẩm dùng Flask. Vậy nên, hãy học cả 2, nhé.
Và nhớ là, Django không hề khó như bạn tưởng.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="django"></category><category term="flask"></category></entry><entry><title>black - quên đi nỗi lo PEP8</title><link href="http://pp.pymi.vn/article/black/" rel="alternate"></link><published>2020-03-15T00:00:00+07:00</published><updated>2020-03-15T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-15:/article/black/</id><summary type="html">&lt;p&gt;Viết code Python thì phải chuẩn PEP8, nếu nó tự chuẩn thì sao? yeah!!!&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Code Python phải chuẩn PEP8&lt;/h2&gt;
&lt;p&gt;Ngay khi bạn mới làm quen với Python được vài tuần, mới biết tí for loop hay
function, PEP8 từ đâu đó sẽ hiện ra.
PEP8 là hướng dẫn viết code chuẩn Python, chứ không phải chuẩn C, Java, hay
không có chuẩn nào cả.
Nếu tự hoc code một mình, có khi giờ này bạn đã làm ra vài chục script, chạy
ầm ầm mà vẫn chưa 1 lần nghe PEP8. Tiêu chuẩn code là thứ chỉ hiện ra rõ ràng,
khi ta làm việc với người khác, chỉ sau vài function, sự mâu thuẫn về style
sẽ hiện ra ngay, và khi ông Chí Phèo không đồng ý với style của Bá Kiến, thì
cả 2 phải lên phường và thống nhất dùng chuẩn chung mà làng Vũ Đại đặt ra - hay
ở đây ta gọi là PEP8.&lt;/p&gt;
&lt;p&gt;PEP8 có thể xem chi tiết tại &lt;a href="https://www.python.org/dev/peps/pep-0008/"&gt;PEP0008&lt;/a&gt;
hay &lt;a href="https://pep8.org/"&gt;https://pep8.org/&lt;/a&gt;,
tiêu chuẩn PEP8 được chấp nhận trên toàn trái đất, thậm chí &lt;a href="https://medium.com/pymi/cia-d%C3%B9ng-python-r%E1%BA%A5t-nhi%E1%BB%81u-32144ecddd50"&gt;CIA&lt;/a&gt;,
Google cũng
chỉ sửa đi chút xíu, bởi nó là chuẩn hay, chuẩn tốt.&lt;/p&gt;
&lt;h2&gt;Chuyện đau đầu về xì tai (style)&lt;/h2&gt;
&lt;p&gt;Style vốn là một thứ dễ gây ra tranh cãi. Tôi thích kiểu Việt Nam dịu dàng,
anh thích kiểu Pháp say đắm, ông kia thích kiểu Mỹ mạnh mẽ và hùng hục. Vậy
ai là người sai?
Cuộc tranh cãi về style viết code đã kéo dài suốt từ ngày lập trình xuất hiện,
tới giờ vẫn chưa kết thúc. Bởi đã là style, thì khó nói chuyện đúng sai.&lt;/p&gt;
&lt;p&gt;Thế rồi mọi cuộc chơi vui, cũng phải đến hồi kết. Một ngôn ngữ lập trình đơn
giản xuất hiện với tên hai chữ &lt;code&gt;Go&lt;/code&gt; (sau để tránh nhầm lẫn thì gọi là Golang),
và để tăng thêm sự đơn giản, nó đi kèm
sẵn một chương trình với tên &lt;code&gt;gofmt&lt;/code&gt; (đọc là gâu phằm) - chương trình này sẽ
format tất cả code trong thư mục về một chuẩn mà nó đã quy định. Ban đầu,
người ta vẫn còn tranh cãi về việc bị ép style, nhưng rồi sau một hồi, lợi ích
của mỗi cái tôi đã sụp đổ trước lợi ích tập thể mà &lt;code&gt;gofmt&lt;/code&gt; mang lại: mọi đoạn
code đều trông giống nhau, khiến style không còn gì để tranh cãi, lập trình viên
nhìn code của thằng kia cũng giống như của mình, dễ đọc - dễ hiểu hơn, expert
hay newbie đều chung 1 style cả.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gofmt&lt;/code&gt; không phải là chương trình đầu tiên làm vậy, trước đây, trong cộng
đồng Python đã xuất hiện 1 chương trình tên &lt;code&gt;autopep8&lt;/code&gt; hay Google cũng có
&lt;a href="https://github.com/google/yapf"&gt;YAPF&lt;/a&gt;. Nhưng &lt;code&gt;Go&lt;/code&gt; là ngôn ngữ đầu tiên mang
code formatter vào chính thống, chính thức chấm dứt cuộc chiến vô bổ về style
kéo dài vài thập kỷ. Để rồi từ đó, các ngôn ngữ lập trình khác đua nhau học theo
như &lt;a href="https://github.com/rust-lang/rustfmt"&gt;Rust&lt;/a&gt;,
&lt;a href="https://elixir-lang.org/blog/2018/01/17/elixir-v1-6-0-released/"&gt;Elixir&lt;/a&gt;
và Python thì có &lt;a href="https://github.com/psf/black"&gt;black&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Không có giải pháp nào để giải quyết 1 vấn đề tốt hơn là làm cho nó biến mất.&lt;/p&gt;
&lt;h2&gt;black là gì&lt;/h2&gt;
&lt;p&gt;Black là một câu lệnh cài bằng pip: &lt;code&gt;pip install black&lt;/code&gt;, yêu cầu Python3.6 trở
lên mới chạy. &lt;code&gt;black&lt;/code&gt; xuất hiện như một project của một lập trình viên nào đó
trên in tơ nét, sau vài năm trở nên cực kỳ phổ biến, và giờ đã chính thức
được nằm dưới mái nhà PSF (Python Software Foundation) cùng với &lt;code&gt;requests&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/psf/black/blob/master/black.py"&gt;https://github.com/psf/black/blob/master/black.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Code của black chỉ vọn vẹn 4000 dòng, sử dụng các tính năng mới nhất của Python
như f-string, type annotation, asyncio...
(vì thế nên yêu cầu Python3.6+ để chạy, mặc dù vẫn có thể format code 2.7)&lt;/p&gt;
&lt;h2&gt;Dùng black để format code Python&lt;/h2&gt;
&lt;p&gt;Ví dụ có 1 file foo.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def sum_two(a,b):
    c= a  + b


    return c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu thành thạo PEP8, thấy ngay có 4 chỗ phải sửa ở đây:
&lt;code&gt;a,b&lt;/code&gt; thiếu dấu space sau &lt;code&gt;,&lt;/code&gt;, &lt;code&gt;c&lt;/code&gt; thiếu dấu space theo sau, sau &lt;code&gt;a&lt;/code&gt; thừa 1
space, thừa 1 dòng
trống trước return. Vậy chỉ 3 dòng code, người review phải gõ ra 4 "vấn đề"
về style, và người code ra 3 dòng này, khi đọc review cũng chẳng vui vẻ gì,
kể cả người ta nói đúng.&lt;/p&gt;
&lt;p&gt;Chạy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ black foo.py
reformatted foo.py
All &lt;span class="k"&gt;done&lt;/span&gt;! ✨ 🍰 ✨
&lt;span class="m"&gt;1&lt;/span&gt; file reformatted.

$ cat foo.py
def sum_two&lt;span class="o"&gt;(&lt;/span&gt;a, b&lt;span class="o"&gt;)&lt;/span&gt;:
    &lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; a + b

    &lt;span class="k"&gt;return&lt;/span&gt; c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đẹp, chuẩn, ngon! Không còn gì mong đợi thêm.
black có nhiều option để chỉnh style cho phù hợp với tiêu chuẩn của bạn,
hay dùng nhất là để set độ dài của 1 dòng, vốn là 79 ký tự theo chuẩn PEP8,
thì black mặc định là 88:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  -l, --line-length INTEGER       How many characters per line to allow.
                                  &lt;span class="o"&gt;[&lt;/span&gt;default: &lt;span class="m"&gt;88&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bạn có thể gọi &lt;code&gt;black -l79 .&lt;/code&gt; để theo PEP8.&lt;/p&gt;
&lt;h2&gt;Hành động của chúng ta&lt;/h2&gt;
&lt;p&gt;Đã đến lúc để quên đi việc format code bằng tay, nhớ vài chục tiêu chuẩn
của PEP8, format code hãy để cho đen (black) không vâu lo - việc này để
đen không vâu lo.
Thêm dòng này vào &lt;code&gt;Makefile&lt;/code&gt; của bạn:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;black&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;l79&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay cài đặt text editor/IDE tự động chạy &lt;code&gt;black&lt;/code&gt; sau mỗi lần save code.&lt;/p&gt;
&lt;p&gt;Thêm dòng sau vào CI để bắt quả tang thằng nào không dùng black:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;black --check .
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Black sẽ thông báo các file chưa chuẩn format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ black --check .
would reformat /home/hvn/me/people/content/mypy_simple.py
would reformat /home/hvn/me/people/publishconf.py
would reformat /home/hvn/me/people/pelicanconf.py
would reformat /home/hvn/me/people/fabfile.py
Oh no! 💥 💔 💥
&lt;span class="m"&gt;4&lt;/span&gt; files would be reformatted, &lt;span class="m"&gt;1&lt;/span&gt; file would be left unchanged.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Hãy dùng &lt;code&gt;black&lt;/code&gt;! Và đừng quên share bài viết này, để cộng đồng code Python
không còn mất thời gian ít bổ.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="black"></category><category term="formatter"></category></entry><entry><title>Mypy - là trai hay là gái?</title><link href="http://pp.pymi.vn/article/mypy/" rel="alternate"></link><published>2020-03-10T00:00:00+07:00</published><updated>2020-03-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-10:/article/mypy/</id><summary type="html">&lt;p&gt;Là bạn hay là bè? là str hay int? Thêm type cho Python code mà không ho, không sốt, không toang.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Vài ba năm gần đây, làng Vũ Trụ rộn lên trào lưu thêm "type" vào các ngôn ngữ lập trình dynamic typing.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration"&gt;PHP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.typescriptlang.org/"&gt;JavaScript|TypeScript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python đã già nhưng vẫn đú, cũng không bỏ lỡ cuộc đu trend này.
Kết quả là ngày hôm nay, bạn đã có thể thêm type vào code Python -
nếu muốn - như &lt;a href="https://blogs.dropbox.com/tech/2019/09/our-journey-to-type-checking-4-million-lines-of-python/"&gt;DropBox&lt;/a&gt;, &lt;a href="https://instagram-engineering.com/let-your-code-type-hint-itself-introducing-open-source-monkeytype-a855c7284881"&gt;Instagram&lt;/a&gt;... . Python chính thức thêm &lt;a href="https://www.python.org/dev/peps/pep-0484/"&gt;type hint/type annotation&lt;/a&gt;
vào từ bản 3.5,
chú ý rằng type này không ảnh hưởng/giúp đỡ gì bạn, nếu không sử dụng mypy hay
các IDE.&lt;/p&gt;
&lt;p&gt;Mypy là static type checker - tool giúp phân tích code (static analysis) dựa trên type annotation, dự
án có sự tham gia của tác giả Python - Guido van Rossum, ... và cả &lt;a href="https://github.com/python/mypy/pull/4594"&gt;HVN&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Thêm type để làm gì?&lt;/h2&gt;
&lt;p&gt;Các ngôn ngữ lập trình dynamic typing: Python, JavaScript, PHP, Ruby được
ưa chuộng và luôn chiếm vị trí top các bảng xếp hạng ngôn ngữ lập trình trong
những năm gần đây, hay Clojure, LISP, Erlang, Elixir... dù không lên đỉnh nhưng
vẫn luôn hot.
Dynamic typing giúp code trở nên ngắn gọn và linh hoạt.
Vậy thêm type (kiểu) làm gì? không lẽ để dài hơn và bớt linh hoạt hơn?&lt;/p&gt;
&lt;p&gt;Code dài dòng thêm thì rõ là không ai muốn, bởi nếu muốn đã quay về viết Java
hết rồi, nhưng bớt linh hoạt hơn là một mục đích đáng xem xét.&lt;/p&gt;
&lt;p&gt;Khi mọi thứ linh hoạt, nếu không tuân theo các quy tắc, không có kỷ luật cá nhân
tốt, sẽ dẫn tới rối loạn. Hoặc khi hệ thống trở nên phức tạp hơn,
nhiều tính năng phụ thuộc vào nhau, cũng dẫn tới việc không kiểm soát được.&lt;/p&gt;
&lt;p&gt;Điều này sẽ dễ thấy hơn khi tham gia một dự án có nhiều lập trình viên.
Một team 5 Python dev làm việc đã quen với nhau, code
cùng chuẩn PEP8, cùng không thích OOP, ... hay nói cách khác là một team thực
thụ, sẽ code nhanh như tên lửa, vài giờ một tính năng, bay vèo vèo như
&lt;a href="https://books.google.com.vn/books?id=eulODwAAQBAJ&amp;amp;lpg=PA136&amp;amp;dq=google+video+vs+youtube+python+story&amp;amp;pg=PA136&amp;amp;redir_esc=y#v=onepage&amp;amp;q=google%20video%20vs%20youtube%20python%20story&amp;amp;f=false"&gt;YouTube dev&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;Một nhóm người khác với 5 lập trình viên, học
lập trình từ các nguồn khác nhau, trình độ khác nhau, thậm chí ngôn ngữ thành
thạo cũng khác nhau, nếu làm cùng một dự án sẽ rất rối loạn.
Có chỗ viết 3 class để gọi 1 function cho đúng chuẩn kế thừa, OOP của Java,
có function viết theo kiểu recursive, có chỗ đặt tên biến một chữ cái,
không viết function, một hàm main dài hàng trăm dòng,
function mỗi nhánh trả về một kiểu khác, viết decorator chỉ để dùng 1 lần và
thể hiện, sửa một function rồi các function khác hỏng theo... và hàng trăm thứ
khác có thể sai hơn nữa. Một team như vậy phát
triển sẽ rất chậm, nhiều bug, khó thêm tính năng,
thậm chí gây mệt mỏi, stress khi phải làm việc với nhau. Giải pháp thì lại
không thể là giải tán, cãi nhau, vậy làm gì?&lt;/p&gt;
&lt;p&gt;Type là một phần giải pháp, type giúp đặt ràng buộc rõ ràng đầu vào đầu ra,
đảm bảo một function luôn trả về cùng 1 kiểu dù ở nhánh nào. Function
là kiến trúc cơ bản của 1 chương trình, một hệ thống. Khi function định nghĩa
rõ ràng, các bên tương tác (gọi function) với nhau cũng sẽ rõ ràng.
Nhân viên mới tuyển, sinh viên mới ra trường,
vào sửa function trả về nhầm kiểu sẽ bị type bắt lại ngay.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Type là một thứ CÔNG CỤ giúp giảm sự linh hoạt của code, tăng thêm kỷ luật,
đảm bảo code ít bị rối loạn hơn. Nếu code 1 mình, hay bạn chắc chăn mình và
&lt;strong&gt;các đồng nghiệp&lt;/strong&gt; đủ kỷ luật để không viết function trả về các kiểu khác nhau
thì type cũng không cần thiết.&lt;/li&gt;
&lt;li&gt;Type không nên là thứ can thiệp/cản trở nhiều vào mục đích của lập trình viên.
Ta muốn có công cụ trợ giúp, chứ không muốn nó chống lại mình. Type dài dòng
như của Java là một ví dụ điển hình khiến việc viết code cũng trở nên ngại.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Sử dụng mypy&lt;/h2&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install mypy
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Ví dụ 1 - đơn giản để bắt đầu&lt;/h4&gt;
&lt;p&gt;Ví dụ 1: đoạn code không có type:&lt;/p&gt;
&lt;p&gt;File &lt;code&gt;mypy_simple.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy mypy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
Success: no issues found in &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Không có gì xảy ra, do không function/name nào có type annotation cả.
Mặc định này giúp việc thêm type là tùy ý. Team có thể có người viết type,
có người không ở các function khác nhau, đều OK. Nếu cực nghiêm khắc,
có thể bật chế độ strict lên:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy --strict mypy_simple.py
mypy_simple.py:1: error: Function is missing a &lt;span class="nb"&gt;type&lt;/span&gt; annotation
mypy_simple.py:5: error: Function is missing a &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt; annotation
mypy_simple.py:5: note: Use &lt;span class="s2"&gt;&amp;quot;-&amp;gt; None&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; does not &lt;span class="k"&gt;return&lt;/span&gt; a value
mypy_simple.py:6: error: Call to untyped &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sum_of_three&amp;quot;&lt;/span&gt; in typed context
mypy_simple.py:10: error: Call to untyped &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;main&amp;quot;&lt;/span&gt; in typed context
Found &lt;span class="m"&gt;4&lt;/span&gt; errors in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ở chế độ này, mọi thứ thiếu type annotation đều bị thông báo, đây chỉ là ví dụ
cực đoan, phải tốn khá nhiều công sức và làm quen mới có thể bật chế độ này lên,
vậy nên khó quá tạm thời bỏ qua.&lt;/p&gt;
&lt;p&gt;Thêm type cho đoạn code trong ví dụ 1:
với Python type annotation, ta thường chỉ thêm cho định nghĩa của các function,
ít khi phải khai báo cho các variable. Ví dụ trên có 2 function, sau khi thêm
type vào &lt;code&gt;sum_of_three&lt;/code&gt; sẽ trông như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3 argument đều có kiểu là &lt;code&gt;: int&lt;/code&gt;, &lt;code&gt;-&amp;gt; int&lt;/code&gt; nói rằng function này
trả về kiểu &lt;code&gt;int&lt;/code&gt;.
Chạy lại lệnh mypy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
Success: no issues found in &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vẫn trông như không có gì xảy ra, nhưng thật ra là có, do code của ta không
có vấn đề gì nên mypy cũng không báo gì. Thử đổi trong function &lt;code&gt;main&lt;/code&gt;,
cộng kết quả của &lt;code&gt;sum_of_three&lt;/code&gt; (kiểu int) với một &lt;code&gt;str&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu là lập trình viên JavaScript, bạn sẽ mong đợi một kết quả str bình thường,
&lt;code&gt;"The answer of life: 42"&lt;/code&gt;, bởi JavaScript thuộc loại weak typing,
còn Python là strong typing: int là int, str là str, không cộng trừ lẫn lộn.&lt;/p&gt;
&lt;p&gt;Nếu là một PyMier chân chính, bạn sẽ nhận ra ngay đoạn code này gặp exception
khi CHẠY THẬT, do cộng một str với một số int.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python mypy_simple.py
Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
  File &lt;span class="s2"&gt;&amp;quot;mypy_simple.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;12&lt;/span&gt;, in &amp;lt;module&amp;gt;
    main&lt;span class="o"&gt;()&lt;/span&gt;
  File &lt;span class="s2"&gt;&amp;quot;mypy_simple.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;8&lt;/span&gt;, in main
    &lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; + result
TypeError: must be str, not int
Command exited with non-zero status &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy ta chỉ biết, khi chạy thật, mà lúc ấy mới biết thì "toang" rồi.
Có cách nào &lt;strong&gt;biết trước&lt;/strong&gt; khi chạy không? Mypy sẽ giúp làm chuyện ấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:8: error: Unsupported operand types &lt;span class="k"&gt;for&lt;/span&gt; + &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt; and &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
Found &lt;span class="m"&gt;1&lt;/span&gt; error in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chú ý: việc phân tích function main chỉ xảy ra khi nó có type annotation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Function main không nhận argument, trả về kiểu None. Nếu bỏ &lt;code&gt;-&amp;gt; None&lt;/code&gt; đi,
mypy sẽ không kiểm tra function main.&lt;/p&gt;
&lt;h4&gt;Ví dụ 2 - các containers: list, tuple, dict, set&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Tuple&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;with_index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Tuple&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;]]:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;with_index&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Corona&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Tiger Nau&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;TrucBach&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ có str, int, float, bool, None là các kiểu dùng ngay.
Với list, tuple, set, dict, cần phải import type tương ứng
từ standard lib &lt;code&gt;typing&lt;/code&gt;, các type viết Hoa chữ cái đầu.
Có thể khai báo qua loa
&lt;code&gt;def with_index(names: List) -&amp;gt; List:&lt;/code&gt;
hoặc chi tiết như trong ví dụ 2.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:11: error: Incompatible types in assignment &lt;span class="o"&gt;(&lt;/span&gt;expression has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List[Tuple[int, str]]&amp;quot;&lt;/span&gt;, variable has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lỗi này thường gặp, do chuyện dùng chung tên &lt;code&gt;result&lt;/code&gt;,
mypy lần đầu gặp sẽ nghĩ &lt;code&gt;result&lt;/code&gt; là kiểu &lt;code&gt;int&lt;/code&gt;, qua dòng tiếp
theo lại suy luận nó được gán giá trị kiểu &lt;code&gt;List[Tuple[int, str]]&lt;/code&gt;. Việc dùng
một biến để chỉ tới nhiều kiểu khác nhau không hiếm trong dynamic typing, nhưng
là chuyện không thể trong các ngôn ngữ static typing. Cách giải quyết chuẩn
nhất là đổi tên biến.&lt;/p&gt;
&lt;h4&gt;Ví dụ 3 - các object phức tạp, thư viện bên ngoài&lt;/h4&gt;
&lt;p&gt;Với các lập trình viên Python, type là một thứ lạ, nên không phải dẽ gì ngồi
đọc ngay ra kiểu của &lt;code&gt;resp&lt;/code&gt; sau đây là gì mà gõ vào:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;process_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;From: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://httpbin.org/ip&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;process_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;# + 10&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;Any&lt;/code&gt; giúp điền vào chỗ trống khi không biết kiểu gì, đồng nghĩa
với việc mất đi một chút bảo vệ của mypy do mypy sẽ cho phép gọi
function &lt;code&gt;process_response&lt;/code&gt; với argument đầu tiên thuộc bất kỳ kiểu nào.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;msg: str = 'From: '&lt;/code&gt; là argument &lt;code&gt;msg&lt;/code&gt;, kiểu &lt;code&gt;str&lt;/code&gt;, với giá trị
default &lt;code&gt;From:&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python mypy_simple.py
From: &lt;span class="m"&gt;111&lt;/span&gt;.212.107.29
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có một cách khác để nhờ mypy tìm giúp kiểu của &lt;code&gt;resp&lt;/code&gt;, đó là khai báo sai kiểu,
thay &lt;code&gt;Any&lt;/code&gt; thành &lt;code&gt;int&lt;/code&gt;, chạy mypy sẽ thấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:5: error: &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt; has no attribute &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
mypy_simple.py:8: error: Argument &lt;span class="m"&gt;1&lt;/span&gt; to &lt;span class="s2"&gt;&amp;quot;process_response&amp;quot;&lt;/span&gt; has incompatible &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Response&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; expected &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;
Found &lt;span class="m"&gt;2&lt;/span&gt; errors in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy kiểu của &lt;code&gt;resp&lt;/code&gt; cần khai báo là Response, đầy đủ là &lt;code&gt;requests.models.Response&lt;/code&gt;
có thể tìm ra bằng cách &lt;code&gt;print(type(r))&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;Ví dụ 4 - function nhận vào nhiều kiểu&lt;/h4&gt;
&lt;p&gt;Cũng có lúc, ta muốn chủ ý nhận vào nhiều loại input khác kiểu,
nhưng chỉ giới hạn trong 1 nhóm, ví dụ như int, str, float, chứ không phải dict
hay list, nếu dùng &lt;code&gt;Any&lt;/code&gt; thì dễ dãi quá:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;This is {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### mypy check&lt;/span&gt;
&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Argument&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;any_number&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;incompatible&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giải pháp là dùng Union.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Union&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Union&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Các kiểu type khác: &lt;a href="https://mypy.readthedocs.io/en/stable/kinds_of_types.html"&gt;https://mypy.readthedocs.io/en/stable/kinds_of_types.html&lt;/a&gt; đáng chú ý như Optional khi có thể trả về None, hay Callable là kiểu cho
function.&lt;/p&gt;
&lt;h3&gt;Stub&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;boto3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mypy mypy_simple.py
mypy_simple.py:1: error: No library stub file for module &amp;#39;boto3&amp;#39;
mypy_simple.py:1: note: (Stub files are from https://github.com/python/typeshed)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi Python chính thức thêm type notation, không có nghĩa là các core developer sẽ đi sửa hàng loạt các file thư viện đã chạy ổn định vài chục năm để
thêm type. Thay vào đó, họ tạo ra các stub file.
stub file là file chứa type annotation của các function trong library. Nó tương tự header file trong C/C++.&lt;/p&gt;
&lt;p&gt;Ví dụ &lt;a href="https://github.com/python/typeshed/blob/master/stdlib/3/itertools.pyi"&gt;itertools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Các stub file của Python standard lib được gom lại tại &lt;a href="https://github.com/python/typeshed"&gt;python/typeshed&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Các thư viện bên ngoài thường ít khi có sẵn stub file,
Ví dụ như &lt;code&gt;boto3&lt;/code&gt; - thư viện cực kỳ phổ biến - và chính thức để làm việc với
API của AWS, tới nay vẫn chưa có stub file chính thức từ AWS.
Nên để đơn giản, thay vì phải chiến đấu với type, ta có thể bỏ qua:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;mypy&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;ignore&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;missing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay tự tạo stub như &lt;a href="https://github.com/htlcnn/autocad_objectarx_python_stubs"&gt;htlcnn&lt;/a&gt;.
Xem hướng dẫn tự tạo stub file tại &lt;a href="https://github.com/python/mypy/wiki/Creating-Stubs-For-Python-Modules"&gt;mypy wiki&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Những vấn đề type giúp giải quyết&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Kiểm tra kiểu, đảm bảo function trả về thống nhất một kiểu, nhận được đúng
  kiểu đầu vào.&lt;/li&gt;
&lt;li&gt;Giúp nhìn vào dòng def (thuật ngữ chính xác: function signature) là biết luôn
  cần gọi với argument nào, trả về kiểu gì.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Những vấn đề type KHÔNG giúp giải quyết&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Thay cho unittest: unittest dùng để kiểm tra logic chứ không phải để kiểm tra kiểu. Do không có ràng buộc về kiểu, nên trong unittest thường kiểm tra cả kiều của đầu ra function, việc này hoàn toàn bị loại bỏ khi dùng mypy.&lt;/li&gt;
&lt;li&gt;Làm việc nhóm không hiệu quả: type chỉ là một phần giải pháp giúp xóa bớt sự
chênh lệch trình độ giữa các lập trình viên. Bạn nên tìm cách đào tạo, chia sẻ
kinh nghiệm, luyện tập cùng các đồng nghiệp thì hơn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Hành động của chúng ta&lt;/h3&gt;
&lt;p&gt;Thêm ngay dòng sau vào Makefile, hay hệ thống CI của bạn, ngay sau pep8, flake8 hay pylint:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mypy&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;ignore&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;missing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Type là một công cụ tốt cho các Pythonista như pylint pep8, giúp phát triển các dự án lớn hơn,
nhiều người tham gia một cách dễ dàng hơn, trong khi việc đầu tư thì không có
gì to tát cả - chỉ việc share bài viết này.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="mypy"></category></entry><entry><title>C thật là đơn giản</title><link href="http://pp.pymi.vn/article/cde/" rel="alternate"></link><published>2020-02-19T00:00:00+07:00</published><updated>2020-02-19T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-02-19:/article/cde/</id><summary type="html">&lt;p&gt;C đơn giản hơn Python?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Đơn giản, nhanh, chậm, xinh, cao, thấp, giỏi, xịn... đều là những khái niệm
mang tính chất tương đối. Có cái hơn khi so sánh ở góc độ này, nhưng lại kém
khi so sánh ở góc độ khác. Trong ngành lập trình, mọi thứ đều là sự đánh đổi
(trade off),
không có giải pháp nào thỏa mãn tất cả mọi nhu cầu (silver bullet) - hoặc có
nhưng chưa ai tìm ra.&lt;/p&gt;
&lt;p&gt;Không cần bàn cãi, ai cũng đồng ý code Python dễ đọc, viết hơn C, hay... đơn
giản hơn. Nhưng cái đơn giản đó, là đơn giản với con người, với lập trình viên,
còn với máy tính thì hoàn toàn ngược lại.&lt;/p&gt;
&lt;p&gt;Ta sẽ thử nghiệm chương trình đơn giản nhất trái đất: hello world viết bằng C
và Python rồi so sánh dùng &lt;code&gt;strace&lt;/code&gt; - một công cụ debug "cao cấp" thường
dùng bởi các SysAdmin.&lt;/p&gt;
&lt;h3&gt;strace&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ whatis strace
strace &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;           - trace system calls and signals
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bài viết thực hiện trên Ubuntu 18.04, &lt;code&gt;cc&lt;/code&gt; - C compiler có lẽ là có sẵn.
Hoặc nếu không có, hãy cài bằng &lt;code&gt;sudo apt-get install -y  build-essential strace&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;C Programming language&lt;/h3&gt;
&lt;p&gt;4 dòng code C&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;puts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello world!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Compile rồi chạy - yeah, cực đơn giản, không cần gì khác cả, cũng không cần
làm việc đơn giản này trở thành rắc rôi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cc hello.c -o hello  &lt;span class="c1"&gt;# compile, sinh ra file hello&lt;/span&gt;
$ ./hello  &lt;span class="c1"&gt;# chạy file hello&lt;/span&gt;
Hello world!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giờ chạy với &lt;code&gt;strace&lt;/code&gt; để xem chương trình siêu đơn giản này gọi những system call
nào, &lt;code&gt;-C&lt;/code&gt; sẽ hiển thị bảng thống kê, &lt;code&gt;-S calls&lt;/code&gt; sẽ sắp xếp thống kê này
theo cột &lt;code&gt;calls&lt;/code&gt;, giảm dần.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -CScalls ./hello
execve&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./hello&amp;quot;&lt;/span&gt;, &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./hello&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;, 0x7fff1e9af718 /* &lt;span class="m"&gt;68&lt;/span&gt; vars */&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
brk&lt;span class="o"&gt;(&lt;/span&gt;NULL&lt;span class="o"&gt;)&lt;/span&gt;                               &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa4e000
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.nohwcap&amp;quot;&lt;/span&gt;, F_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.preload&amp;quot;&lt;/span&gt;, R_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
openat&lt;span class="o"&gt;(&lt;/span&gt;AT_FDCWD, &lt;span class="s2"&gt;&amp;quot;/etc/ld.so.cache&amp;quot;&lt;/span&gt;, O_RDONLY&lt;span class="p"&gt;|&lt;/span&gt;O_CLOEXEC&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFREG&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0644&lt;/span&gt;, &lt;span class="nv"&gt;st_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;106420&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;106420&lt;/span&gt;, PROT_READ, MAP_PRIVATE, &lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f8fc000
close&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                                &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.nohwcap&amp;quot;&lt;/span&gt;, F_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
openat&lt;span class="o"&gt;(&lt;/span&gt;AT_FDCWD, &lt;span class="s2"&gt;&amp;quot;/lib/x86_64-linux-gnu/libc.so.6&amp;quot;&lt;/span&gt;, O_RDONLY&lt;span class="p"&gt;|&lt;/span&gt;O_CLOEXEC&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
read&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0&amp;gt;\0\1\0\0\0\260\34\2\0\0\0\0\0&amp;quot;&lt;/span&gt;..., &lt;span class="m"&gt;832&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;832&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFREG&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0755&lt;/span&gt;, &lt;span class="nv"&gt;st_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2030544&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;8192&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_ANONYMOUS, -1, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f8fa000
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;4131552&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_EXEC, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_DENYWRITE, &lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f2fe000
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f4e5000, &lt;span class="m"&gt;2097152&lt;/span&gt;, PROT_NONE&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6e5000, &lt;span class="m"&gt;24576&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_FIXED&lt;span class="p"&gt;|&lt;/span&gt;MAP_DENYWRITE, &lt;span class="m"&gt;3&lt;/span&gt;, 0x1e7000&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f6e5000
mmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6eb000, &lt;span class="m"&gt;15072&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_FIXED&lt;span class="p"&gt;|&lt;/span&gt;MAP_ANONYMOUS, -1, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f6eb000
close&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                                &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
arch_prctl&lt;span class="o"&gt;(&lt;/span&gt;ARCH_SET_FS, 0x7f867f8fb4c0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6e5000, &lt;span class="m"&gt;16384&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x56174a941000, &lt;span class="m"&gt;4096&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f916000, &lt;span class="m"&gt;4096&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
munmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f8fc000, &lt;span class="m"&gt;106420&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFCHR&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0620&lt;/span&gt;, &lt;span class="nv"&gt;st_rdev&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;makedev&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;136&lt;/span&gt;, &lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
brk&lt;span class="o"&gt;(&lt;/span&gt;NULL&lt;span class="o"&gt;)&lt;/span&gt;                               &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa4e000
brk&lt;span class="o"&gt;(&lt;/span&gt;0x56174aa6f000&lt;span class="o"&gt;)&lt;/span&gt;                     &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa6f000
write&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;Hello world!\n&amp;quot;&lt;/span&gt;, 13Hello world!
     &lt;span class="o"&gt;)&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;
exit_group&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                           &lt;span class="o"&gt;=&lt;/span&gt; ?
+++ exited with &lt;span class="m"&gt;0&lt;/span&gt; +++
% &lt;span class="nb"&gt;time&lt;/span&gt;     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;5&lt;/span&gt;           mmap
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;4&lt;/span&gt;           mprotect
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           fstat
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           brk
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt; access
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt;           close
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt;           openat
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           &lt;span class="nb"&gt;read&lt;/span&gt;
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           write
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           munmap
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           execve
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           arch_prctl
------ ----------- ----------- --------- --------- ----------------
&lt;span class="m"&gt;100&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000                    &lt;span class="m"&gt;27&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt; total
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có tổng cộng 27 syscall được thực hiện, 3 fail.&lt;/p&gt;
&lt;h3&gt;Python&lt;/h3&gt;
&lt;p&gt;Một chương trình Python 3.6 in ra màn hình dòng chữ &lt;code&gt;hello world&lt;/code&gt; tương tự:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -cScalls python3 -c &lt;span class="s1"&gt;&amp;#39;print(&amp;quot;Hello world!&amp;quot;)&amp;#39;&lt;/span&gt;
Hello world!
% &lt;span class="nb"&gt;time&lt;/span&gt;     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  &lt;span class="m"&gt;9&lt;/span&gt;.22    &lt;span class="m"&gt;0&lt;/span&gt;.000277           &lt;span class="m"&gt;2&lt;/span&gt;       &lt;span class="m"&gt;166&lt;/span&gt;        &lt;span class="m"&gt;32&lt;/span&gt; stat
  &lt;span class="m"&gt;7&lt;/span&gt;.96    &lt;span class="m"&gt;0&lt;/span&gt;.000239           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;94&lt;/span&gt;           fstat
  &lt;span class="m"&gt;7&lt;/span&gt;.19    &lt;span class="m"&gt;0&lt;/span&gt;.000216           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;79&lt;/span&gt;           &lt;span class="nb"&gt;read&lt;/span&gt;
  &lt;span class="m"&gt;7&lt;/span&gt;.19    &lt;span class="m"&gt;0&lt;/span&gt;.000216           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;68&lt;/span&gt;           rt_sigaction
  &lt;span class="m"&gt;8&lt;/span&gt;.09    &lt;span class="m"&gt;0&lt;/span&gt;.000243           &lt;span class="m"&gt;4&lt;/span&gt;        &lt;span class="m"&gt;58&lt;/span&gt;           close
 &lt;span class="m"&gt;10&lt;/span&gt;.25    &lt;span class="m"&gt;0&lt;/span&gt;.000308           &lt;span class="m"&gt;5&lt;/span&gt;        &lt;span class="m"&gt;57&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt; openat
  &lt;span class="m"&gt;1&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000049           &lt;span class="m"&gt;1&lt;/span&gt;        &lt;span class="m"&gt;43&lt;/span&gt;         &lt;span class="m"&gt;6&lt;/span&gt; lseek
 &lt;span class="m"&gt;17&lt;/span&gt;.78    &lt;span class="m"&gt;0&lt;/span&gt;.000534          &lt;span class="m"&gt;16&lt;/span&gt;        &lt;span class="m"&gt;34&lt;/span&gt;           mmap
  &lt;span class="m"&gt;0&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000013           &lt;span class="m"&gt;1&lt;/span&gt;        &lt;span class="m"&gt;18&lt;/span&gt;           getdents
 &lt;span class="m"&gt;12&lt;/span&gt;.62    &lt;span class="m"&gt;0&lt;/span&gt;.000379          &lt;span class="m"&gt;24&lt;/span&gt;        &lt;span class="m"&gt;16&lt;/span&gt;           mprotect
  &lt;span class="m"&gt;2&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000073           &lt;span class="m"&gt;6&lt;/span&gt;        &lt;span class="m"&gt;12&lt;/span&gt;           brk
  &lt;span class="m"&gt;1&lt;/span&gt;.66    &lt;span class="m"&gt;0&lt;/span&gt;.000050           &lt;span class="m"&gt;4&lt;/span&gt;        &lt;span class="m"&gt;12&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt; ioctl
  &lt;span class="m"&gt;5&lt;/span&gt;.03    &lt;span class="m"&gt;0&lt;/span&gt;.000151          &lt;span class="m"&gt;17&lt;/span&gt;         &lt;span class="m"&gt;9&lt;/span&gt;         &lt;span class="m"&gt;9&lt;/span&gt; access
  &lt;span class="m"&gt;0&lt;/span&gt;.37    &lt;span class="m"&gt;0&lt;/span&gt;.000011           &lt;span class="m"&gt;1&lt;/span&gt;         &lt;span class="m"&gt;8&lt;/span&gt;           lstat
  &lt;span class="m"&gt;2&lt;/span&gt;.46    &lt;span class="m"&gt;0&lt;/span&gt;.000074          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;4&lt;/span&gt;           munmap
  &lt;span class="m"&gt;0&lt;/span&gt;.30    &lt;span class="m"&gt;0&lt;/span&gt;.000009           &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           dup
  &lt;span class="m"&gt;0&lt;/span&gt;.27    &lt;span class="m"&gt;0&lt;/span&gt;.000008           &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt; readlink
  &lt;span class="m"&gt;0&lt;/span&gt;.23    &lt;span class="m"&gt;0&lt;/span&gt;.000007           &lt;span class="m"&gt;2&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           sigaltstack
  &lt;span class="m"&gt;0&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000019          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           write
  &lt;span class="m"&gt;0&lt;/span&gt;.53    &lt;span class="m"&gt;0&lt;/span&gt;.000016          &lt;span class="m"&gt;16&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           rt_sigprocmask
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getpid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           execve
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           fcntl
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           sysinfo
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getuid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getgid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           geteuid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getegid
  &lt;span class="m"&gt;0&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000013          &lt;span class="m"&gt;13&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           arch_prctl
  &lt;span class="m"&gt;0&lt;/span&gt;.80    &lt;span class="m"&gt;0&lt;/span&gt;.000024          &lt;span class="m"&gt;24&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           futex
  &lt;span class="m"&gt;0&lt;/span&gt;.60    &lt;span class="m"&gt;0&lt;/span&gt;.000018          &lt;span class="m"&gt;18&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           set_tid_address
  &lt;span class="m"&gt;0&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000019          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           set_robust_list
  &lt;span class="m"&gt;0&lt;/span&gt;.53    &lt;span class="m"&gt;0&lt;/span&gt;.000016          &lt;span class="m"&gt;16&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           prlimit64
  &lt;span class="m"&gt;0&lt;/span&gt;.73    &lt;span class="m"&gt;0&lt;/span&gt;.000022          &lt;span class="m"&gt;22&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getrandom
------ ----------- ----------- --------- --------- ----------------
&lt;span class="m"&gt;100&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.003004                   &lt;span class="m"&gt;703&lt;/span&gt;        &lt;span class="m"&gt;52&lt;/span&gt; total
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do output quá dài nên ở đây thay đổi câu lệnh, để có đầy đủ output hãy chạy
với option C hoa:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -CScalls python -c &lt;span class="s1"&gt;&amp;#39;print(&amp;quot;hello world&amp;quot;)&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chương trình Python đơn giản này thực hiện tới 703 syscall, 52 fail.&lt;/p&gt;
&lt;h3&gt;Kết luận&lt;/h3&gt;
&lt;p&gt;27 với 703 thì cái nào "hơn"?&lt;/p&gt;
&lt;p&gt;27 nhỏ hơn 703, còn 703 thì lớn hơn 27. Lập trình C cũng rất đơn giản, đúng
không!&lt;/p&gt;
&lt;p&gt;Vậy nên khi lập trình, luôn nhớ rằng mọi thứ đều là tương đôi, đều phải đánh
đổi. Mấy em gái đã xinh mà code Python lại giỏi, chỉ có 2 khả năng xảy ra:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 là thiếu cái gì đó&lt;/li&gt;
&lt;li&gt;2 là học Python ở &lt;a href="https://pymi.vn"&gt;PYMI&lt;/a&gt; rõ ràng &amp;lt;3.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Đọc thêm&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;System call: https://hvnsweeting.github.io/syscall.html&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="C"></category><category term="Python"></category><category term="strace"></category><category term="syscall"></category><category term="UNIX"></category><category term="sysadmin"></category></entry><entry><title>Crawl dữ liệu bằng JavaScript ngay trên trình duyệt</title><link href="http://pp.pymi.vn/article/jsdom/" rel="alternate"></link><published>2020-02-09T00:00:00+07:00</published><updated>2020-02-09T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-02-09:/article/jsdom/</id><summary type="html">&lt;p&gt;trở thành hacker ngay trên trình duyệt - hay tại sao không nên tin vào ảnh chụp màn hình.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Năm 2020, bên cạnh cuộc chiến khốc liệt với virus Novel Corona (nCov), vẫn dai dẳng và mãnh liệt cuộc chiến chống tin giả, tin quá sốc, tràn lan trên các mạng xã hội.&lt;/p&gt;
&lt;p&gt;Trong các loại tin giả, có không ít tin được đưa theo hình thức chụp ảnh màn hình điện thoại, chụp trình duyệt trên máy tính để làm bằng chứng. Ảnh màn hình điện thoại dễ dàng làm giả với một lập trình viên mobile, còn với ảnh trình duyệt, ai cũng làm được, không cần tới trình độ PhotoShop đỉnh cao hay kỹ thuật lập trình chuyên nghiệp cỡ như các Pymiers.&lt;/p&gt;
&lt;p&gt;Bài viết sẽ vạch trần kỹ thuật làm giả này, đồng thời lợi dụng nó để crawl dữ liệu ngay trên trang web, dùng chính trình duyệt mà không cần thêm gì khác như BeautifulSoup4 hay &lt;a href="/article/requests-bs4-requests-html/"&gt;requests-html&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Web page là gì&lt;/h2&gt;
&lt;p&gt;Web page là trang web, sử dụng HTML để biểu diễn cấu trúc.&lt;/p&gt;
&lt;h2&gt;HTML là gì&lt;/h2&gt;
&lt;p&gt;HTML là một ngôn ngữ markup (đánh dấu), dùng để mô tả cấu trúc một web page. Nó sử dụng các tag (thẻ) để đánh dấu.
Chuột phải vào màn hình, chọn "View page source" để xem code HTML của web page.&lt;/p&gt;
&lt;p&gt;HTML không phải một ngôn ngữ lập trình (programming language).&lt;/p&gt;
&lt;h3&gt;HTML tag&lt;/h3&gt;
&lt;p&gt;Mỗi bộ phận của web page được đánh dấu sử dụng một cặp thẻ tương ứng, &lt;code&gt;&amp;lt;a ...&amp;gt; &amp;lt;/a&amp;gt;&lt;/code&gt; để đánh dấu một web link, &lt;code&gt;&amp;lt;table&amp;gt; ... &amp;lt;/table&amp;gt;&lt;/code&gt; để đánh dấu một bảng ...
Xem đầy đủ các tag tại &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element"&gt;đây&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Document Object Model (DOM)&lt;/h2&gt;
&lt;p&gt;Document Object Model (DOM) biểu diễn HTML ở dạng cây (tree structure).
DOM là programming interface cho HTML (và XML) documents.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Document_Object_Model"&gt;&lt;img alt="DOM wiki" src="http://pp.pymi.vn/images/220px-DOM-model.svg.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sử dụng cây này có thể dễ dàng truy cập (query) các thành phần của web page, thay đổi chúng (manipulate).&lt;/p&gt;
&lt;p&gt;Mỗi web page là một document.&lt;/p&gt;
&lt;h3&gt;Truy cập &amp;amp; thay đổi DOM trên trình duyệt&lt;/h3&gt;
&lt;p&gt;Mở một web site ra, rồi bật web console lên, hoặc đọc bài &lt;a href="https://www.familug.org/2017/04/hoc-javascript-1.html"&gt;này&lt;/a&gt; nếu chưa biết cách.&lt;/p&gt;
&lt;h3&gt;Document, Window &amp;amp; DOM Elements&lt;/h3&gt;
&lt;p&gt;Mỗi web page là một &lt;code&gt;document&lt;/code&gt;, mỗi "cửa sổ" (thời nay là 1 tab trình duyệt), là một &lt;code&gt;window&lt;/code&gt;, đại diện cho cửa sổ đó. Mỗi document là một tree, với các node gọi là các Element.&lt;/p&gt;
&lt;p&gt;Gõ vào web console &lt;code&gt;document&lt;/code&gt;, đây chính là DOM của web page đang truy cập, thông qua object này, ta có thể làm đủ trò với những gì đang hiện trên trình duyệt.&lt;/p&gt;
&lt;h3&gt;Get element&lt;/h3&gt;
&lt;p&gt;Có vài cách để truy cập element, trong đó kể tới 2 methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;document.getElementsByTagName&lt;/code&gt;: lấy các elements theo HTML tag của chúng&lt;/li&gt;
&lt;li&gt;&lt;code&gt;document.querySelectorAll&lt;/code&gt;: lấy các elements theo &lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors"&gt;CSS selectors&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;innerText&lt;/code&gt; là thuộc tính (attribute) của một element, chứa nội dung text của nó. Ví dụ sau sẽ thay đổi tiêu đề của bài viết, đây là cách làm tin giả rồi chụp mành hình, không cần dùng PhotoShop:&lt;/p&gt;
&lt;p&gt;Vào web page: &lt;a href="https://www.familug.org/2020/02/vagrant.html"&gt;https://www.familug.org/2020/02/vagrant.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Trước" src="http://pp.pymi.vn/images/vagrant.png"&gt;&lt;/p&gt;
&lt;p&gt;Sau khi "hack"&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;titleTag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getElementsByTagName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;h3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;titleTag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nx"&gt;titleTag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Happy birthday!&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Hack FAMILUG" src="http://pp.pymi.vn/images/happybirthday.png"&gt;&lt;/p&gt;
&lt;h3&gt;Query element&lt;/h3&gt;
&lt;p&gt;Thay vì dùng HTML tags, có thể dùng CSS class để tìm ra các element, ví dụ sau đây tìm các tin tuyển dụng trên trang &lt;a href="https://news.ycombinator.com/item?id=22225314"&gt;HackerNews&lt;/a&gt; có chứa từ khóa Python và Remote, rồi hiển thị lên màn hình - có thể xem như crawl dữ liệu ngay trên trình duyệt:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;allcomms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;from&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelectorAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.comment-tree .comtr&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;topcoms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;allcomms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;img[width=&amp;quot;0&amp;quot;]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;pys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;topcoms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/\bpython\b/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;pyremotes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;pys&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/\bremote\b/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;pyremotes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đoạn code trên học theo &lt;a href="https://news.ycombinator.com/item?id=22231675"&gt;một comment trên HackerNews&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Đọc thêm về map/filter tại &lt;a href="https://gist.github.com/hvnsweeting/e26b6367bb0144d4ce3eaa04cfe3b94d"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="remote python job" src="http://pp.pymi.vn/images/hackernews_py_remote_jobs.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/\bpython\b/i&lt;/code&gt; là Regex Object, dùng để tìm các đoạn text chứa từ khóa Python, chữ &lt;code&gt;\b&lt;/code&gt; để đánh dấu boundary, tức kết quả sẽ không chứa &lt;code&gt;pikapython&lt;/code&gt; mà chỉ chứa &lt;code&gt;pika python&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt; để không phân biệt chữ hoa chữ thường.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;DOM là khái niệm cơ bản về web page, là nền tảng để lập trình JavaScript ở phía client (trên trình duyệt), dù không phải Front-end developer, cũng nên biết dùng DOM, để automate, để "hack".&lt;/p&gt;
&lt;p&gt;Happy new year 2020!&lt;/p&gt;</content><category term="Trang chủ"></category><category term="JavaScript"></category><category term="JS"></category><category term="crawl"></category><category term="scraping"></category></entry><entry><title>Sử dụng xlwings tương tác với MS Excel</title><link href="http://pp.pymi.vn/article/xlwings-named-range/" rel="alternate"></link><published>2019-12-08T00:00:00+07:00</published><updated>2018-12-08T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2019-12-08:/article/xlwings-named-range/</id><summary type="html">&lt;p&gt;Giới thiệu thư viện xlwings dùng để tương tác với MS Excel&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://github.com/xlwings/xlwings"&gt;xlwings&lt;/a&gt; là 1 thư viện Python dùng để tương tác giữa Python và MS Excel. Hoạt động được trên Windows và Mac. xlwings có các tính năng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Scripting&lt;/strong&gt;: Tự động hóa/tương tác với Excel từ môi trường Python, sử dụng cú pháp gần với VBA mà vẫn "Pythonic".&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Macros&lt;/strong&gt;: Viết các script python thay thế cho VBA macros, giúp code dễ đọc hơn. Sau khi viết script python xong, chỉ cần gọi 1 hàm trong VBA là script chạy.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDFs&lt;/strong&gt;: Viết hàm người dùng tự định nghĩa bằng ngôn ngữ Python và sử dụng được hàm đó trong excel (Windows only).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;: cung cấp REST API cho Excel workbook.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Cài đặt:&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;xlwings&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Sử dụng:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Một số thao tác cơ bản:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;xlwings&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;xw&lt;/span&gt;

&lt;span class="c1"&gt;# mở workbook mới&lt;/span&gt;
&lt;span class="n"&gt;new_wb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="c1"&gt;# hoặc&lt;/span&gt;
&lt;span class="n"&gt;opening_wb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name_of_opening_workbook&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# hoặc&lt;/span&gt;
&lt;span class="n"&gt;open_new_workbook&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;full/relaive_path_to_xls&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Lấy các sheets có trong file excel &lt;/span&gt;
&lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sheets&lt;/span&gt;

&lt;span class="c1"&gt;# Làm việc với dữ liệu trong 1 sheet&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sheets&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;xxx&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# tự động tìm bảng&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.xlwings.org/en/stable/datastructures.html#range-expanding&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expand&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Ngoài ra, &lt;a href="https://docs.xlwings.org/en/stable/datastructures.html#pandas-dataframes"&gt;xlwings còn tích hợp pandas&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Xử lý trường hợp cụ thể:
Trong video &lt;a href="https://www.youtube.com/watch?v=wm7RNejVh8E"&gt;này&lt;/a&gt;, xlwings được dùng để tự động tạo các named range cho hàng loạt file có cấu trúc tương tự. Mục đích là để làm bước tiếp theo: link giá trị từ nhiều file vào 1 file tổng hợp, dựa vào named range trong từng file chi tiết. Tham khảo &lt;a href="https://gist.github.com/htlcnn/0ddd4e0023e0b623bc0e6006a9f9520c"&gt;script&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Trong script này còn sử dụng Excel VBA API: &lt;a href="https://docs.microsoft.com/en-us/office/vba/api/excel.names.add"&gt;WorkBook.Names.Add&lt;/a&gt; (tra cứu toàn bộ ở &lt;a href="https://docs.microsoft.com/en-us/office/vba/api/overview/excel/object-model"&gt;đây&lt;/a&gt;, được cung cấp qua &lt;code&gt;xw_object.api&lt;/code&gt;). Tức là những gì không được cung cấp sẵn cú pháp Pythonic, ta sẽ sử dụng VBA API.&lt;/p&gt;
&lt;p&gt;Hạn chế: range expand chỉ ứng dụng được cho vùng dữ liệu liên tục. Với "bảng" có các dòng/cột trống (để "format" cho đẹp) thì sẽ bị ngắt tại chỗ có dòng/cột trống. Vì vậy, thường sẽ phải chọn 1 range khá lớn/1 magic number để lấy được toàn bộ vùng dữ liệu cần xử lý.&lt;/p&gt;
&lt;p&gt;Mọi việc phải xử lý trong video demo sẽ đơn giản hơn nếu có 1 file excel mẫu ban đầu, được định nghĩa sẵn các named range, sau đó mới duplicate ra để điền dữ liệu vào. Tuy nhiên, thực tế không như thế, ta phải xử lý lỗi một cách nhanh nhất, cũng giống như khi tập chép phạt: &lt;code&gt;"Anh xin lỗi\n" * 100&lt;/code&gt;&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="xlwings"></category><category term="excel"></category><category term="vba"></category></entry><entry><title>Biết Python - quen ngay Julia</title><link href="http://pp.pymi.vn/article/julia_intro/" rel="alternate"></link><published>2019-04-11T00:00:00+07:00</published><updated>2019-04-11T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2019-04-11:/article/julia_intro/</id><summary type="html">&lt;p&gt;Giống Python, mà nhanh gấp 2++, cũng rất gì và này nọ.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Julia là ngôn ngữ lập trình mới, trông rất giống code Python, chạy nhanh hơn Python3 &lt;a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/julia-python3.html"&gt;ít nhất 2 lần&lt;/a&gt;
và có nhiều tính năng hấp dẫn. Bạn không cần phải từ bỏ Python hay ngôn ngữ XYZ để học Julia, Julia chỉ đơn giản là một bông hoa đẹp mà ai thích... thì múc.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Julia" src="https://docs.julialang.org/en/v1/assets/logo.png"&gt;&lt;/p&gt;
&lt;p&gt;Julia là ngôn ngữ lập trình "làm gì cũng được", nhưng được tập trung vào lĩnh vực tính toán khoa học và muốn
thế chỗ Python (nhưng đường còn dài, và còn nhiều hơn chông gai).&lt;/p&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;p&gt;Xem https://docs.julialang.org/en/v1/&lt;/p&gt;
&lt;p&gt;Tại thời điểm viết bài (2019 tháng 4), Julia ở bản 1.1.0 - đã ổn định hơn trước rất nhiều, ít bug hơn, chạy nhanh hơn.&lt;/p&gt;
&lt;h3&gt;Từ Python ngó sang&lt;/h3&gt;
&lt;p&gt;Julia trông rất giống Python, cách dùng các học, cách code cũng tương tự, nên nếu biết Python thì 
việc viết được code để làm công việc thường ngày (của 1 DevOps) chỉ trong vòng vài tiếng.&lt;/p&gt;
&lt;h4&gt;REPL&lt;/h4&gt;
&lt;p&gt;Gõ lệnh trực tiếp bằng lệnh &lt;code&gt;julia&lt;/code&gt; trên Linux/MacOS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="n"&gt;julia&lt;/span&gt;
               &lt;span class="n"&gt;_&lt;/span&gt;
   &lt;span class="n"&gt;_&lt;/span&gt;       &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;Documentation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;julialang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;
  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;
   &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;   &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;  &lt;span class="n"&gt;__&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="kt"&gt;Type&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;?&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;]?&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;Pkg&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|/&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="sb"&gt;` |  |&lt;/span&gt;
&lt;span class="sb"&gt;  | | |_| | | | (_| |  |  Version 1.1.0 (2019-01-21)&lt;/span&gt;
&lt;span class="sb"&gt; _/ |\__&amp;#39;_|_|_|\__&amp;#39;_|  |  Official https://julialang.org/ release&lt;/span&gt;
&lt;span class="sb"&gt;|__/                   |&lt;/span&gt;

&lt;span class="sb"&gt;julia&amp;gt; 1 + 1&lt;/span&gt;
&lt;span class="sb"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đây gọi là chế độ "REPL" (Read-Eval-Print-Loop) == (gõ vào - chạy - in ra kết quả - cứ thế mà làm).&lt;/p&gt;
&lt;h4&gt;IPython&lt;/h4&gt;
&lt;p&gt;Không cần cài thêm gì, Julia REPL tự có đủ các tính năng thiết yếu của IPython.&lt;/p&gt;
&lt;p&gt;Đọc document của 1 function? Gõ ?  rồi gõ bất cứ cái gì cần hỏi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="c"&gt;###### gõ ? xong , biến từ julia&amp;gt; thành help?&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt;
&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="n"&gt;sum!&lt;/span&gt; &lt;span class="n"&gt;summary&lt;/span&gt; &lt;span class="n"&gt;cumsum&lt;/span&gt; &lt;span class="n"&gt;cumsum!&lt;/span&gt; &lt;span class="n"&gt;isnumeric&lt;/span&gt; &lt;span class="kt"&gt;VersionNumber&lt;/span&gt; &lt;span class="n"&gt;issubnormal&lt;/span&gt; &lt;span class="n"&gt;get_zero_subnormals&lt;/span&gt;

&lt;span class="o"&gt;...&lt;/span&gt;
 &lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;itr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

  &lt;span class="n"&gt;Returns&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;collection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Màu mè (syntax highlight) cũng tự có sẵn rồi.&lt;/p&gt;
&lt;h4&gt;Chạy file code&lt;/h4&gt;
&lt;p&gt;File code Julia có đuôi &lt;code&gt;.jl&lt;/code&gt;, ví dụ &lt;code&gt;hello.jl&lt;/code&gt;.
Chạy file code bằng cách gõ lệnh: &lt;code&gt;julia hello.jl&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;Cài đặt package&lt;/h4&gt;
&lt;p&gt;Để cài các package trên mạng, sử dụng package manager CÓ SẴN của Julia.
Chuyện về &lt;code&gt;virtualenv&lt;/code&gt; tạm chưa bàn tới ở đây vì khá rõ ràng là không cần thiết (cài package 
&lt;a href="http://pymi.vn/blog/virtualenv/"&gt;không cần gõ sudo gì cả&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Việc cài đặt package trong Julia thực hiện hơi khác so với Python Pip hay NodeJS NPM một chút.
Sẽ không có câu lệnh nào để gõ cả, không có chương trình thêm nào hết.
Julia thực hiện cài đặt package khi một đoạn code Julia được chạy (gọi function thực hiện cài đặt).&lt;/p&gt;
&lt;p&gt;Ví dụ một file tên (tuỳ ý) như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;# gicungduoc.jl&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;Pkg&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;HTTP&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;JSON&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;DocOpt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy code này: &lt;code&gt;julia gicungduoc.jl&lt;/code&gt; sẽ cài đặt các package, sau đó cứ thế mà dùng các thư viện này.&lt;/p&gt;
&lt;h3&gt;The good, the OK, the ugly&lt;/h3&gt;
&lt;h4&gt;The good - phần tốt&lt;/h4&gt;
&lt;h5&gt;Pipe operator&lt;/h5&gt;
&lt;p&gt;Tốt hay xấu là tuỳ do từng người tự phán xét.
Hãy xem đoạn code sau:&lt;/p&gt;
&lt;p&gt;Python: &lt;code&gt;''.join("  Py thon    ".strip().split())&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Julia: &lt;code&gt;"  Py thon    " |&amp;gt; strip |&amp;gt; split |&amp;gt; xs -&amp;gt; join(xs, "")&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;incr&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;double&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c"&gt;# 7&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;|&amp;gt;&lt;/code&gt; gọi là &lt;code&gt;Piping operator&lt;/code&gt;, lấy đầu ra của function này làm đầu vào cho function khác.
Giúp việc goi funciton liên tục (và đọc nó) dễ dàng hơn.
Giống UNIX command.&lt;/p&gt;
&lt;h5&gt;Nhanh&lt;/h5&gt;
&lt;p&gt;Julia thường nhanh hơn Python &lt;a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/julia-python3.html"&gt;ít nhất 2 lần&lt;/a&gt;&lt;/p&gt;
&lt;h5&gt;Không quan trọng indentation&lt;/h5&gt;
&lt;p&gt;Dù bạn thụt ra thụt vào 2 3 4 5 ký tự, hay dùng tab đều không quan trọng.
Chuyện này vốn gây đau đầu cho không ít người dùng Python.&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;
 &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
   &lt;span class="kd"&gt;global&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
 &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c"&gt;# 233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia dùng từ &lt;code&gt;end&lt;/code&gt; để kết thúc &lt;code&gt;if&lt;/code&gt; hay &lt;code&gt;for&lt;/code&gt;, nên không cần thiết sử dụng dấu cách hay tab để thụt dòng.
Thậm chí có thể dùng &lt;code&gt;;&lt;/code&gt; để phân cách các phần, và viết trên 1 dòng (bạn KHÔNG THỂ làm điều này với Python khi có for):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="kd"&gt;global&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Range bao gồm cả số kết thúc&lt;/h5&gt;
&lt;p&gt;Một điều gây khó chịu với người mới code Python là phần kết thúc của range không được tính.
Tức nếu viết &lt;code&gt;range(1,1000)&lt;/code&gt; thì chỉ có từ 1 đến 999. Trong đầu luôn phải nhớ bớt đi 1.
Julia &lt;code&gt;1:999&lt;/code&gt; nghĩa là 1 đến 999, không thêm bớt gì.&lt;/p&gt;
&lt;h5&gt;Không bị "leak" biến i trong vòng lặp ra ngoài&lt;/h5&gt;
&lt;p&gt;Đây là &lt;a href="https://stackoverflow.com/questions/3611760/scoping-in-python-for-loops"&gt;1 bug của Python&lt;/a&gt;, do sau này quá muộn để sửa, &lt;a href="https://www.wired.com/story/its-not-a-bug-its-a-feature/"&gt;người ta coi nó như 1 tính năng&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# i vốn ở trong vòng lặp for, nay thoát ra ngoài với giá trị = 3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Hỗ trợ functional&lt;/h5&gt;
&lt;p&gt;Viết map trong Julia rất dễ chịu - dễ đọc:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;map([1,2,3]) do x
  x + 1
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cách viết dùng lambda: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;sẽ tạo array chứa &lt;code&gt;[2,3,4]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;The OK - ổn&lt;/h4&gt;
&lt;h5&gt;Index from 1&lt;/h5&gt;
&lt;p&gt;Chuyện này gây sốc với lập trình viên lâu năm C, Java, PHP, Python ...
Nhưng không phải là hiếm có. Lua, MatLab, R đều dùng index từ 1.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong Julia code này sẽ in ra số 4 nhưng Python sẽ xảy ra exception do Python index đếm từ 0&lt;/p&gt;
&lt;p&gt;Dùng nhiều sẽ quen và cũng không ghê gớm lắm, do Julia sử dụng cả phần cuối của range.&lt;/p&gt;
&lt;p&gt;Ví dụ slice: Python lấy 3 số đầu tiên của list:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đều kết thúc là 3 - đều là số phần tử cần lấy.&lt;/p&gt;
&lt;p&gt;Nhưng tệ hơn khi cần lấy 2 phần tử cuối:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;end&lt;/code&gt; là một index magic (tự xuất hiện), đại diện cho index của phần tử cuối cùng.&lt;/p&gt;
&lt;p&gt;Trong ví dụ này gõ số 4 thay end cũng được.&lt;/p&gt;
&lt;h4&gt;The ugly - thảm hại&lt;/h4&gt;
&lt;p&gt;Unicode string - sẽ rất đau đầu khi chuyển từ Python sang.&lt;/p&gt;
&lt;p&gt;Index của string (mặc định Unicode) trong Julia là byte index, không phải index theo thứ tự của ký tự.&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Đ&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;i&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ulia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="sc"&gt;&amp;#39;Đ&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Unicode&lt;/span&gt; &lt;span class="n"&gt;U&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;0110&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;category&lt;/span&gt; &lt;span class="n"&gt;Lu&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Letter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uppercase&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;StringIndexError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Stacktrace&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;string_index_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;getindex_continued&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;UInt32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;getindex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt; &lt;span class="n"&gt;scope&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;none&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="sc"&gt;&amp;#39;i&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ASCII&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Unicode&lt;/span&gt; &lt;span class="n"&gt;U&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;0069&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;category&lt;/span&gt; &lt;span class="n"&gt;Ll&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Letter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lowercase&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do chữ &lt;code&gt;Đ&lt;/code&gt; trong Unicode UTF-8 được biểu diễn bằng 2 byte, ta chỉ có thể truy cập 
được index 1, không truy cập được index 2. Và chữ &lt;code&gt;i&lt;/code&gt; ngay sau &lt;code&gt;Đ&lt;/code&gt; sẽ là index 3.&lt;/p&gt;
&lt;h4&gt;Exception&lt;/h4&gt;
&lt;p&gt;TBD&lt;/p&gt;
&lt;h4&gt;Chú ý&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Julia khởi động mất 0.2-0.4 giây, Python khởi động nhanh gấp 10.&lt;/li&gt;
&lt;li&gt;String trong Julia phải dùng double quote &lt;code&gt;""&lt;/code&gt;, single quote &lt;code&gt;''&lt;/code&gt; dành cho ký tự (Char).&lt;/li&gt;
&lt;li&gt;Nối string dùng &lt;code&gt;*&lt;/code&gt; chứ không phải &lt;code&gt;+&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Sẽ không có method gắn liền vào các object như string hay list trong Python,
  thay vào đó là các function có sẵn (thường không cần import, gọi là trong &lt;a href="https://docs.julialang.org/en/v1/base/base/"&gt;Base&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Ví dụ 1 chương trình CLI nhận argument, gọi HTTP với JSON&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;DocOpt&lt;/span&gt;  &lt;span class="c"&gt;# import docopt function&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot;Fist Julia program which makes HTTP requests to httpbin endpoint&lt;/span&gt;

&lt;span class="s"&gt;    Usage:&lt;/span&gt;
&lt;span class="s"&gt;      main.jl request &amp;lt;endpoint&amp;gt;&lt;/span&gt;

&lt;span class="s"&gt;    Options:&lt;/span&gt;
&lt;span class="s"&gt;      -h --help     Show this screen.&lt;/span&gt;
&lt;span class="s"&gt;      --version     Show version.&lt;/span&gt;
&lt;span class="s"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;docopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;endpoint&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://httpbin.org/&lt;/span&gt;&lt;span class="si"&gt;$endpoint&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Accessing &lt;/span&gt;&lt;span class="si"&gt;$url&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;My IP is &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;origin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Now also send post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;POST&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://httpbin.org/post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/data.json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
        &lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/data.json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
        &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
        &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`ls -l`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;io&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="n"&gt;eachline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;isa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;r&amp;quot;.*\.jl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Nothing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;end&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ julia  main.jl  -h
Fist Julia program which makes HTTP requests to httpbin endpoint

Usage:
  main.jl request &amp;lt;endpoint&amp;gt;

Options:
  -h --help     Show this screen.
  --version     Show version.

$ julia main.jl request ip
Accessing https://httpbin.org/ip
My IP is &lt;span class="m"&gt;3&lt;/span&gt;.117.2.254, &lt;span class="m"&gt;3&lt;/span&gt;.117.2.254
Now also send post
Dict&lt;span class="o"&gt;{&lt;/span&gt;String,Any&lt;span class="o"&gt;}(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;3,&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;2&lt;span class="o"&gt;)&lt;/span&gt;
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; viethung.nguyen viethung.nguyen &lt;span class="m"&gt;1189&lt;/span&gt; Apr &lt;span class="m"&gt;12&lt;/span&gt; &lt;span class="m"&gt;08&lt;/span&gt;:38 main.jl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code hoàn toàn tương đương với code Python.&lt;/p&gt;
&lt;h3&gt;Kết luận&lt;/h3&gt;
&lt;p&gt;Còn chờ gì nữa?
Làm tí Julia thôi.&lt;/p&gt;
&lt;p&gt;Phần tiếp theo (nếu có) sẽ đi vào các tính năng của Julia sử dụng trong tính toán khoa học.&lt;/p&gt;
&lt;h3&gt;Tham khảo&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.julialang.org/en/v1/"&gt;https://docs.julialang.org/en/v1/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikibooks.org/wiki/Introducing_Julia"&gt;https://en.wikibooks.org/wiki/Introducing_Julia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://lectures.quantecon.org/jl/"&gt;https://lectures.quantecon.org/jl/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="julia"></category><category term="python"></category></entry><entry><title>Dùng MicroPython với wifi board ESP-8266</title><link href="http://pp.pymi.vn/article/micropython/" rel="alternate"></link><published>2018-10-21T00:00:00+07:00</published><updated>2018-10-21T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-10-21:/article/micropython/</id><summary type="html">&lt;p&gt;Chạy code Python trên thiết bị với chỉ 96KB RAM và 4MB bộ nhớ flash.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Khi trở thành một trong những ngôn ngữ lập trình phổ biến nhất thế giới,
Python không chỉ được dùng trong làm web, data science, hay sysadmin tool mà
nó còn đá sang cả một lĩnh vực vốn giới hạn về tài nguyên: nhúng.&lt;/p&gt;
&lt;p&gt;Bình thường khi bật Python lên để in ra màn hình dòng "hello, world" ta đã
dùng tới 8MB bộ nhớ. Vậy nên việc dùng Python cho lập trình nhúng thường nghe
có vẻ không phù hợp.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://micropython.org"&gt;MicroPython&lt;/a&gt; ra đời, là một bản thu gọn của Python, tối ưu chạy trên các vi xử
lý cũng như các môi trường giới hạn về tài nguyên.
Bài này khám phá việc chạy MicroPython trên một thiết bị tí hon
có tên WEMOS D1 mini.&lt;/p&gt;
&lt;h2&gt;WEMOS D1 mini&lt;/h2&gt;
&lt;p&gt;Là 1 bảng mạch điện có khả năng thu phát sóng wifi (wifi board) có kích thước
nhỏ hơn ngón chân cái của người lớn, thiết bị này có giá 2 USD.&lt;/p&gt;
&lt;p&gt;&lt;img alt="WEMOS D1 Mini" src="http://pp.pymi.vn/images/wemos1.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Bảng mạch này sử dụng vi điều khiển (microcontroller) ESP-8266, với xung nhịp
80MHz/160MHz, 96KB RAM và 4 MB Flash.&lt;/p&gt;
&lt;h3&gt;Microcontroller&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;A microcontroller is a small computer on a single integrated circuit. In modern
terminology, it is similar to, but less sophisticated than, a system on a chip
or SoC; an SoC may include a microcontroller as one of its components. A
microcontroller contains one or more CPUs along with memory and programmable
input/output peripherals.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Một vi điều khiển là một máy tính nhỏ, trên một mạch điện tử (P/S: SoC là khái
        niệm tương tự, nhưng phức tạp hơn). Nó có một hoặc nhiều CPU, memory và
chỗ để thực hiện vào ra dữ liệu.&lt;/p&gt;
&lt;p&gt;Hãy nhìn vào chiếc máy bàn hay laptop bạn đang dùng, nó có 1 cục CPU to bằng
lòng bàn tay, vài thanh RAM dài như bàn tay, các cổng vào ra đều to bằng ngón
tay. Mỗi cục CPU đều từ 2-3 GHz (so với 80MHz), ổ cứng vài trăm GB (so với 4MB),
1-16 GB RAM (so với 96KB RAM).
Ta sẽ thấy microcontroller nhỏ bé và "yếu ớt" đến chừng nào.&lt;/p&gt;
&lt;p&gt;&lt;img alt="WEMOS D1 Mini" src="http://pp.pymi.vn/images/esp8266.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;MicroPython&lt;/h3&gt;
&lt;p&gt;Phiên bản Python dành riêng cho các thiết bị tí hon này nhỏ tới mức chỉ cần
256kB không gian chứa code, và 16kB RAM.&lt;/p&gt;
&lt;h2&gt;Cài đặt MicroPython lên WEMOS D1 Mini trên Ubuntu 16.04&lt;/h2&gt;
&lt;p&gt;(Windows hay OSX cần cài driver, hãy lên trang chủ của WEMOS để tải và xem
 hướng dẫn).&lt;/p&gt;
&lt;p&gt;Cắm thiết bị vào máy tính sử dụng dây micro USB (dây sạc điện thoại android),
sẽ thấy nháy đèn trên thiết bị, gõ lệnh &lt;code&gt;dmesg&lt;/code&gt; để xem Linux kernel báo nhận
thiết bị:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dmesg
...
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.253009&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: new full-speed USB device number &lt;span class="m"&gt;5&lt;/span&gt; using xhci_hcd
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402181&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: New USB device found, &lt;span class="nv"&gt;idVendor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1a86, &lt;span class="nv"&gt;idProduct&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;7523&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402185&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: New USB device strings: &lt;span class="nv"&gt;Mfr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;, &lt;span class="nv"&gt;Product&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;, &lt;span class="nv"&gt;SerialNumber&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402187&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: Product: USB2.0-Serial
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402757&lt;span class="o"&gt;]&lt;/span&gt; ch341 &lt;span class="m"&gt;2&lt;/span&gt;-1:1.0: ch341-uart converter detected
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.403119&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: ch341-uart converter now attached to ttyUSB0
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ file /dev/ttyUSB0
/dev/ttyUSB0: character special &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;188&lt;/span&gt;/0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta có thấy xuất hiện 1 file mới gọi là &lt;code&gt;/dev/ttyUSB0&lt;/code&gt;, đây chính là thiết bị
vừa kết nối.&lt;/p&gt;
&lt;h3&gt;Cài đặt MicroPython sử dụng esptool&lt;/h3&gt;
&lt;p&gt;Cài đặt esptool dùng pip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install esptool
Collecting esptool
...
Successfully installed ecdsa-0.13 esptool-2.5.1 pyaes-1.6.1 pyserial-3.4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xóa nội dung hiện tại trong flash memory&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /home/hvn/py36/bin/esptool.py --port /dev/ttyUSB0 erase_flash
esptool.py v2.5.1
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
MAC: b4:e6:2d:3b:22:1b
Uploading stub...
Running stub...
Stub running...
Erasing flash &lt;span class="o"&gt;(&lt;/span&gt;this may take a &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;...
Chip erase completed successfully in &lt;span class="m"&gt;1&lt;/span&gt;.6s
Hard resetting via RTS pin...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tải MicroPython bản dành cho ESP8266: bản mới nhất tại thời điểm viết bài
http://micropython.org/resources/firmware/esp8266-20180511-v1.9.4.bin&lt;/p&gt;
&lt;p&gt;Ghi micropython lên flash memory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /home/hvn/py36/bin/esptool.py --port /dev/ttyUSB0 --baud &lt;span class="m"&gt;460800&lt;/span&gt; write_flash --flash_size&lt;span class="o"&gt;=&lt;/span&gt;detect -fm dio &lt;span class="m"&gt;0&lt;/span&gt; ~/esp8266-20180511-v1.9.4.bin
esptool.py v2.5.1
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
MAC: b4:e6:2d:3b:22:1b
Uploading stub...
Running stub...
Stub running...
Changing baud rate to &lt;span class="m"&gt;460800&lt;/span&gt;
Changed.
Configuring flash size...
Auto-detected Flash size: 4MB
Flash params &lt;span class="nb"&gt;set&lt;/span&gt; to 0x0240
Compressed &lt;span class="m"&gt;604872&lt;/span&gt; bytes to &lt;span class="m"&gt;394893&lt;/span&gt;...
Wrote &lt;span class="m"&gt;604872&lt;/span&gt; bytes &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;394893&lt;/span&gt; compressed&lt;span class="o"&gt;)&lt;/span&gt; at 0x00000000 in &lt;span class="m"&gt;9&lt;/span&gt;.0 seconds &lt;span class="o"&gt;(&lt;/span&gt;effective &lt;span class="m"&gt;536&lt;/span&gt;.4 kbit/s&lt;span class="o"&gt;)&lt;/span&gt;...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi cài đặt xong, bấm nút "reset" trên thiết bị để khởi động lại, ngay sau
đó bật WIFI của laptop hay điện thoại lên ta sẽ thấy một mạng WIFI có tên
&lt;code&gt;MicroPython-xxxxxx&lt;/code&gt;, có thể kết nối vào WIFI này với password &lt;code&gt;micropythoN&lt;/code&gt;.
Ở đây ta không cần làm việc này. Tiếp tục cài đặt để kết nối với thiết bị qua
cổng COM:&lt;/p&gt;
&lt;p&gt;Cài &lt;code&gt;picocom&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install -y picocom
$ sudo picocom /dev/ttyUSB0 --baud &lt;span class="m"&gt;115200&lt;/span&gt;
picocom v1.7

port is        : /dev/ttyUSB0
flowcontrol    : none
baudrate is    : &lt;span class="m"&gt;115200&lt;/span&gt;
parity is      : none
databits are   : &lt;span class="m"&gt;8&lt;/span&gt;
escape is      : C-a
&lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; is  : no
noinit is      : no
noreset is     : no
nolock is      : no
send_cmd is    : sz -vv
receive_cmd is : rz -vv
imap is        :
omap is        :
emap is        : crcrlf,delbs,

Terminal ready

&amp;gt;&amp;gt;&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt;**1000
&lt;span class="m"&gt;10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi kết nối, ta lập tức sử dụng Python interpreter như bình thường.&lt;/p&gt;
&lt;p&gt;Python interpreter đóng vai trò như 1 hệ điều hành ở đây, mỗi lần reset thiết bị,
nó sẽ lại bật lại Python interpreter.
Mọi tương tác với thiết bị (đọc/ghi file) đều thực hiện qua code python.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getcwd&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listdir&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;boot.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;main.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hai file này được chạy mỗi lần thiết bị khởi động.&lt;/p&gt;
&lt;p&gt;Xem nội dung file &lt;code&gt;boot.py&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;boot.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="c1"&gt;# This file is executed on every boot (including wake-boot from deepsleep)&lt;/span&gt;
&lt;span class="c1"&gt;#import esp&lt;/span&gt;
&lt;span class="c1"&gt;#esp.osdebug(None)&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gc&lt;/span&gt;
&lt;span class="c1"&gt;#import webrepl&lt;/span&gt;
&lt;span class="c1"&gt;#webrepl.start()&lt;/span&gt;
    &lt;span class="n"&gt;gc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;collect&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File &lt;code&gt;main.py&lt;/code&gt; chứa code của người dùng muốn chạy mỗi lần bật thiết bị. Ví dụ ta muốn hiển thị dòng hello PyMi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;main.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;print(&amp;quot;Hello Pymi.vn&amp;quot;)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bấm nút reset sẽ thấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
ets_task(40100130, 3, 3fff83ec, 4)
Hello Pymi.vn

MicroPython v1.9.4-8-ga9a3caad0 on 2018-05-11; ESP module with ESP8266
Type &amp;quot;help()&amp;quot; for more information.
&amp;gt;&amp;gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thao tác với các chân Pin&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;machine&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="vm"&gt;__class__&lt;/span&gt;       &lt;span class="n"&gt;IN&lt;/span&gt;              &lt;span class="n"&gt;IRQ_FALLING&lt;/span&gt;     &lt;span class="n"&gt;IRQ_RISING&lt;/span&gt;
&lt;span class="n"&gt;OPEN_DRAIN&lt;/span&gt;      &lt;span class="n"&gt;OUT&lt;/span&gt;             &lt;span class="n"&gt;PULL_UP&lt;/span&gt;         &lt;span class="n"&gt;init&lt;/span&gt;
&lt;span class="n"&gt;irq&lt;/span&gt;             &lt;span class="n"&gt;off&lt;/span&gt;             &lt;span class="n"&gt;on&lt;/span&gt;              &lt;span class="n"&gt;value&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Baud&lt;/h3&gt;
&lt;p&gt;Baud /ˈbɔːd/ ở câu lệnh trên là một độ đo "symbol rate" (symbol per second), để
quyết định tốc độ giao tiếp qua một kênh thông tin.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Với MicroPython trên thiết bị, ta đã có thể thực hiện điều khiển các chân Pin hay gửi HTTP request như code Python bình thường. Giờ thì giới hạn chỉ còn là trí tưởng tượng của bạn.&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://docs.micropython.org/en/latest/esp8266/tutorial/intro.html#intro&lt;/li&gt;
&lt;li&gt;https://wiki.wemos.cc/products:d1:d1_mini&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="micropython"></category><category term="embedded"></category><category term="esp8266"></category><category term="iot"></category></entry><entry><title>Dùng Raspberry Pi để gửi và nhận SMS với Sim900A</title><link href="http://pp.pymi.vn/article/raspberry-pi-sim900a/" rel="alternate"></link><published>2018-10-09T00:00:00+07:00</published><updated>2018-10-09T00:00:00+07:00</updated><author><name>tudoanh</name></author><id>tag:pp.pymi.vn,2018-10-09:/article/raspberry-pi-sim900a/</id><summary type="html">&lt;p&gt;Summary: Hướng dẫn kết nối module Sim900A với Raspberry Pi 3 B+, dùng để gửi và nhận tin nhắn SMS&lt;/p&gt;
&lt;p&gt;Dạo này vì lý do công việc nên cần phải tìm cách kết nối và sử dụng module Sim900A với con Raspberry Pi 3, dùng để nhận SMS.&lt;/p&gt;
&lt;p&gt;Tìm hiểu …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Summary: Hướng dẫn kết nối module Sim900A với Raspberry Pi 3 B+, dùng để gửi và nhận tin nhắn SMS&lt;/p&gt;
&lt;p&gt;Dạo này vì lý do công việc nên cần phải tìm cách kết nối và sử dụng module Sim900A với con Raspberry Pi 3, dùng để nhận SMS.&lt;/p&gt;
&lt;p&gt;Tìm hiểu mấy hôm, rất là cực nên hôm nay mình viết lại bài này, cho những ai cần tới sau này đỡ tốn thời gian mày mò lại từ đầu.&lt;/p&gt;
&lt;h3&gt;Chuẩn bị&lt;/h3&gt;
&lt;p&gt;Để bắt đầu, bạn cần:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Một combo &lt;strong&gt;Raspberry Pi 3 B+&lt;/strong&gt; đầy đủ nguồn, thẻ nhớ, đã cài đặt &lt;strong&gt;Raspbian&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Một module &lt;strong&gt;Sim900A&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/vvIy62p.jpg" src="https://i.imgur.com/vvIy62p.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dây chuyển đổi USB - UART PL2303 (Có thể không có)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/wWkr422.jpg" src="https://i.imgur.com/wWkr422.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đầy đủ dây nối&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/C40X3gs.png" src="https://i.imgur.com/C40X3gs.png"&gt;&lt;/p&gt;
&lt;h3&gt;Kết nối&lt;/h3&gt;
&lt;p&gt;Chỉ cần bạn kết nối đúng các cổng &lt;em&gt;Tx, Rx, Gnd và nguồn 5v&lt;/em&gt; vào Pi là xong. Tham khảo ảnh dưới:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg" src="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Ảnh thực tế (Nếu kết nối thẳng vào GPIO)&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/KRanp3y.jpg" src="https://i.imgur.com/KRanp3y.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/dQhoN8e.jpg" src="https://i.imgur.com/dQhoN8e.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Còn nếu kết nối qua USB&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/2DHsQCx.jpg" src="https://i.imgur.com/2DHsQCx.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;p&gt;Đầu tiên ta cần mở cổng &lt;strong&gt;ttyS0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Bạn có thể dùng "raspi-config" để mở UART:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/NVchkKl.png" src="https://i.imgur.com/NVchkKl.png"&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Trong "Interfacing Options", chọn "Serial"&lt;/li&gt;
&lt;li&gt;Chọn "No" khi được hỏi "You want a login shell over serial?".&lt;/li&gt;
&lt;li&gt;Chọn "Yes" khi được hỏi "You want the hardware enabled?"&lt;/li&gt;
&lt;li&gt;Khởi động lại&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Thực ra, bạn có thể sửa file &lt;em&gt;/boot/config.txt&lt;/em&gt; và sửa &lt;strong&gt;enable_uart=1&lt;/strong&gt;, và &lt;strong&gt;console=serial0,115200&lt;/strong&gt; (hoặc &lt;strong&gt;console=ttyS0,115200&lt;/strong&gt;) ở trong &lt;em&gt;/boot/cmdline.txt&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Và bạn có thể bật &lt;em&gt;terminal&lt;/em&gt; lên và test xem kết nối thành công chưa bằng cách gửi command &lt;strong&gt;AT\r\n&lt;/strong&gt; đến khi nào trả về &lt;strong&gt;OK&lt;/strong&gt; là thành công. (Nếu kết nối qua GPIO thì sẽ là &lt;strong&gt;/dev/ttyS0&lt;/strong&gt;, còn qua USB thì sẽ là &lt;strong&gt;/dev/ttyUSB0&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/59K45tV.png" src="https://i.imgur.com/59K45tV.png"&gt;&lt;/p&gt;
&lt;p&gt;Link asciinema:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS"&gt;&lt;img alt="asciicast" src="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sau đó bạn có thể gửi và đọc tin nhắn bằng lib mình đã viết ở đây (Ví dụ cách sử dụng ở trong link):&lt;/p&gt;
&lt;p&gt;https://github.com/tudoanh/sim900a&lt;/p&gt;
&lt;p&gt;Ví dụ về kết quả nhận được bằng lệnh &lt;strong&gt;AT+CNMI=3,2,0,0,0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/ecz65hk.png" src="https://i.imgur.com/ecz65hk.png"&gt;&lt;/p&gt;
&lt;p&gt;Về chi tiết cách sử dụng các lệnh AT và các khái niệm GPIO, UART mình sẽ để sang một bài khác.&lt;/p&gt;
&lt;p&gt;Chúc các bạn thành công.&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;https://pinout.xyz/&lt;/li&gt;
&lt;li&gt;http://mlab.vn/9216-huong-dan-lap-trinh-module-sim900a-va-arduino.html&lt;/li&gt;
&lt;li&gt;https://www.developershome.com/sms/checkCommandSupport3.asp&lt;/li&gt;
&lt;li&gt;https://raspberrypi.stackexchange.com/questions/82696/how-do-i-connect-gsm-sim-900a-to-a-raspberry-pi-3&lt;/li&gt;
&lt;li&gt;https://www.espruino.com/datasheets/SIM900_AT.pdf&lt;/li&gt;
&lt;li&gt;https://hristoborisov.com/index.php/projects/turning-the-raspberry-pi-into-a-sms-center-using-python/#Connecting_the_3gModem&lt;/li&gt;
&lt;/ol&gt;</content><category term="Trang chủ"></category><category term="raspberry"></category><category term="pi"></category><category term="sim"></category><category term="900a"></category><category term="sms"></category></entry><entry><title>Quản lý, sử dụng package trong CHICKEN Scheme</title><link href="http://pp.pymi.vn/article/scm_egg/" rel="alternate"></link><published>2018-10-05T00:00:00+07:00</published><updated>2018-10-05T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-10-05:/article/scm_egg/</id><summary type="html">&lt;p&gt;Con đường nhanh nhất để sử dụng 1 ngôn ngữ là dùng nó!&lt;/p&gt;</summary><content type="html">&lt;p&gt;Học và hành thường ở rất xa nhau.
Ta có thể học đủ loại khái niệm, đủ loại cú pháp, viết các thuật toán để luyện
ngôn ngữ, nhưng rồi lại mãi luẩn quẩn ở đó, không thoát ra được, không bay
lên nổi. Viết 1 vòng for, 2 câu if bằng Python, JavaScript, Golang hay
&lt;a href="https://elixir.pymi.vn/"&gt;Elixir&lt;/a&gt;
cũng không hơn nhau gì cả, chỉ thay đổi chút cú pháp thôi.&lt;/p&gt;
&lt;p&gt;Thế nên cách "tốt nhất" để học 1 ngôn ngữ lập trình, không phải là học đủ các
khái niệm, best practice, viết code chuẩn đẹp tuyệt đối, mà là việc hoàn thành
một sản phẩm từ đầu đến tận X Y Z. Đưa ra sản phẩm cuối cùng, có thể là trang
web chạy với domain hẳn hoi, có thể là chương trình đóng thành package,
thành file cài đặt, hay game có giao diện đầy đủ.&lt;/p&gt;
&lt;p&gt;Package manager giúp cài đặt các thư viện có sẵn là công cụ giúp ta đến đích
nhanh nhất. Python có pip, JavaScript có NPM, Elixir có mix, Rust có cargo ...
thì CHICKEN Scheme có &lt;code&gt;chicken-install&lt;/code&gt;, câu lệnh có sẵn khi cài CHICKEN
Scheme.&lt;/p&gt;
&lt;h2&gt;Cài đặt extension&lt;/h2&gt;
&lt;p&gt;CHICKEN Scheme gọi các gói thư viện là extension hay "egg".&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chicken-install tên-extension&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ví dụ cài &lt;code&gt;regex&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chicken-install regex
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; hvn:  GO PASSWORD
retrieving ...
connecting to host &lt;span class="s2"&gt;&amp;quot;chicken.kitten-technologies.co.uk&amp;quot;&lt;/span&gt;, port &lt;span class="m"&gt;80&lt;/span&gt; ...
requesting &lt;span class="s2"&gt;&amp;quot;/henrietta.cgi?name=regex&amp;amp;mode=default&amp;quot;&lt;/span&gt; ...
reading response ...
HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Date: Fri, &lt;span class="m"&gt;05&lt;/span&gt; Oct &lt;span class="m"&gt;2018&lt;/span&gt; &lt;span class="m"&gt;14&lt;/span&gt;:28:32 GMT
Server: Apache/2.2.31 &lt;span class="o"&gt;(&lt;/span&gt;Unix&lt;span class="o"&gt;)&lt;/span&gt; DAV/2 PHP/5.5.36 mod_fastcgi/2.4.6
...
checking platform &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;regex&lt;span class="s1"&gt;&amp;#39; ...&lt;/span&gt;
&lt;span class="s1"&gt;checking dependencies for `regex&amp;#39;&lt;/span&gt; ...
install order:
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;regex&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
installing regex:1.0 ...
changing current directory to /tmp/tempab50.21917/regex
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csi&amp;#39;&lt;/span&gt; -bnq -setup-mode -e &lt;span class="s2"&gt;&amp;quot;(require-library setup-api)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(import setup-api)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(setup-error-handling)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(extension-name-and-version &amp;#39;(\&amp;quot;regex\&amp;quot; \&amp;quot;1.0\&amp;quot;))&amp;quot;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;regex.setup&amp;#39;&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csc&amp;#39;&lt;/span&gt; -feature compiling-extension -setup-mode    -s -O3 -d1 regex.scm -JS
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csc&amp;#39;&lt;/span&gt; -feature compiling-extension -setup-mode    -s -O3 -d0 regex.import.scm
  cp -r &lt;span class="s1"&gt;&amp;#39;regex.so&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.so&amp;#39;&lt;/span&gt;
  cp -r &lt;span class="s1"&gt;&amp;#39;regex.import.so&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.import.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.import.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.setup-info&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bật &lt;code&gt;csi&lt;/code&gt; lên để gõ code gọi function &lt;code&gt;grep&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$&lt;/span&gt; &lt;span class="nv"&gt;csi&lt;/span&gt;
&lt;span class="nv"&gt;/usr/bin/rlwrap&lt;/span&gt;

&lt;span class="nv"&gt;CHICKEN&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2008-2014&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;The&lt;/span&gt; &lt;span class="nv"&gt;Chicken&lt;/span&gt; &lt;span class="nv"&gt;Team&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2000-2007&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;Felix&lt;/span&gt; &lt;span class="nv"&gt;L&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;Winkelmann&lt;/span&gt;
&lt;span class="nv"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;4.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;stability/4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;9.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="nv"&gt;b3189b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;linux-unix-gnu-x86-64&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="nv"&gt;bit&lt;/span&gt; &lt;span class="nv"&gt;manyargs&lt;/span&gt; &lt;span class="nv"&gt;dload&lt;/span&gt; &lt;span class="nv"&gt;ptables&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;bootstrapped&lt;/span&gt; &lt;span class="mi"&gt;2014-06-07&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;1&amp;gt; (grep &amp;quot;[0-9]&amp;quot; (list &amp;quot;pymi&amp;quot; &amp;quot;2018&amp;quot; &amp;quot;pymi2018&amp;quot;))&lt;/span&gt;

&lt;span class="nv"&gt;Error:&lt;/span&gt; &lt;span class="nv"&gt;unbound&lt;/span&gt; &lt;span class="nv"&gt;variable:&lt;/span&gt; &lt;span class="nv"&gt;grep&lt;/span&gt;

    &lt;span class="nv"&gt;Call&lt;/span&gt; &lt;span class="nv"&gt;history:&lt;/span&gt;

    &lt;span class="nv"&gt;&amp;lt;syntax&amp;gt;&lt;/span&gt;      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;grep&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[0-9]&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nv"&gt;&amp;lt;syntax&amp;gt;&lt;/span&gt;      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;&amp;lt;eval&amp;gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;grep&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[0-9]&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;    &lt;span class="nv"&gt;&amp;lt;--&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nội dung error rõ ràng: &lt;code&gt;Error: unbound variable: grep&lt;/code&gt; - không hiểu &lt;code&gt;grep&lt;/code&gt;
là cái gì - nó không phải một variable/function đã tồn tại.&lt;/p&gt;
&lt;h2&gt;Sử dụng / import extension&lt;/h2&gt;
&lt;p&gt;Dùng macro &lt;code&gt;use ten-extension&lt;/code&gt; (tại bài này cứ hiểu là function cũng tạm ổn)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;1&amp;gt; (use regex)&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/regex.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/chicken.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/irregex.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/regex.so ...&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;2&amp;gt; (grep &amp;quot;[0-9]&amp;quot; (list &amp;quot;pymi&amp;quot; &amp;quot;2018&amp;quot; &amp;quot;pymi2018&amp;quot;))&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta thu được list các phần tử có chứa số, string "[0-9]" là regular expression
biểu diễn một số hệ 10.&lt;/p&gt;
&lt;h2&gt;Đọc tài liệu của module/function&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;grep&lt;/code&gt; ở trên làm gì? CHICKEN Scheme có chương trình &lt;code&gt;chicken-doc&lt;/code&gt; để tra
tài liêu, tương tự python có &lt;code&gt;pydoc&lt;/code&gt;. Để có &lt;code&gt;chicken-doc&lt;/code&gt;, cần cài extension
với lệnh: &lt;code&gt;sudo chicken-install chicken-doc&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-doc grep
path: &lt;span class="o"&gt;(&lt;/span&gt;regex grep&lt;span class="o"&gt;)&lt;/span&gt;

-- procedure: &lt;span class="o"&gt;(&lt;/span&gt;grep REGEX LIST &lt;span class="o"&gt;[&lt;/span&gt;ACCESSOR&lt;span class="o"&gt;])&lt;/span&gt;

Returns all items of &lt;span class="sb"&gt;`&lt;/span&gt;LIST&lt;span class="sb"&gt;`&lt;/span&gt; that match the regular expression &lt;span class="sb"&gt;`&lt;/span&gt;REGEX&lt;span class="sb"&gt;`&lt;/span&gt;. This procedure could be defined as follows:

  &lt;span class="o"&gt;(&lt;/span&gt;define &lt;span class="o"&gt;(&lt;/span&gt;grep regex lst&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;(&lt;/span&gt;filter &lt;span class="o"&gt;(&lt;/span&gt;lambda &lt;span class="o"&gt;(&lt;/span&gt;x&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;string-search regex x&lt;span class="o"&gt;))&lt;/span&gt; lst&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="sb"&gt;`&lt;/span&gt;ACCESSOR&lt;span class="sb"&gt;`&lt;/span&gt; is an optional accessor-procedure applied to each element before doing the match. It should take a single argument
and &lt;span class="k"&gt;return&lt;/span&gt; a string that will &lt;span class="k"&gt;then&lt;/span&gt; be used in the regular expression matching. &lt;span class="sb"&gt;`&lt;/span&gt;ACCESSOR&lt;span class="sb"&gt;`&lt;/span&gt; defaults to the identity &lt;span class="k"&gt;function&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-doc -i scheme  &lt;span class="c1"&gt;# đầy đủ doc về R5RS&lt;/span&gt;
...
$ chicken-doc -c scheme  &lt;span class="c1"&gt;# danh sách các procedure trong R5RS&lt;/span&gt;
...
$ chicken-doc data-structures
path: &lt;span class="o"&gt;(&lt;/span&gt;data-structures&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;==&lt;/span&gt; Unit data-structures

This unit contains a collection of procedures related to data structures. This unit is used by default, unless the
program is compiled with the &lt;span class="sb"&gt;`&lt;/span&gt;-explicit-use&lt;span class="sb"&gt;`&lt;/span&gt; option.
...


$ chicken-doc when &lt;span class="c1"&gt;# tìm từ khóa when, thấy 2 kết quả&lt;/span&gt;
Found &lt;span class="m"&gt;2&lt;/span&gt; matches:
&lt;span class="o"&gt;(&lt;/span&gt;spock when&lt;span class="o"&gt;)&lt;/span&gt;                  &lt;span class="o"&gt;(&lt;/span&gt;when X1 BODY ...&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;chicken special-forms when&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;when TEST EXP1 EXP2 ...&lt;span class="o"&gt;)&lt;/span&gt;
$ chicken-doc chicken special-forms when &lt;span class="c1"&gt;# xem kết quả thứ 2&lt;/span&gt;

-- syntax: &lt;span class="o"&gt;(&lt;/span&gt;when TEST EXP1 EXP2 ...&lt;span class="o"&gt;)&lt;/span&gt;

Equivalent to:

  &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; TEST &lt;span class="o"&gt;(&lt;/span&gt;begin EXP1 EXP2 ...&lt;span class="o"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Pydoc đi kèm với Python có khả năng tương tự:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pydoc len

Help on built-in &lt;span class="k"&gt;function&lt;/span&gt; len in module builtins:

len&lt;span class="o"&gt;(&lt;/span&gt;obj, /&lt;span class="o"&gt;)&lt;/span&gt;
    Return the number of items in a container.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Liệt kê các extension có trên "mạng"&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-install -list
2d-primitives
3viewer
9ML-toolkit
9p
AD
F-operator
R
abnf
accents-substitute
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tại thời điểm viết bài, có 781 egg trong kho - hơi ít.&lt;/p&gt;
&lt;h2&gt;Xem các extension library đã cài&lt;/h2&gt;
&lt;p&gt;Dùng lệnh &lt;code&gt;chicken-status&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-status
apropos ......................................... version: &lt;span class="m"&gt;2&lt;/span&gt;.1.0
check-errors .................................... version: &lt;span class="m"&gt;2&lt;/span&gt;.2.0
chicken-doc ..................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.4.7
chicken-doc-cmd ................................. version: &lt;span class="m"&gt;0&lt;/span&gt;.4.7
fmt ............................................. version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-c ........................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-color ....................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-js .......................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-unicode ..................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
iset .............................................. version: &lt;span class="m"&gt;2&lt;/span&gt;.0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Gỡ extension&lt;/h2&gt;
&lt;p&gt;Sử dụng câu lệnh &lt;code&gt;chicken-uninstall TEN-extension&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Danh sách với thông tin các extension&lt;/h2&gt;
&lt;p&gt;Xem online tai &lt;a href=""&gt;http://eggs.call-cc.org/4/&lt;/a&gt; cho bản CHICKEN stable hiện tại:
version 4.&lt;/p&gt;
&lt;p&gt;Bài viết thực hiện trên:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsb_release -r&lt;span class="p"&gt;;&lt;/span&gt; csi -version
Release:    &lt;span class="m"&gt;16&lt;/span&gt;.04

CHICKEN
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2008&lt;/span&gt;-2014, The Chicken Team
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2000&lt;/span&gt;-2007, Felix L. Winkelmann
Version &lt;span class="m"&gt;4&lt;/span&gt;.9.0.1 &lt;span class="o"&gt;(&lt;/span&gt;stability/4.9.0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 8b3189b&lt;span class="o"&gt;)&lt;/span&gt;
linux-unix-gnu-x86-64 &lt;span class="o"&gt;[&lt;/span&gt; 64bit manyargs dload ptables &lt;span class="o"&gt;]&lt;/span&gt;
bootstrapped &lt;span class="m"&gt;2014&lt;/span&gt;-06-07
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hết phần 2.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="scheme"></category><category term="lisp"></category><category term="chicken"></category><category term="htdp"></category></entry><entry><title>Tuple comprehension</title><link href="http://pp.pymi.vn/article/tuple_comps/" rel="alternate"></link><published>2018-09-10T00:00:00+07:00</published><updated>2018-09-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-09-10:/article/tuple_comps/</id><summary type="html">&lt;p&gt;List comprehension, set/dict comprehension, còn tuple? Generator là gì?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Python có sẵn (builtin) 4 kiểu dữ liệu "compound"/"container" quan trọng,
chúng dùng để chứa các giá trị. &lt;code&gt;list&lt;/code&gt;, &lt;code&gt;tuple&lt;/code&gt;, &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;dict&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Một lập trình viên Python phải nắm thành thạo cả 4 kiểu dữ liệu trên và vận
dụng linh hoạt, biết điểm mạnh yếu của từng kiểu. Bàn về chuyện &lt;em&gt;ấy&lt;/em&gt; lại cần
vài bài dài dòng khác nên sẽ giữ lại "để sau"/"lúc nào rảnh".&lt;/p&gt;
&lt;h2&gt;Comprehension&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Comprehension&lt;/strong&gt; là một đặc sản của Python, một khi biết đến là hay bị nghiện,
thứ cú pháp ngắn gọn sạch sẽ ngọt như mía lùi cũng chính là vũ khí
giết những con ong ham ăn.&lt;/p&gt;
&lt;p&gt;Cú pháp này Python &lt;a href="https://docs.python.org/3/whatsnew/2.0.html"&gt;"vay mượn" mà không bao giờ trả từ
Haskell&lt;/a&gt;
 - một ngôn ngữ
vốn có tiếng khó học và vi diệu. Hãy thử xem 2 ví dụ sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;more_than_four_chars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="n"&gt;more_than_four_chars&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;more_than_four_chars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Tam Giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4 dòng code (dòng print không tính)
trên để ta filter (lọc) từ một tập hợp đã cho, thu về các phần tử
thỏa mãn điều kiện (hơn 4 ký tự) rồi map (biến đổi) các ký tự đứng đầu thành
chữ hoa.&lt;/p&gt;
&lt;p&gt;Dù đẹp sạch dễ hiểu lắm rồi, nhưng so với list comprehension:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Tam Giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;thì sự ngắn gọn, đơn giản này đánh bại hoàn toàn cú pháp thông thường.&lt;/p&gt;
&lt;p&gt;Và ta còn làm tương tự được với &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;dict&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tuple comprehension&lt;/h2&gt;
&lt;p&gt;Dễ tưởng tượng ra là ta sẽ có luôn &lt;strong&gt;tuple comprehension&lt;/strong&gt; - vì nghe có vẻ hợp
lý mà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nc"&gt;generator&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SAI! khái niệm &lt;strong&gt;tuple comprehension&lt;/strong&gt; không tồn tại. Cùng cú pháp nhưng kết
quả thu được là 1 &lt;strong&gt;generator&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Vì sao thế?&lt;/h2&gt;
&lt;p&gt;Tuple được tạo ra, ban đầu trông như 1 phiên bản thiếu tính năng của &lt;code&gt;list&lt;/code&gt;,
nhưng mục đích tạo ra tuple là hoàn toàn khác. &lt;code&gt;tuple&lt;/code&gt; được dùng như khái
niệm &lt;code&gt;struct&lt;/code&gt; trong các ngôn ngữ khác, nó là tập hợp của các thông tin khác
nhau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Meo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0699609096&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PyMi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;và khi dùng thì unpack các giá trị ra:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;age&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;phone&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;PyMi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vn&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Còn list dùng để lặp qua/ duyệt qua:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Hello các bạn mình là {}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Vuong&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Tron&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Tam&lt;/span&gt; &lt;span class="n"&gt;Giac&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xem thêm tại &lt;a href="https://docs.python.org/3/faq/design.html#why-are-there-separate-tuple-and-list-data-types"&gt;FAQ của
Python&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ok, vậy chẳng có nghĩa lý gì để "comprehension" ra tuple cả.&lt;/p&gt;
&lt;h2&gt;Lập trình viên phê list comprehension túy lúy!&lt;/h2&gt;
&lt;p&gt;Đã dùng là nghiện, mà nghiện là rất khó tỉnh. List comprehension hấp dẫn vậy
nên thường bị dùng SAI, lạm dụng. Một điều duy nhất quan trọng cần nhớ:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;List comprehension là để tạo ra list.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thế nhưng không ít lần, nó bị lạm dụng, khi người ta không cần đến list:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;khi chỉ cần đếm "số lượng phần tử"&lt;/li&gt;
&lt;li&gt;để tính tổng&lt;/li&gt;
&lt;li&gt;để in ra màn hình&lt;/li&gt;
&lt;li&gt;để viết những vòng lặp điều kiện phức tạp.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;List comprehension tạo ra 1 list, vậy nên nếu không cần tới list kết quả đó
thì không nên dùng tới list comprehension mà hãy dùng vòng lặp for thông thường:&lt;/p&gt;
&lt;p&gt;Đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;VUONG&lt;/span&gt;
&lt;span class="n"&gt;TRON&lt;/span&gt;
&lt;span class="n"&gt;TAM&lt;/span&gt; &lt;span class="n"&gt;GIAC&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;VUONG&lt;/span&gt;
&lt;span class="n"&gt;TRON&lt;/span&gt;
&lt;span class="n"&gt;TAM&lt;/span&gt; &lt;span class="n"&gt;GIAC&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta không tạo ra 1 cái list vô nghĩa chứa 3 phần tử &lt;code&gt;None&lt;/code&gt; - tức là tiết kiệm bộ
nhớ (memory).&lt;/p&gt;
&lt;p&gt;Đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;450&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;450&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;vì ta sẽ không tạo ra 1 list (tạm) chứa 450 phần tử.&lt;/p&gt;
&lt;p&gt;Và đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;12499997500000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mà hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;12499997500000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;bởi ta sẽ không &lt;em&gt;vô tình&lt;/em&gt; tạo ra một list chiếm tới ~180MB bộ nhớ chỉ để tính
tổng.&lt;/p&gt;
&lt;p&gt;Cách tính&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;list_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5000000&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;list_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;list_size&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;40215168&lt;/span&gt; &lt;span class="mi"&gt;140000000&lt;/span&gt; &lt;span class="mi"&gt;180215168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và nếu như số vòng &lt;code&gt;for&lt;/code&gt; hay lệnh &lt;code&gt;if&lt;/code&gt; trong list comprehension nhiều hơn 2,3
nó không còn sạch sẽ và dễ đọc nữa, hãy quay trở về dùng vòng lặp &lt;code&gt;for&lt;/code&gt; thông
thường. &lt;a href="https://wikileaks.org/ciav7p1/cms/page_26607631.html"&gt;Ở CIA họ dạy thế&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;List/set/dict comprehension rất tiện để tạo list/set/dict, nhưng khi không
cần tới list/set/dict kết quả, hãy đừng lạm dụng.&lt;/p&gt;
&lt;h2&gt;Generator&lt;/h2&gt;
&lt;p&gt;Generator sinh ra các phần tử của list tương ứng, nhưng mỗi lần, chỉ có 1
phần tử được tạo ra, vì vậy thường dùng để tiết kiệm RAM. Cú pháp tạo generator
đơn giản chỉ là thay dấu &lt;code&gt;[]&lt;/code&gt; thành &lt;code&gt;()&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;19836760&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;88&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;5833329166668&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# chỗ này mượn tạm luôn dấu () của sum&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;5833329166668&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đã đến lúc lạm dụng &lt;strong&gt;generator&lt;/strong&gt;!!! nó được dùng mọi nơi trong Python3 và
là một cải tiến hấp dẫn của Python3 so với Python2.&lt;/p&gt;
&lt;h2&gt;Hết.&lt;/h2&gt;
&lt;p&gt;HVN at &lt;a href="https://pymi.vn"&gt;https://pymi.vn&lt;/a&gt; and http://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tuple"></category><category term="list"></category><category term="comprehension"></category><category term="memory"></category><category term="generator"></category></entry><entry><title>Bắt đầu lập trình CHICKEN Scheme</title><link href="http://pp.pymi.vn/article/scm1/" rel="alternate"></link><published>2018-09-03T00:00:00+07:00</published><updated>2018-09-03T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-09-03:/article/scm1/</id><summary type="html">&lt;p&gt;Cu Hít ở xứ sở LISP - 1 trong 2 ngôn lập trình lâu đời nhất trái đất.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Ba năm trước, khi chúng tôi bắt đầu mở khóa học đầu tiên dạy lập trình Python tại
&lt;a href="https://pymi.vn"&gt;PyMi&lt;/a&gt;, có 8 học viên đi học, hầu hết đều là sysadmin của một
công ty nào đó từng động tới OpenStack/SaltStack/Ansible.
Mới chỉ 3 năm trước, khi những người nghe tới Python tại Việt Nam
là những "hàng hiếm", thì tại thời điểm này, 2018, Python nhan nhản mọi nơi,
các trường (đại) học bắt đầu đưa Python vào chương trình giảng dạy, các
công ty tuyển Python như điên dại, làm Machine Learning, làm Odoo...
các chị em kế toán, ngân hàng bắt đầu kéo nhau đi học code Python!&lt;/p&gt;
&lt;p&gt;Hầu hết số đông đến với Python không phải vì ham mê lập trình, yêu thích những
dòng code sạch sẽ, mà đơn giản bởi (1) công việc yêu cầu (2) kiếm tiền.
Khi đạt được múc đích rồi thì sao? đơn giản là thì thôi. Việc này không có gì
sai cả.&lt;/p&gt;
&lt;p&gt;Vậy còn những người ham mê lập trình, yêu thích code thì làm gì? Họ tiếp tục
đào sâu thêm, học thêm vô vàn kiến thức trong thế giới lập trình, mở rộng
ra những ngôn ngữ mới, cách viết code mới, cách suy nghĩ mới.&lt;/p&gt;
&lt;p&gt;Python thành công bởi ngôn ngữ sạch sẽ, (dẫn tới) cộng đồng đông đảo, (dẫn
tới) các thư viện có sẵn rất nhiều, chất lượng chuẩn, cập nhật hàng ngày.
Hầu hết các ngôn ngữ bạn từng nghe tên sẽ nằm trong nhóm này, những ngôn ngữ
còn lại (có tới hàng ngàn ngôn ngữ lập trình) thường bị xem là "đã chết".
Một ngôn ngữ mã nguồn mở chỉ thực sự chết khi cộng đồng không còn một ai,
những ngôn ngữ bạn chưa nghe tên bao giờ có khi đơn giản vì bạn không quen
ai dùng ngôn ngữ đó.&lt;/p&gt;
&lt;p&gt;Python sinh năm 1991, C sinh năm 197x, thì LISP sinh ra vào năm 1958 (60 năm
trước - chỉ sau Fortran 1 năm - &lt;a href="https://www.familug.org/2016/02/python-python-tuoi-gi.html"&gt;xem bảng tuổi các ngôn
ngữ&lt;/a&gt; ).
Hẵn rất dễ cho rằng LISP đã chết, vì chẳng gặp ai ở Việt Nam dùng nó. Cho tới
khi bạn gặp một anh kỹ sư xây dựng dùng AutoCAD vẽ bản vẽ 2D thiết kế nhà,
và cộng đồng này vẫn truyền tay nhau những đoạn code LISP.&lt;/p&gt;
&lt;p&gt;Cộng đồng quốc tế rất đánh giá cao LISP, và có những thời điểm lịch sử, LISP
được gọi là ngôn ngữ của AI (một hướng phát triển AI rất khác so với
Machine Learning/Deep Learning sau này).&lt;/p&gt;
&lt;p&gt;LISP (&lt;strong&gt;LIS&lt;/strong&gt;t &lt;strong&gt;P&lt;/strong&gt;rocessor) là tên của một gia đình các ngôn ngữ lập trình,
có 2 nhánh (dialect) chính là Common Lisp và Scheme. Cả 2 dialect này đều có
đặc điểm chung sử dụng rất nhiều dấu &lt;code&gt;()&lt;/code&gt; nhưng khi thò tay vào code thì lại có
rất nhiều điểm khác. Một ví dụ viết function tính số gấp đôi của số đầu vào
bằng CHICKEN Scheme (một bản Scheme &lt;em&gt;còn sống&lt;/em&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;double&lt;/span&gt; &lt;span class="nv"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;* &lt;/span&gt;&lt;span class="nv"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Gọi function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define &lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;double&lt;/span&gt; &lt;span class="nv"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So với Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;
&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu xét kỹ, cú pháp của Scheme (&lt;code&gt;define&lt;/code&gt;) ít khái niệm/ký tự/nhất quán hơn
Python (&lt;code&gt;:&lt;/code&gt;, &lt;code&gt;def&lt;/code&gt;, &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;return&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Một khái niệm khác rất quan trọng/phổ biến/nổi bật của LISP là sử dụng
macro (cùng khái niệm Macro trong C - nhưng mạnh mẽ hơn, ở một đẳng cấp hoàn
toàn khác).&lt;/p&gt;
&lt;h2&gt;Các dialect của LISP&lt;/h2&gt;
&lt;h3&gt;Common Lisp&lt;/h3&gt;
&lt;p&gt;Common Lisp để tồn tại sau nhiều năm lịch sử với sự cạnh tranh của hàng ngàn ngôn
ngữ lập trình khác, đã tự biến đổi mình như một sinh vật tiến hóa. Nó gom vào
mình cả lịch sử lẫn những mảnh ghép của cộng đồng, khiến cho Common Lisp khá
đồ sộ, thực dụng. Những từ khóa cơ bản trong Common Lisp như &lt;code&gt;cdr&lt;/code&gt;, &lt;code&gt;car&lt;/code&gt;
là viết tắt của những khái niệm phổ biến những năm 195x nhưng ngày nay không
còn được nhắc tới, cho nên Common Lisp hơi khó đọc đối với dân ngoại đạo.
Bộ tiêu chuẩn Common Lisp dài &lt;a href="https://www.techstreet.com/standards/incits-226-1994-r1999?product_id=56214"&gt;hơn 1000 trang
giấy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Bản chạy opensource phổ biến nhất của CL là : &lt;a href="http://www.sbcl.org/"&gt;SBCL&lt;/a&gt;
một số bản thương mại rất đắt tiền.&lt;/p&gt;
&lt;h3&gt;Scheme&lt;/h3&gt;
&lt;p&gt;Scheme ra đời vào những năm 197X, với mong muốn có một bản LISP trong sạch,
dễ đọc, nhỏ gọn, không còn chứa những di tích lịch sử, không còn những từ khóa
khó hiểu như &lt;code&gt;cdr&lt;/code&gt;, &lt;code&gt;car&lt;/code&gt;. Scheme được dùng làm ngôn ngữ chính
để dạy học lập trình tại đại học danh giá MIT - nổi tiếng theo đó là SICP
- cuốn sách luôn nằm trong top 10 các cuốn sách về lập trình (xem cuối bài).&lt;/p&gt;
&lt;p&gt;NOTE: sau này vì lý do thực dụng, MIT dạy SICP bằng Python, không dùng Scheme
nữa.&lt;/p&gt;
&lt;p&gt;Scheme được thống nhất thành tiêu chuẩn viết tắt là R5RS, R6RS, R7RS
hay đầy đủ là &lt;strong&gt;Revised^5 Report on the Algorithmic Language Scheme&lt;/strong&gt; -
&lt;strong&gt;R&lt;/strong&gt;evised Revised Revised Revised Revised &lt;strong&gt;R&lt;/strong&gt;eport ... &lt;strong&gt;S&lt;/strong&gt;cheme.
Mỗi lần "revised" như vậy (tăng lên 1 số),
tiêu chuẩn lại thêm bớt gì đó, và chuyện này không phải ai cũng đồng ý, nên
nhiều bản chạy (implementation) quyết định chỉ
hỗ trợ R5RS mà ko chịu lên R6.&lt;/p&gt;
&lt;p&gt;Các bản Scheme nổi bật:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CHICKEN scheme&lt;/li&gt;
&lt;li&gt;Guile (cài sẵn trên các máy Ubuntu)&lt;/li&gt;
&lt;li&gt;Chez scheme&lt;/li&gt;
&lt;li&gt;Gambit&lt;/li&gt;
&lt;li&gt;MIT Scheme&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Clojure&lt;/h3&gt;
&lt;p&gt;Clojure nổi bật là 1 LISP-dialect HIỆN ĐẠI. Nó chạy trên JVM (như Java)
và được dùng phổ biến trong các doanh nghiệp công nghệ - tại thời điểm
năm 2018. Xem thêm tại &lt;a href="https://clojure.org/about/lisp"&gt;trang chủ của Clojure&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Racket&lt;/h3&gt;
&lt;p&gt;Racket từng là PLT Scheme, từng tuân theo tiêu chuẩn Scheme (S_RS) cho tới khi
nó tiến hóa thành một thứ khác rất nhiều. Racket cũng là một ngôn
ngữ hiện đại trong gia đình LISP.&lt;/p&gt;
&lt;h3&gt;Emacs Lisp&lt;/h3&gt;
&lt;p&gt;LISP dialect dùng để phát triển các tính năng cho editor Emacs - một chương
trình chỉnh sửa code lâu đời, được ưa thích trong giới lập trình viên.&lt;/p&gt;
&lt;h2&gt;Học để làm gì?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Vui&lt;/li&gt;
&lt;li&gt;Mở mang suy nghĩ, thay đổi cách nghĩ - khi trên tay bạn chỉ có một cái búa
thì mọi thứ bạn thấy đều là cái đinh.&lt;/li&gt;
&lt;li&gt;Để thực hành khi đọc những cuốn sách hay nổi tiếng: SICP, HTDP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Có để làm được không?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Cái này tùy vào chuyện bạn làm gì. Nếu lập trình nhúng có thể bạn sẽ dùng 1
LISP dialect X, nhưng viết micro service tại các doanh nghiệp dùng Java,
Clojure lại là lựa chọn hấp dẫn hơn. Có thể tham khảo hướng dẫn học
Common Lisp năm 2018 &lt;a href="http://stevelosh.com/blog/2018/08/a-road-to-common-lisp/"&gt;A road to Common
Lisp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Những người học dùng LISP thường đã có công việc ổn định, không còn lo học
ngôn ngữ đầu tiên để xin việc - vậy nên chuyện có mang đi làm được hay không
không quá quan trọng ở đây. Học LISP xong, theo một cách nào đó, sẽ khiến
bạn trở thành lập trình viên Python giỏi hơn.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Loạt bài này sử dụng &lt;a href="http//call-cc.org"&gt;CHICKEN scheme&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Cài đặt&lt;/h2&gt;
&lt;p&gt;Trên trang chủ của các bản LISP đều có hướng dẫn cài đặt chi tiết.
Trên ubuntu 16.04, &lt;code&gt;guile&lt;/code&gt; có sẵn, cài CHICKEN scheme chỉ bằng một câu lệnh:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install -y chicken-bin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lệnh này cài bản &lt;code&gt;Version: 4.9.X&lt;/code&gt;, cài xong bật lên để gõ code như python
interpreter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ csi
CHICKEN
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2008&lt;/span&gt;-2014, The Chicken Team
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2000&lt;/span&gt;-2007, Felix L. Winkelmann
Version &lt;span class="m"&gt;4&lt;/span&gt;.9.0.1 &lt;span class="o"&gt;(&lt;/span&gt;stability/4.9.0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 8b3189b&lt;span class="o"&gt;)&lt;/span&gt;
    linux-unix-gnu-x86-64 &lt;span class="o"&gt;[&lt;/span&gt; 64bit manyargs dload ptables &lt;span class="o"&gt;]&lt;/span&gt;
    bootstrapped &lt;span class="m"&gt;2014&lt;/span&gt;-06-07

&lt;span class="c1"&gt;#;1&amp;gt; (+ 1 2 3 4 5)&lt;/span&gt;
    &lt;span class="m"&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Để hỗ trợ chỉnh sửa tiện hơn, trên Ubuntu nên cài thêm &lt;code&gt;rl-wrap&lt;/code&gt; và chạy
&lt;code&gt;rl-wrap csi&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Tài liệu&lt;/h2&gt;
&lt;p&gt;Sách free online thì có 2 cuốn đã lừng danh&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mitpress.mit.edu/sites/default/files/sicp/index.html"&gt;SICP -  Structure and Interpretation of Computer Programs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://htdp.org/2018-01-06/Book/"&gt;HTDP - How to Design Programs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Các bài viết&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.draketo.de/proj/py2guile/"&gt;"Nhật ký" từ Python qua Guile Scheme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lập trình viên Python có thể xem phần hướng dẫn cơ bản dành riêng cho Python
developer trên &lt;a href="http://wiki.call-cc.org/chicken-for-python-programmers"&gt;wiki của CHICKEN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.artima.com/weblogs/viewpost.jsp?thread=251474"&gt;Hành trình của Python dev vào thế giới Scheme&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Trên đây là tài liệu về Scheme, tài liệu Common Lisp cũng không thiếu,
và đều online/free - xem tại &lt;a href="http://stevelosh.com/blog/2018/08/a-road-to-common-lisp/"&gt;A road to Common
Lisp&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Emacs&lt;/h2&gt;
&lt;p&gt;Khi lập trình LISP, người dùng được khuyên sử dụng Emacs đặc biệt là
common lisp với SLIME. Đây không phải điều bắt buộc, nhưng nếu chưa từng dùng
Emacs, đây là một cơ hội tuyệt vời để trải nghiệm (vì emacs dùng Emacs Lisp).&lt;/p&gt;
&lt;p&gt;Hết phần 1.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="scheme"></category><category term="lisp"></category><category term="chicken"></category><category term="htdp"></category></entry><entry><title>Làm app giao diện đồ hoạ với Python</title><link href="http://pp.pymi.vn/article/gui/" rel="alternate"></link><published>2018-08-18T00:00:00+07:00</published><updated>2018-08-18T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-08-18:/article/gui/</id><summary type="html">&lt;p&gt;Không gì là không thể - đã dễ, lại còn đẹp&lt;/p&gt;</summary><content type="html">&lt;p&gt;Giao diện đồ hoạ (GUI - Graphic User Interface) vốn từng là một phần không thể thiếu khi nói về lập trình. Dù học ngôn ngữ lập trình nào, người ta cũng nghĩ tới chuyện "làm sao để có giao diện đồ hoạ".&lt;/p&gt;
&lt;p&gt;Thế giới thay đổi, thứ từng quan trọng của ngày hôm qua thì hôm nay chưa chắc đã cần tới. Thời đại tất cả mọi thứ đều chuyển lên web, thì web/app mobile trở thành giao diện để tương tác với người dùng, chứ không phải các phần mềm có giao diện chạy trên máy tính như trước kia.
Giờ đây người ta: nghe nhạc trên web, xem film trên web, chơi game trên web, soạn thảo văn bản trên web... khó còn ứng dụng nào không đưa lên web nữa. Vậy nên về mặt "sự nghiệp", có vẻ như bạn nên đầu tư vào kỹ năng làm web thay vì học để tạo một app trên desktop như cách đây chục năm.&lt;/p&gt;
&lt;p&gt;Dĩ nhiên, GUI không ngay lập tức biến mất, vẫn có nhu cầu sử dụng, vẫn có người dùng, vẫn có hàng tá thư viện đồ hoạ tồn tại từ lâu (và vẫn tiếp tục phát triển), vẫn có những game mà chỉ chơi được trên máy tính do yêu cầu về hiệu năng mà web không đáp ứng nổi (như Half-Life/ đế chế / đua xe ...).&lt;/p&gt;
&lt;p&gt;Python hỗ trợ không ít các thư viện làm GUI app, có thể kể tới: Qt, WxWidgets, Tkinter, &lt;a href="https://kivy.org/"&gt;Kivy (làm cả app mobile)&lt;/a&gt;... xem đầy đủ tại:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=""&gt;https://docs.python.org/3/faq/gui.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=""&gt;https://www.python.org/about/apps/#desktop-guis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=""&gt;https://docs.python-guide.org/scenarios/gui/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Qt_(software)"&gt;Qt&lt;/a&gt; là nền tảng phát triển ứng dụng dùng trong công nghiệp, hỗ trợ mọi hệ điều hành phổ biến, và rất "xịn". Nếu có nhu cầu làm ứng dụng desktop với Python, hãy đầu tư vào Qt để có một sản phẩm đẳng cấp, không kém bất kỳ nền tảng nào khác.&lt;/p&gt;
&lt;p&gt;Tk là hệ thống thư viện đồ hoạ đơn giản, dễ dùng, chạy trên cả 3 hệ điều hành phổ biến: Windows, Ubuntu, OSX/MacOS và điều quan trọng nhất: thư viện &lt;code&gt;tkinter&lt;/code&gt; đi kèm mọi bộ cài Python, nên muốn dùng không cần phải cài đặt gì thêm.&lt;/p&gt;
&lt;p&gt;Bài viết hướng dẫn tạo một chương trình đồ hoạ sử dụng &lt;code&gt;tkinter&lt;/code&gt; với Python 3.6, thực hiện trên MacOS Sierra (10.12.6).&lt;/p&gt;
&lt;h2&gt;Khái niệm cơ bản về một chương trình giao diện đồ hoạ.&lt;/h2&gt;
&lt;p&gt;Một chương trình có giao diện đồ hoạ là một chương trình luôn chạy cho tới khi người dùng thoát chương trình. Dễ suy ra ở đây có chạy 1 vòng lặp vô hạn để luôn hiển thị giao diện (gọi là main loop). Chương trình này hoạt động dựa trên những tương tác của người dùng và phản ứng với các tương tác đó (bấm nút này thì chạy cái kia). Loại chương trình như vậy thuộc loại mô hình "Event-driven programming".&lt;/p&gt;
&lt;p&gt;Các thao tác của người dùng được gọi là các &lt;strong&gt;event&lt;/strong&gt;,
các hành động tương ứng của chương trình (các function) được gọi là các &lt;strong&gt;callback&lt;/strong&gt;, gắn vào các bộ phận giao diện. Gắn callback vào nút bấm thì khi ta bấm nút, callback sẽ được gọi.&lt;/p&gt;
&lt;p&gt;Các bộ phận giao diện như nút bấm, chữ, ô nhập ký tự ... được gọi là các &lt;strong&gt;widget&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Lập trình GUI với Tkinter&lt;/h2&gt;
&lt;p&gt;Code gõ trực tiếp trên IPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# on Ubuntu, requires install: `sudo apt-get install -y python3-tk`&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tkinter&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tk&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Tk&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mainloop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu Tk hoat động trên máy bạn, ngay lập tức một cửa sổ trắng tinh sẽ hiện ra.&lt;/p&gt;
&lt;p&gt;&lt;img alt="emptygui" src="http://pp.pymi.vn/images/gui.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Tk()&lt;/code&gt; tạo một cửa sổ chính  (main window), &lt;code&gt;Frame&lt;/code&gt; là một widget có khả năng chứa các widget khác. Gọi function &lt;code&gt;mainloop()&lt;/code&gt; để chạy giao diện mãi mãi cho tới khi người dùng đóng lại.&lt;/p&gt;
&lt;h3&gt;Các widget&lt;/h3&gt;
&lt;p&gt;Tkinter có sẵn 17 widget:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Button&lt;/code&gt; &lt;code&gt;Canvas&lt;/code&gt; &lt;code&gt;Checkbutton&lt;/code&gt; &lt;code&gt;Entry&lt;/code&gt; &lt;code&gt;Frame&lt;/code&gt; &lt;code&gt;Label&lt;/code&gt; &lt;code&gt;Listbox&lt;/code&gt; &lt;code&gt;Menu&lt;/code&gt; &lt;code&gt;Menubutton&lt;/code&gt; &lt;code&gt;Message&lt;/code&gt; &lt;code&gt;Radiobutton&lt;/code&gt; &lt;code&gt;Scale&lt;/code&gt; &lt;code&gt;Scrollbar&lt;/code&gt; &lt;code&gt;Text&lt;/code&gt; &lt;code&gt;Spinbox&lt;/code&gt; &lt;code&gt;LabelFrame&lt;/code&gt; &lt;code&gt;PanedWindow&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Xem ví dụ hello-world tại &lt;a href="https://docs.python.org/3/library/tkinter.html#a-simple-hello-world-program"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sau đây ta viết một GUI app có hiển thị tiêu đề (Label), có một ô nhập địa chỉ trang web (Entry), có một nút bấm để kiểm tra status của trang web (Button).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# on Ubuntu, requires install: `sudo apt-get install -y python3-tk`&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tkinter&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tk&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Application&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_widgets&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;create_widgets&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Label&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;PyMi.vn checker&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Entry&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StringVar&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;textvariable&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bind&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;Key-Return&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_site&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Check web site up/down.&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; Enter URL with http(s):&amp;quot;&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_site&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;QUIT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;destroy&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_site&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://pymi.vn&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://{}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c1"&gt;# fake useragent as cloudflare block python agent&lt;/span&gt;
        &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;HEAD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;User-Agent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;python-requests/2.23.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timeout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;response: {} {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Tk&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Application&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;My checker app&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;minsize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mainloop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code trên:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;phần init chỉ là thủ tục&lt;/li&gt;
&lt;li&gt;tạo một label với text cần hiển thị&lt;/li&gt;
&lt;li&gt;tạo entry để người dùng nhập nội dung, gán giá trị người dùng nhập vào &lt;code&gt;self.contents&lt;/code&gt;, bind widget entry với phím Enter (trên MacOS gọi là return), và chạy method &lt;code&gt;check_site&lt;/code&gt; khi người dùng gõ enter.&lt;/li&gt;
&lt;li&gt;tạo nút bấm với dòng chữ "Check site", gọi method &lt;code&gt;check_site&lt;/code&gt; khi người dùng bấm nút&lt;/li&gt;
&lt;li&gt;tạo nút bấm "Quit" để thoát chương trình&lt;/li&gt;
&lt;li&gt;set thanh tiêu đề &lt;code&gt;title&lt;/code&gt; và kích thước cho chương trình qua &lt;code&gt;app.master&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kết quả:&lt;/p&gt;
&lt;p&gt;&lt;img alt="checker" src="http://pp.pymi.vn/images/checker.png"&gt;&lt;/p&gt;
&lt;p&gt;Danh sách đầy đủ các widget xem tại &lt;a href="https://github.com/python/cpython/blob/3.6/Lib/tkinter/__init__.py"&gt;https://github.com/python/cpython/blob/3.6/Lib/tkinter/&lt;strong&gt;init&lt;/strong&gt;.py&lt;/a&gt;  - search &lt;code&gt;(Widget&lt;/code&gt; (các subclass của class Widget).&lt;/p&gt;
&lt;p&gt;Thử các ví dụ có sẵn đi kèm với Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# on Ubuntu, requires install: sudo apt-get install -y python3-examples
python3 -m turtledemo.minimal_hanoi
python3 -m turtledemo.sorting_animate
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay xem code 1 IDE viết bằng tk: &lt;a href="https://github.com/thonny/thonny/tree/v3.3.4"&gt;thonny&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Tk nhẹ gọn, có sẵn, dễ dùng, đủ dùng khi bạn thấy đủ. Bao giờ thấy ngột ngạt, có lẽ lại chuyển sang Qt, các khái niệm lập trình giao diện dù dùng library/framework nào cũng đều tương tự nhau.&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tkinter: https://docs.python.org/3/library/tkinter.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hết.
HVN @ &lt;a href=""&gt;https://pymi.vn&lt;/a&gt; and &lt;a href=""&gt;https://www.familug.org/&lt;/a&gt;&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="gui"></category><category term="tk"></category></entry><entry><title>Viết một chatbot đơn giản với Python3</title><link href="http://pp.pymi.vn/article/viet-mot-chatbot-don-gian-voi-python3/" rel="alternate"></link><published>2018-06-05T00:00:00+07:00</published><updated>2018-06-05T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-06-05:/article/viet-mot-chatbot-don-gian-voi-python3/</id><summary type="html">&lt;p&gt;Làm FaceBook chatbot còn dễ hơn rủ em gái bàn bên đi xem phim...&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Chatbot là gì?&lt;/h2&gt;
&lt;p&gt;Trước khi thò tay vào hì hục code, ta cần hiểu chatbot là gì đã?&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Chatbot"&gt;Chatbot&lt;/a&gt; là một chương trình thực hiện cuộc hội thoại qua phương pháp gửi nhận văn bản hoặc các object như hình ảnh, file, ... Chú ý Chatbot không nhất thiết là phải thông minh, là phải dùng trí tuệ nhân tạo, etc ...&lt;/p&gt;
&lt;p&gt;Có bao giờ sắp đến giao thừa hay một dịp mà bạn muốn nhắn tin cho nhiều người vào 12h đêm mà bạn không thể dậy được, hoặc bạn quá lười để làm một việc lặp đi lặp lại? Câu trả lời là viết một chatbot và hẹn giờ cho nó.&lt;/p&gt;
&lt;h2&gt;Viết chatbot&lt;/h2&gt;
&lt;p&gt;Trong bài viết này mình sử dụng 2 thư viện có sẵn trên mạng là &lt;a href="https://fbchat.readthedocs.io/en/master/"&gt;fbchat&lt;/a&gt;, &lt;a href="https://schedule.readthedocs.io/en/stable/"&gt;schedule&lt;/a&gt; do đó bạn cần tạo &lt;a href="http://pymi.vn/blog/virtualenv/"&gt;virtualenv&lt;/a&gt; trước tiên, sau đó dùng pip để cài 2 lib trên rồi tạo một file code python tùy ý, ở đây mình dùng &lt;code&gt;chatbot.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Đầu tiên, import những lib mình cần 🎉&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;threading&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Client&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ThreadType&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;schedule&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau đó tạo một class &lt;code&gt;Bot&lt;/code&gt; kế thừa &lt;code&gt;Client&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tạo 1 function trong class &lt;code&gt;Bot&lt;/code&gt; để thực hiện gửi tin nhắn, dưới đây là code của mình:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;#Đổi tên function cho phù hợp&lt;/span&gt;
        &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basicConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;lst_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# List chứa fb id của những người bạn muốn gửi&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;user_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Chúc mừng năm mới&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendLocalImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/dosontung007/Pictures/wallpaper.png&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sent success to &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và để nhận được tin nhắn từ những người gửi cho mình cho mình , ta viết function &lt;code&gt;onMessage&lt;/code&gt; trong class &lt;code&gt;Bot&lt;/code&gt; và xử lí các tin nhắn đó:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;onMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;lst_msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uid&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Năm mới chúc .....&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                  &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tham khảo thêm tại https://fbchat.readthedocs.io/en/master/&lt;/p&gt;
&lt;p&gt;Job thực hiện việc gửi tin nhắn trong này đó là:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Bot(os.environ['USERNAME_'], os.environ['PASSWORD']).do_something()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Class &lt;code&gt;Bot&lt;/code&gt; kế thừa &lt;code&gt;Client&lt;/code&gt;, khi tạo một Bot object, ta cần truyền 2 tham số là username và password của Facebook của bạn. Do đó bạn cần set value cho 2 var &lt;code&gt;USERNAME_&lt;/code&gt; và &lt;code&gt;PASSWORD&lt;/code&gt; bằng câu lệnh &lt;code&gt;export var=value&lt;/code&gt; trong bash trước khi chạy chương trình (vì ta không muốn ghi trực tiếp password vào file code - lộ mật khẩu nếu up lên GitHub). Lưu ý &lt;code&gt;USERNAME_&lt;/code&gt; chứ không phải &lt;code&gt;USERNAME&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Bây giờ còn một công việc duy nhất là hẹn giờ cho job làm việc thôi!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;job&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;every&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_pending&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thay đổi &lt;code&gt;00:00&lt;/code&gt; bằng thời gian mà bạn muốn hẹn giờ.&lt;/p&gt;
&lt;p&gt;Để nhận được message, ta sử dụng function &lt;code&gt;listen&lt;/code&gt; từ &lt;code&gt;Client&lt;/code&gt; , về cơ bản &lt;code&gt;listen&lt;/code&gt; khi chạy sẽ truyền các arguments vào &lt;code&gt;onMessage&lt;/code&gt; mỗi lần Facebook bạn có event mới (VD: có người nhắn cho bạn, bạn nhắn cho người khác hoặc tin nhắn trong nhóm, ...):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ở function main, mình sử dụng lib threading để chạy song song 2 job là reply_msg và send_msg :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cuối cùng cũng xong 🎉.Sau tất cả, đây là một con chatbot hoàn chỉnh :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;threading&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Client&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ThreadType&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;schedule&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;onMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;lst_msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uid&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Năm mới chúc .....&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basicConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;user_ids&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;100012610305665&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;user_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;user_ids&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Chúc mừng năm mới&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendLocalImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/dosontung007/Pictures/wallpaper.png&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sent success to &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;100012610305665&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CancelJob&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;every&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_pending&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;thread1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;thread1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;thread1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bây giờ export username, password rồi chạy thôi. Và đây là thành quả:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Imgur" src="https://i.imgur.com/VldjbDi.png"&gt;&lt;/p&gt;
&lt;p&gt;Nếu bạn muốn chạy luôn mà không cần hẹn giờ thì chỉ cần xoá function &lt;code&gt;job_that_executes_once&lt;/code&gt; và thay function &lt;code&gt;send_msg&lt;/code&gt; bằng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;HẾT.&lt;/p&gt;
&lt;p&gt;TUNG491 at http://pymi.vn/&lt;/p&gt;</content><category term="Trang chủ"></category><category term="Python"></category><category term="chatbot"></category><category term="facebook"></category><category term="bot"></category><category term="thread"></category></entry><entry><title>Dùng .NET Framework với IronPython</title><link href="http://pp.pymi.vn/article/ironpython-addreference/" rel="alternate"></link><published>2018-06-02T00:00:00+07:00</published><updated>2018-06-04T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2018-06-02:/article/ironpython-addreference/</id><summary type="html">&lt;p&gt;Giới thiệu cách thêm các công cụ của .NET Framework vào IronPython.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Assembly là gì&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://msdn.microsoft.com/en-us/library/ms973231.aspx#assenamesp_topic4"&gt;Assembly&lt;/a&gt; (số nhiều: assemblies) là một file được tạo ra bởi quá trình compile một ứng dụng .NET. Nó có thể có đuôi &lt;code&gt;.dll&lt;/code&gt; hoặc &lt;code&gt;.exe&lt;/code&gt;. .NET Framework có sẵn rất nhiều assemblies (chính là thành phần &lt;a href="https://msdn.microsoft.com/en-us/library/gg145045.aspx"&gt;Class Library trong .NET Framework&lt;/a&gt;), cũng tương tự như Python có sẵn rất nhiều &lt;a href="https://docs.python.org/3/library/index.html"&gt;standard libraries&lt;/a&gt; vậy.&lt;/p&gt;
&lt;h2&gt;AddReference .NET Assemblies&lt;/h2&gt;
&lt;p&gt;Khi lập trình các ngôn ngữ .NET khác như C# hay VB.NET, dùng Visual Studio, muốn sử dụng các công cụ trong .NET Framework thì bạn phải thêm "Reference" vào project browser. IronPython có 1 module hỗ trợ "Add Reference" vào script là &lt;code&gt;clr&lt;/code&gt;. Các methods Add Reference trong IronPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Sử dụng một trong các methods sau&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceByName&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceByPartialName&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceToFile&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceToFileAndPath&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;clr.AddReference&lt;/code&gt; nhận vào 1 đối tượng &lt;a href="https://msdn.microsoft.com/en-us/library/system.reflection.assembly(v=vs.110).aspx"&gt;System.Reflection.Assembly&lt;/a&gt;, hoặc &lt;strong&gt;full name&lt;/strong&gt; của assembly (vd &lt;code&gt;clr.AddReference("System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")&lt;/code&gt;), hoặc &lt;strong&gt;partial name&lt;/strong&gt; của assembly (vd &lt;code&gt;clr.AddReference("System.Drawing")&lt;/code&gt;). Khi dùng partial name, IronPython sẽ tìm file dll ở trong &lt;a href="https://docs.microsoft.com/en-us/dotnet/framework/app-domains/gac"&gt;Global Assembly Cache (GAC)&lt;/a&gt;. Mình thường dùng cách thứ 3: truyền vào partial name cho ngắn gọn.
Xem các assemblies đã add ở &lt;code&gt;clr.References&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;System.Drawing&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;References&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mscorlib&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b77a5c561934e089&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b77a5c561934e089&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SQLite&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;f709c5b71&lt;/span&gt;
&lt;span class="mf"&gt;3576e1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Wpf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;f709c5b713576e1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b03f5f7f11d50a3a&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi &lt;code&gt;AddReference&lt;/code&gt;, phải &lt;code&gt;import&lt;/code&gt; các namespaces có trong assemblies để sử dụng trong IronPython. Cú pháp import như bình thường:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;System&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Drawing&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Actions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NamespaceTracker&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thắc mắc hay gặp: Mình muốn sử dụng 1 công cụ trong .NET Framework thì biết tên assembly là gì để &lt;code&gt;AddReference&lt;/code&gt;, biết namespace nào để &lt;code&gt;import&lt;/code&gt;? Trả lời với từ khóa tìm kiếm: &lt;code&gt;Tên_công_cụ msdn&lt;/code&gt; (VD &lt;a href="http://lmgtfy.com/?s=d&amp;amp;q=System+Environment+msdn"&gt;System Environment msdn&lt;/a&gt;). Dùng phần &lt;strong&gt;Assembly&lt;/strong&gt; để &lt;code&gt;AddReference&lt;/code&gt;, phần &lt;strong&gt;Namespace&lt;/strong&gt; để &lt;code&gt;import&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Khi chạy ipy.exe, IronPython đã AddReference sẵn tới mscorlib.dll và System.dll &lt;a href="http://ironpython.net/documentation/dotnet/dotnet.html#assemblies-loaded-by-default"&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/a&gt;. Khi đó chỉ việc &lt;code&gt;import&lt;/code&gt; các namespaces có trong 2 assemblies này mà không phải AddRerence.&lt;/p&gt;
&lt;h2&gt;AddReference các Assemblies khác&lt;/h2&gt;
&lt;p&gt;Ngoài các assemblies có trong .NET Framework, còn có các assemblies khác đi kèm với các phần mềm cài vào Windows, hoặc assemblies được compiled từ chính IronPython. Cú pháp AddReference tương tự như trên, với lưu ý là &lt;code&gt;AddReference&lt;/code&gt; khi đó sẽ tìm assemblies trong GAC hoặc &lt;code&gt;sys.path&lt;/code&gt;. Nếu không muốn append đường dẫn tới folder chứa file .dll thì có thể dùng &lt;code&gt;AddReferenceToFileAndPath&lt;/code&gt;. Phải chạy đúng phiên bản IronPython 32bit/64bit tương ứng với &lt;a href="https://msdn.microsoft.com/en-us/library/hh264221.aspx#Target%20Platform"&gt;Target Platform&lt;/a&gt; mà file assembly được compiled.&lt;/p&gt;
&lt;p&gt;Ví dụ file &lt;code&gt;RevitAPI.dll&lt;/code&gt; được compiled với Target Platform là x64 (64-bit), nếu chạy &lt;code&gt;ipy.exe&lt;/code&gt; (32-bit) sẽ không &lt;code&gt;AddReference&lt;/code&gt; được:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C:\Program Files\Autodesk\Revit 2018&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RevitAPI&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="ne"&gt;IOError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Could&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="n"&gt;reference&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;assembly&lt;/span&gt; &lt;span class="n"&gt;RevitAPI&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;refe&lt;/span&gt;
&lt;span class="n"&gt;rence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;
&lt;span class="n"&gt;ferences&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActionCallInstruction&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="mf"&gt;2.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFra&lt;/span&gt;
&lt;span class="n"&gt;me&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run4&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;
&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T3&lt;/span&gt; &lt;span class="n"&gt;arg3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dynamic&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UpdateDelegates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UpdateAndExecute3&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;CallSite&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;ite&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FuncCallInstruction&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="mf"&gt;6.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt;
 &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run4&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;
&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T3&lt;/span&gt; &lt;span class="n"&gt;arg3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Ast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CallExpression&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Invoke1Instruction&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedF&lt;/span&gt;
&lt;span class="n"&gt;rame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run2&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;span class="n"&gt;rg1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonScriptCode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RunWorker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;ctx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonScriptCode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Scope&lt;/span&gt; &lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Hosting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonCommandLine&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;c__DisplayClass1&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RunOneInteraction&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;b__0&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mà phải dùng &lt;code&gt;ipy64.exe&lt;/code&gt; để &lt;code&gt;AddReference&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Lib&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;DLLs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;lib&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;site-packages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C:\Program Files\Autodesk\Revit 2018&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RevitAPI&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Autodesk.Revit.DB&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Wall&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;AddReference các assemblies được compiled bằng IronPython&lt;/h2&gt;
&lt;p&gt;Nếu như bạn chưa biết, IronPython có thể compile python script thành các file assemblies (&lt;code&gt;.dll&lt;/code&gt; hoặc &lt;code&gt;.exe&lt;/code&gt;) sử dụng công cụ kèm theo là &lt;code&gt;pyc.py&lt;/code&gt; (sẽ có bài viết riêng về &lt;strong&gt;Compile python script dùng IronPython&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Một lưu ý quan trọng khi AddReference các file assemblies này là: &lt;strong&gt;phải dùng đúng phiên bản IronPython tương ứng với phiên bản đã dùng để compile ra file assembly đó thì mới AddReference được&lt;/strong&gt;. Ví dụ: file assembly được compiled bằng IronPython 2.7.3 thì khi AddReference ta phải dùng IronPython 2.7.3. Sẽ có ví dụ cụ thể trong bài &lt;strong&gt;Compile python script dùng IronPython&lt;/strong&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="ironpython"></category><category term="windows"></category><category term="dotnet"></category><category term="reference"></category><category term="dll"></category></entry><entry><title>IronPython</title><link href="http://pp.pymi.vn/article/ironpython/" rel="alternate"></link><published>2018-05-30T00:00:00+07:00</published><updated>2018-05-31T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2018-05-30:/article/ironpython/</id><summary type="html">&lt;p&gt;Hướng dẫn cài đặt, chạy IronPython trên Windows. Ví dụ cơ bản về cách sử dụng .NET Framework và các thư viện có sẵn với IronPython.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;IronPython là gì?&lt;/h2&gt;
&lt;p&gt;Theo giới thiệu ở &lt;a href="http://ironpython.net/"&gt;trang chủ IronPython&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IronPython is an open-source implementation of the Python programming language which is tightly integrated with the .NET Framework. IronPython can use the .NET Framework and Python libraries, and other .NET languages can use Python code just as easily.&lt;/p&gt;
&lt;p&gt;Ironpython là 1 "implementation" mã nguồn mở của ngôn ngữ lập trình Python, tích hợp chặt chẽ với .NET Framework. IronPython có thể sử dụng .NET Framework và các thư viện Python, các ngôn ngữ .NET khác cũng có thể đọc và chạy code Python dễ dàng.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Cài đặt IronPython&lt;/h2&gt;
&lt;p&gt;Vào trang chủ download bộ cài đặt về (link download ở trang chủ là link github). Thời điểm viết bài, IronPython đang ở &lt;a href="https://github.com/IronLanguages/ironpython2/releases/tag/ipy-2.7.8"&gt;phiên bản 2.7.8&lt;/a&gt;. IronPython 3 đang trong quá trình phát triển, chưa có bản chính thức.&lt;/p&gt;
&lt;h2&gt;Sử dụng&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bật IronPython interpreter bằng cách chạy (bấm đúp - double click) vào file ở đường dẫn: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe&lt;/code&gt; hoặc &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&lt;/code&gt;. Hoặc bấm nút Start -&amp;gt; gõ cmd -&amp;gt; Enter, sau khi cửa sổ Command Prompt hiện lên thì gõ đường dẫn file: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe&lt;/code&gt; hoặc &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Microsoft&lt;/span&gt; &lt;span class="n"&gt;Windows&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;6.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7601&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2009&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  &lt;span class="n"&gt;All&lt;/span&gt; &lt;span class="n"&gt;rights&lt;/span&gt; &lt;span class="n"&gt;reserved&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello from IronPython&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;IronPython&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Chạy 1 python script đã viết sẵn bằng cách gõ vào Command Prompt: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe đường_dẫn\đến\script.py&lt;/code&gt;. Ví dụ nội dung file &lt;code&gt;D:\HTL\Desktop\script.py&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello from inside a Python script&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;C:\Users\HTL&amp;gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot; D:\HTL\Desktop\script.py
Hello from inside a Python script
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Sử dụng .NET Framework và Python libraries&lt;/h2&gt;
&lt;p&gt;IronPython có sẵn thư viện &lt;code&gt;clr&lt;/code&gt; hỗ trợ load các .NET Assemblies (VD như các file .dll) và sử dụng các công cụ trong đó. IronPython cũng có các libraries kèm theo tương tự như CPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;System&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;System&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Environment&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SystemDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Windows&lt;/span&gt;\&lt;span class="n"&gt;system32&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mf"&gt;3.14159265359&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tài liệu IronPython&lt;/h2&gt;
&lt;p&gt;Tương tự câu hỏi khi học Python thì dùng tài liệu nào, đối với IronPython thì cũng lấy tài liệu ở trang chủ. IronPython Documentation có 2 phần: phần 1 chính là &lt;a href="https://docs.python.org/2.7/"&gt;Python 2.7 documentation&lt;/a&gt;, phần 2 là &lt;a href="http://ironpython.net/documentation/dotnet/"&gt;hướng dẫn tích hợp .NET với IronPython&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Học ngôn ngữ Python là có thể sử dụng trên nhiều môi trường, với nhiều implementation khác nhau (CPython, IronPython, Jython...).&lt;/li&gt;
&lt;li&gt;IronPython là sự lựa chọn hợp lý khi làm việc với môi trường Windows và các phần mềm chạy trên Windows.&lt;/li&gt;
&lt;li&gt;Alternative: Trả lời cho câu hỏi "Mình vẫn muốn dùng CPython và vẫn muốn sử dụng .NET Framework thì làm như thế nào?" -&amp;gt; Tìm hiểu &lt;a href="http://pythonnet.github.io/"&gt;pythonnet&lt;/a&gt; nhé. Tuy nhiên mình khuyến khích dùng IronPython để làm việc trên Windows và các phần mềm chạy trên Windows.&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="ironpython"></category><category term="windows"></category><category term="implementation"></category><category term="dotnet"></category></entry><entry><title>Awk siêu tốc</title><link href="http://pp.pymi.vn/article/awk/" rel="alternate"></link><published>2018-05-27T00:00:00+07:00</published><updated>2018-05-27T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-27:/article/awk/</id><summary type="html">&lt;p&gt;học và dùng luôn trong 20 phút - yêu cầu dùng Ubuntu/OSX hay các hệ điều hành UNIX-like.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nếu bạn đã biết 1 scripting language như Python hay Perl việc học AWK sẽ có vẻ hơi
thừa/ hơi ngần ngại. Nhưng AWK - ngôn ngữ lập trình sinh ra từ những năm 1970 luôn
có chỗ dùng, và sức mạnh đáng gờm.&lt;/p&gt;
&lt;p&gt;Bài này giới thiệu các khái niệm cơ bản của ngôn ngữ lập trình AWK, một số cách dùng thông dụng, học xong có thể dùng ngay và vô cùng hữu ích với những người xử lý dữ liệu dạng cột/ bảng mà không biết Python.&lt;/p&gt;
&lt;p&gt;Các lệnh trong bài này dùng &lt;code&gt;mawk&lt;/code&gt; vì nó được biết là nhanh hơn các bản awk khác, nhưng về tính năng cơ bản là giống nhau, người đọc dùng bản nào cũng được, VD gawk&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ whatis awk
awk &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;              - pattern scanning and processing language
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Dùng trong các câu lệnh hàng ngày&lt;/h3&gt;
&lt;p&gt;AWK rất thích hợp để nhét vào 1 pipe các câu lệnh UNIX, việc mà Python vốn không sinh ra để làm&lt;/p&gt;
&lt;p&gt;Ví dụ: đếm số dòng trong file /etc/passwd&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wc /etc/passwd
  &lt;span class="m"&gt;57&lt;/span&gt;   &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt; /etc/passwd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lệnh &lt;code&gt;wc&lt;/code&gt; vốn sinh ra để đếm: dòng, số từ, số ký tự. Bạn có thể viết 1 script Python 5-7 dòng
làm chuyện này, nhưng 1 dòng? Hãy thử và nếu thành công, hãy comment!&lt;/p&gt;
&lt;p&gt;Với AWK, làm việc này không khó khăn gì. Hãy bỏ qua nếu không hiểu gì, phần giải thích sẽ theo sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/passwd &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;{ words += NF; chars += length($0) + 1;} END { print NR, words, chars}&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;57&lt;/span&gt; &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một pipe (&lt;code&gt;cmd1 | cmd2 | cmd3&lt;/code&gt;) thường bắt đầu bằng &lt;code&gt;cat file&lt;/code&gt;, mặc dù nó không phải cách làm tốt (tốn thêm 1 câu lệnh cat - khi mà hầu hết các câu lệnh đều hỗ trợ đầu vào là 1 file), nhưng tiện, nên ta cứ bắt đầu với cat, khi nào cần tối ưu ta sẽ bỏ nó đi. Ở đây, &lt;code&gt;mawk&lt;/code&gt; có thể nhận file để xử lý, ta viết lại:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk &lt;span class="s1"&gt;&amp;#39;{ words += NF; chars += length($0) + 1;} END { print NR, words, chars}&amp;#39;&lt;/span&gt; /etc/passwd
&lt;span class="m"&gt;57&lt;/span&gt; &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một ví dụ khác&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ head /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một yêu cầu quái dị có thể xuất hiện như: hãy tính tổng các số ở cột số 3, với các câu lệnh CLI truyền thống, ta làm như sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;cat /etc/passwd &lt;span class="p"&gt;|&lt;/span&gt; cut -d: -f3 &lt;span class="p"&gt;|&lt;/span&gt; xargs &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%s +&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; bc
&lt;span class="m"&gt;75624&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;cut&lt;/code&gt; giúp lấy cột thứ 3, phân cách bằng dấu &lt;code&gt;:&lt;/code&gt;, dùng &lt;code&gt;printf&lt;/code&gt; để nối các số lại bằng dấu &lt;code&gt;+&lt;/code&gt;, vì thừa 1 dấu &lt;code&gt;+&lt;/code&gt; ở đuôi nên ta &lt;code&gt;echo&lt;/code&gt; thêm số 0 để cho hợp lệ rồi đưa vào lệnh &lt;code&gt;bc&lt;/code&gt; để tính.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk -F: &lt;span class="s1"&gt;&amp;#39;{sum += $3} END { print sum }&amp;#39;&lt;/span&gt; /etc/passwd
&lt;span class="m"&gt;75624&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tương tự &lt;code&gt;cut&lt;/code&gt;, ta dùng &lt;code&gt;-F:&lt;/code&gt; để chỉ ra sẽ dùng &lt;code&gt;:&lt;/code&gt; để phân cách cột, lấy cột số 3 &lt;code&gt;$3&lt;/code&gt;, cộng
lần lượt các giá trị vào biến &lt;code&gt;sum&lt;/code&gt; - khi ta không khai báo, AWK mặc định đó là số 0 nếu thực hiện phép toán với số. Làm như vậy với mỗi dòng (gọi là &lt;em&gt;record&lt;/em&gt; trong AWK):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{ sum += $3 }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và khi hết các dòng (đánh dấu bằng END), ta print ra kết quả&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;END { print sum }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khó có thể đánh bại sự ngắn gọn, sạch sẽ này.&lt;/p&gt;
&lt;h2&gt;Record và field&lt;/h2&gt;
&lt;p&gt;AWK đọc text vào, mặc định sẽ cắt tại các dấu xuống dòng, tạo thành các record,
sau đó mặc định cắt tại dấu space (khoảng trắng), tạo thành các field.
Ta hoàn toàn có thể chỉ định AWK cắt ở ký tự khác.&lt;/p&gt;
&lt;h2&gt;Cấu tạo một chương trình AWK&lt;/h2&gt;
&lt;p&gt;Một chương trình AWK cấu tạo bởi các câu lệnh (statements) với cú pháp:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;              pattern   { action statements }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ có vậy.
Khi viết vào file thì viết mỗi câu lệnh 1 dòng, nhưng hoàn toàn có thể viết trên 1 dòng.&lt;/p&gt;
&lt;h3&gt;partern&lt;/h3&gt;
&lt;p&gt;Có nhiều partern, nhưng 3 partern phổ biến và hữu ích nhất là:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BEGIN: theo sau là hành động / câu lệnh khi chương trình bắt đầu&lt;/li&gt;
&lt;li&gt;END: theo sau là câu lệnh được chạy khi chương trình kết thúc&lt;/li&gt;
&lt;li&gt;KHÔNG GHI PATTERN: thực hiện câu lệnh này cho mỗi record&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ví dụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;#39;{sum += $3} END { print sum }&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ví dụ sau không có BEGIN, với mỗi record ta sẽ cộng dồn, và khi đọc hết các record, ta print ra tổng. Chú ý: dấu &lt;code&gt;\&lt;/code&gt; ở cuối dòng là cú pháp trong shell cho phép viết 1 dòng thành nhiều dòng, khi chạy AWK chỉ xem toàn bộ chương trình là 1 dòng.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="nx"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pymi\npython\nfamilug&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;mawk&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;\&lt;/span&gt;
&lt;span class="s1"&gt; BEGIN { print &amp;quot;the begin&amp;quot; } \&lt;/span&gt;
&lt;span class="s1"&gt; { printf &amp;quot;got line: %s has length %d\n&amp;quot;, $0, length($0) }\&lt;/span&gt;
&lt;span class="s1"&gt; { print &amp;quot;done process line &amp;quot;, NR }\&lt;/span&gt;
&lt;span class="s1"&gt; END {print &amp;quot;DONE&amp;quot;}&amp;#39;&lt;/span&gt;

&lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="nx"&gt;begin&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;pymi&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;python&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;familug&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="nx"&gt;DONE&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;parttern tìm kiếm&lt;/h2&gt;
&lt;p&gt;parttern này giúp tìm kiếm các record có chứa một regular expression (hoặc string cố định) và xử lý record đó.&lt;/p&gt;
&lt;p&gt;Đếm số dòng chứa từ &lt;code&gt;print&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;printf&lt;/span&gt; print
&lt;span class="nb"&gt;printf&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -c print
&lt;span class="m"&gt;2&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;/print/ { count += 1 } END { print count }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;print&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;print&lt;/code&gt;  và &lt;code&gt;printf&lt;/code&gt; là 2 output statements (câu lệnh xử lý đầu ra), không phải function nên
không sử dụng cú pháp gọi function &lt;code&gt;print(thing)&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk &lt;span class="s1"&gt;&amp;#39;BEGIN { print &amp;quot;hello&amp;quot; }&amp;#39;&lt;/span&gt;
hello
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;variable và field variable&lt;/h2&gt;
&lt;p&gt;Mỗi record chứa nhiều field, hãy tưởng tượng như 1 dòng spreadsheet/excel có nhiều ô ứng với các cột.
Các variable có sẵn:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$0&lt;/code&gt; - toàn bộ 1 record (dòng) - chú ý dấu $ dùng để truy cập giá trị của field&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$1&lt;/code&gt; - field 1 (hay có thể nghĩ là cột số 1)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$2&lt;/code&gt; - field 2&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(NF - 1)&lt;/code&gt; - field trước cuối cùng&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$NF&lt;/code&gt; - field cuối cùng&lt;/li&gt;
&lt;li&gt;NF - số field&lt;/li&gt;
&lt;li&gt;NR - thứ tự của record, tăng dần sau khi xử lý xong mỗi record (số dòng hiện tại)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Khi truy cập biến, không sử dụng thêm bất cứ ký tự nào (khác với bash, bash phải thêm $varname).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print $NF}&amp;#39;&lt;/span&gt;
 &lt;span class="m"&gt;0990090090&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print $0}&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;, Le Van Xe, &lt;span class="m"&gt;27&lt;/span&gt;, Ha Noi, &lt;span class="m"&gt;0990090090&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print NF }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;5&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ cần nắm rõ tên các variable có sẵn này, ta đã có một tool cực mạnh để xử lý dữ liệu dạng bảng như Excel/CSV/SQL.&lt;/p&gt;
&lt;h2&gt;Các kiểu dữ liệu&lt;/h2&gt;
&lt;p&gt;AWK có string, số (chia làm float và integer), và array.
Ta không bàn tới array ở đây, vì nếu cần lập trình gì phức tạp hơn một câu lệnh AWK đơn giản, ta  có thể sử dụng Python cho sạch sẽ, gọn gàng, tiện lợi.&lt;/p&gt;
&lt;h2&gt;Control flow&lt;/h2&gt;
&lt;p&gt;Là ngôn ngữ lập trình đầy đủ, AWK có if/else/for/while như các ngôn ngữ lập trình "giống C" khác. Ví dụ đếm số chẵn và số lẻ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;1\n2\n3\n4\n20\n30&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;\&lt;/span&gt;
&lt;span class="s1"&gt;{ if ($1 % 2 == 0) \&lt;/span&gt;
&lt;span class="s1"&gt;     { chan += 1 } \&lt;/span&gt;
&lt;span class="s1"&gt;  else { le += 1 } \&lt;/span&gt;
&lt;span class="s1"&gt;} \&lt;/span&gt;
&lt;span class="s1"&gt;END { print chan, le }&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Function&lt;/h2&gt;
&lt;p&gt;AWK có sẵn các funtion xử lý string, số thì đủ các phép toán, các function sin cos ..., người dùng cũng có thể định nghĩa function của họ. Xem thêm ở &lt;a href="https://www.gnu.org/software/gawk/manual/gawk.html#Functions"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Bonus - giải bài projecteuler 1&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://projecteuler.net/problem=1"&gt;Tính tổng các số nhỏ hơn 1000 chia hết cho 3 hoặc 5&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;999&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;{ if ($1 % 3 == 0 || $i % 5 == 0) sum += $1 } END { print sum }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://invisible-island.net/mawk/manpage/mawk.txt"&gt;mawk homepage manpage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/mawk.1.html"&gt;ubuntu 16.04 man 1 mawk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.gnu.org/software/gawk/manual/gawk.html#Top"&gt;GNU awk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html"&gt;AWK on big data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hết&lt;/p&gt;
&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="awk"></category><category term="sysadmin"></category><category term="linux"></category><category term="csv"></category><category term="bigdata"></category></entry><entry><title>In ra màn hình số 1 - ngôn ngữ nào nhẹ nhất?</title><link href="http://pp.pymi.vn/article/dynamic/" rel="alternate"></link><published>2018-05-27T00:00:00+07:00</published><updated>2018-05-27T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-27:/article/dynamic/</id><summary type="html">&lt;p&gt;dash, bash, awk, perl, ruby, nodejs, python, elixir, guile - tất cả lên thớt!&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nếu chỉ cần in ra mà hình số 1, ngôn ngữ lập trình nào sẽ chạy tốn ít RAM nhất?&lt;/p&gt;
&lt;p&gt;Thí nghiệm sau sẽ cho ta thấy các chương trình cần bao nhiêu RAM để chạy và in
ra số 1, kết thúc dòng bằng một dấu xuống dòng (newline &lt;code&gt;\n&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Ta dùng chương trình &lt;code&gt;/usr/bin/time&lt;/code&gt; để có cả thông số về RAM (&lt;code&gt;RSS&lt;/code&gt;) thay vì chỉ gõ time - lệnh builtin của bash.&lt;/p&gt;
&lt;h2&gt;bash4.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time bash -c &lt;span class="s1"&gt;&amp;#39;echo 1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 3064maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+136minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;dash&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time /bin/dash -c &lt;span class="s1"&gt;&amp;#39;echo 1&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed ?%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1492maxresident&lt;span class="o"&gt;)&lt;/span&gt;k
0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+67minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;mawk&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time mawk &lt;span class="s1"&gt;&amp;#39;BEGIN {print 1}&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1932maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+86minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gawk 4.1.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time gawk &lt;span class="s1"&gt;&amp;#39;BEGIN {print 1}&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;42&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 3632maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

552inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;2major+173minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Python3.5.2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time python3 -c &lt;span class="s1"&gt;&amp;#39;print(1)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.03user &lt;span class="m"&gt;0&lt;/span&gt;.01system &lt;span class="m"&gt;0&lt;/span&gt;:00.05elapsed &lt;span class="m"&gt;98&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 9292maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+1100minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Python2.7.12&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time python2 -c &lt;span class="s1"&gt;&amp;#39;print(1)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.01user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.01elapsed &lt;span class="m"&gt;94&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 6640maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+819minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Ruby 2.3.1&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time ruby -e &lt;span class="s1"&gt;&amp;#39;puts 1&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;.03user &lt;span class="m"&gt;0&lt;/span&gt;.01system &lt;span class="m"&gt;0&lt;/span&gt;:00.04elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 10336maxresident&lt;span class="o"&gt;)&lt;/span&gt;k
0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+1595minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Perl v5.22.1&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time perl -e &lt;span class="s1"&gt;&amp;#39;print &amp;quot;1\n&amp;quot;&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 4144maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+176minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;NodeJS 6.11.2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time node -p &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.09user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.10elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 24080maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+2920minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Elixir 1.6.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time elixir -e &lt;span class="s1"&gt;&amp;#39;IO.puts 1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.17user &lt;span class="m"&gt;0&lt;/span&gt;.04system &lt;span class="m"&gt;0&lt;/span&gt;:00.16elapsed &lt;span class="m"&gt;137&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 29268maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

16inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;1major+7837minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Guile 2.0.11&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time guile -c &lt;span class="s1"&gt;&amp;#39;(display 1) (newline)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.02user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.01elapsed &lt;span class="m"&gt;115&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 7720maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+976minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;printf 8.25 - chương trình viết bằng C&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;10&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1844maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+72minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Làm lại toàn bộ bằng Python&lt;/h2&gt;
&lt;p&gt;Tạo một dictionary, chứa các tên ngôn ngữ - kèm với câu lệnh sẽ dùng để thử nghiệm&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;shlex&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;


&lt;span class="n"&gt;programs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;bash&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bash -c &amp;quot;echo 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;dash&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dash -c &amp;quot;echo 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;mawk&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mawk &amp;#39;BEGIN {print 1}&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;gawk&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gawk &amp;#39;BEGIN {print 1}&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;python2.7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;python2 -c &amp;quot;print(1)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;python3.5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;python3 -c &amp;quot;print(1)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;ruby2.3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ruby -e &amp;quot;puts 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;node6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;node -p 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;perl5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;perl -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;print &amp;#39;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;elixir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;elixir -e &amp;quot;IO.puts 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;guile&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;guile -c &amp;quot;(display 1) (newline)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;printf&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;printf &amp;quot;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_rss_from_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;(?P&amp;lt;rss&amp;gt;\d+)maxresident&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rss&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="n"&gt;languages&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;rsses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;programs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/usr/bin/time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;shlex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;process&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;communicate&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;rss&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_rss_from_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rss&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;languages&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsses&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rss&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;languages&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;rsses&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;df_sorted_rss&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# run in Jupyter&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fivethirtyeight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;
&lt;span class="n"&gt;df_sorted_rss&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS size in byte when print 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Dynamic typing languages" src="http://pp.pymi.vn/images/dynamic.png"&gt;&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Khoan vội kết luận rằng cả thế giới nên chuyển hết về dùng dash cho đỡ tốn RAM hay xa lánh Elixir vì nó chạy tới 30 MB RAM để in số 1 ra màn hình.&lt;/p&gt;
&lt;p&gt;Sử dụng đúng công cụ, cho đúng vấn đề thích hợp mới là điều quan trọng.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dash được viết ra để dùng làm &lt;code&gt;shell (sh)&lt;/code&gt; cho Ubuntu, nó cần nhẹ, dù trả giá bằng việc không nhiều tính năng, và chỉ là một shell scripting language&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.familug.org/search/label/bash"&gt;bash&lt;/a&gt; là shell được dùng phổ biến nhất thế giới&lt;/li&gt;
&lt;li&gt;awk là ngôn ngữ lập trình đã gắn liền với lịch sử của thế giới UNIX, rất tiện để tính toán dữ liệu cột / hàng. Với AWK cùng các CLI tool truyền thống, người ta có thể &lt;a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html"&gt;giải quyết bài toán "big data" nhanh gấp 200 lần dùng Hadoop (EMR)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;mawk nhanh hơn gawk&lt;/li&gt;
&lt;li&gt;perl5 luôn có chỗ đứng của nó, nó vẫn ở trên máy Ubuntu dù chưa bao giờ mình chủ ý cài&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.familug.org/search/label/guile"&gt;guile&lt;/a&gt; là extension language chính thức được lựa chọn bởi GNU, nó chính là ngôn ngữ scheme được mang vào ứng dụng thực tế&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pymi.vn/"&gt;Python&lt;/a&gt; - ngôn ngữ dễ đọc, phổ biến nhất thế giới, đã đẩy ngành tính toán khoa học từ bộ môn trong phòng thí nghiệm trở thành ngành hot nhất trái đất. PS: Python khi bật lên đã dùng ~ 8MB RAM.&lt;/li&gt;
&lt;li&gt;Ruby còn dùng nhiều RAM hơn nữa, dù về mặt tính năng thường được so ngang với Python, nhưng mặt ứng dụng vào khoa học thì là vực so với trời Python.&lt;/li&gt;
&lt;li&gt;NodeJS là một JavaScript engine chuyển biến cả ngành web, cũng chưa rõ sao nó ngốn gần 25MB để bật lên, có khi đó vốn là bản chất của JavaScript.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elixir.pymi.vn/"&gt;Elixir&lt;/a&gt; không chỉ bật lên một interpreter như bash, mà đó là cả hệ thống phân tán - chạy máy ảo BEAM của Erlang, nên con số 30MB thậm chí còn là hơi ... ít.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bài này không xét các ngôn ngữ mà phải viết thành file, compile mới chạy, vì tác giả quá lười.&lt;/p&gt;
&lt;p&gt;PS: học hết đống trên ở &lt;a href="http://www.familug.org/2016/12/free-ebook.html"&gt;đây&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Hết.&lt;/p&gt;
&lt;p&gt;HVN at &lt;a href="https://pymi.vn"&gt;https://pymi.vn&lt;/a&gt; and https://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tip"></category></entry><entry><title>Tôi học lập trình không phải vì lương 4000 USD</title><link href="http://pp.pymi.vn/article/toi-hoc-lap-trinh-khong-phai-vi-luong-4000-usd/" rel="alternate"></link><published>2018-05-20T00:00:00+07:00</published><updated>2018-05-20T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-05-20:/article/toi-hoc-lap-trinh-khong-phai-vi-luong-4000-usd/</id><summary type="html">&lt;p&gt;Không ít học sinh phổ thông từng thắc mắc học môn lập trình để làm gì?
Có phải vì mức lương 4000 USD của sinh viên mới ra trường mà nhiều người hay
nhắc đến khi nói về lập trình viên.&lt;/p&gt;
&lt;p&gt;Hôm nay mình đọc một bài trên Facebook nói …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Không ít học sinh phổ thông từng thắc mắc học môn lập trình để làm gì?
Có phải vì mức lương 4000 USD của sinh viên mới ra trường mà nhiều người hay
nhắc đến khi nói về lập trình viên.&lt;/p&gt;
&lt;p&gt;Hôm nay mình đọc một bài trên Facebook nói về lí do &lt;code&gt;Tại sao bạn học lập trình?&lt;/code&gt;,
trong đó có 1 lí do được nhắc đi nhắc lại rất nhiều
đó là có một tương lai tươi sáng với mức lương khởi điểm khi ra trường 4000 USD. Bài này nói lên quan điểm của mình về
việc học lập trình để làm gì.&lt;/p&gt;
&lt;p&gt;&lt;img alt="4000USD" src="https://cdn-images-1.medium.com/max/800/1*MNkBMrAinvq65wLx9y2oIg.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;Mình cũng giống các bạn trong clip trên, đều là học sinh cấp 3, đều có không ít thì nhiều kiến thức về lập trình nhưng mình thấy các bạn đang có phần ảo tưởng về ngành lập trình. Mình tiếp xúc với không ít lập trình viên chuyên nghiệp, nên không còn lạ gì những nỗi khổ của ngành này: trĩ lòi, mắt mờ, đau lưng, cột sống, stress, deadline, đau dạ dày, trầm cảm... Những người ngoài chỉ nhìn vào họ những lúc họ khoe lương nhưng đâu có nhìn thấy lúc họ làm việc. Trên các loại báo xàm ke của Việt Nam và các bà hàng xóm, nghề &lt;code&gt;lập trình&lt;/code&gt; thường xuyên được nhắc đến trong các chủ đề như: "những công việc lương cao nhất", "những công việc không sợ thiếu việc làm lương cao trong 5 năm tới", blabla ... ; nhưng sự thực có phải vậy không ? Công việc lập trình cũng chỉ giống bao nhiêu ngành nghề khác là bán sức lao động và giá trị của bản thân cho công ty và xã hội thôi.&lt;/p&gt;
&lt;p&gt;Bố mình từng nói "Không có ngành nghề dễ kiếm việc hơn hay lương cao hơn ngành nghề nào.
Tất cả công việc mày được trả lương là người ta trả cho giá trị và khả năng của mày mang lại chứ không phải trả cho cái ngành nghề của mày hay cái trường mày học."&lt;/p&gt;
&lt;p&gt;Lương 4000 USD/tháng với lập trình không phải là không có nhưng những nguời như thế thuộc loại &lt;strong&gt;hiếm&lt;/strong&gt; và thường có kinh nghiệm 5–7 năm đi làm. Còn về lương một cử nhân Bách Khoa ra trường thì "4000 USD/năm tương đương khoảng 7.5 triệu đồng/tháng thì hợp lý, và cũng là cao hơn mặt bằng xã hội", "xạo chó", "ra trường 4k có cái củ cải" ... là những câu trả lời mình nhận được khi gửi bức ảnh trên và hỏi những người trong nghề và có có cả những người với mức lương &amp;gt;= 4000 USD.&lt;/p&gt;
&lt;p&gt;Quay về vấn đề chính thôi, mình học lập trình để làm gì? Đơn giản thôi, mình học để hiểu về cách của mọi thứ trên Internet đang hoại động và để nó là công cụ cho mình để thực hiện được những gì mình muốn: Làm một trang web, vẽ bản đồ trà sữa, viết một con chatbot, blabla … Với mình, ngôn ngữ trong lập trình cũng giống như Tiếng Anh nó giúp bạn giao tiếp với các lập trình viên khác và thế giới.&lt;/p&gt;
&lt;p&gt;Trong cuộc sống, chúng ta không khó để thấy những sự thật về những con người thành công trong nhiều lĩnh vực nhưng những lĩnh vực đó không hề &lt;code&gt;hot&lt;/code&gt; hay được truyền thống tung hô ví dụ: nuôi lợn, trồng rau, ... vì đơn giản họ tìm thấy được đam mê của mình với nghề và tiềm năng của nghề. Do đó chúng ta thấy được sự thành công đến từ bản thân bạn chứ không phải ngành nghề của bạn&lt;/p&gt;
&lt;p&gt;Tóm lại, đừng thần thánh hóa &lt;strong&gt;lập trình viên&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;HẾT&lt;/p&gt;
&lt;p&gt;TUNG491 at https://pymi.vn.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="developer"></category><category term="lương"></category><category term="coder"></category><category term="4000USD"></category></entry><entry><title>Requests + bs4 &lt;= Requests-HTML</title><link href="http://pp.pymi.vn/article/requests-bs4-requests-html/" rel="alternate"></link><published>2018-05-09T00:00:00+07:00</published><updated>2018-05-09T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-05-09:/article/requests-bs4-requests-html/</id><summary type="html">&lt;h2&gt;Giới thiệu&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://html.python-requests.org/"&gt;Requests-HTML&lt;/a&gt; được viết bởi Kenneth Reitz - tác giả của &lt;code&gt;requests&lt;/code&gt; nổi tiếng, với mục đích cao cả là thay thế combo huyền thoại (với pymier) requests + bs4.  Trên trang chủ, requests-html tự mô tả như sau:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This library intends to make parsing HTML (e.g. scraping the web …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;h2&gt;Giới thiệu&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://html.python-requests.org/"&gt;Requests-HTML&lt;/a&gt; được viết bởi Kenneth Reitz - tác giả của &lt;code&gt;requests&lt;/code&gt; nổi tiếng, với mục đích cao cả là thay thế combo huyền thoại (với pymier) requests + bs4.  Trên trang chủ, requests-html tự mô tả như sau:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This library intends to make parsing HTML (e.g. scraping the web) as simple and intuitive as possible&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;và đặc biệt chỉ hỗ trợ python3.&lt;/p&gt;
&lt;h2&gt;Các tính năng nổi bật của requests-html&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Hỗ trợ đầy đủ JavaScript&lt;/li&gt;
&lt;li&gt;Hỗ trợ chọn thành phần của trang bằng CSS, Xpath&lt;/li&gt;
&lt;li&gt;Tự động theo chuyển trang&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Demo vài tính năng nổi bật&lt;/h2&gt;
&lt;p&gt;Cách cài đặt và sử dụng cơ bản của requests-html đã được tác giả nói rất rõ ở trang chủ do đó mính sẽ không nói lại nữa.&lt;/p&gt;
&lt;h3&gt;Render&lt;/h3&gt;
&lt;p&gt;Nhặt một đoạn văn bản mà đã được render bởi JavaScript:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http://www.familug.org/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Download&lt;/span&gt; &lt;span class="n"&gt;may&lt;/span&gt; &lt;span class="n"&gt;take&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;few&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;download&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;extracted&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dosontung007&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chromium&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;543305&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;UEFI vs BIOS - tạo USB boot cài Windows {something} từ Ubuntu&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;something&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;10&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khi bạn chạy render() lần đầu, method sẽ tải về &lt;code&gt;Chromium headless&lt;/code&gt; về thư mục &lt;code&gt;$HOME&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;XPath Selector&lt;/h3&gt;
&lt;p&gt;Requests-html hỗ trợ Xpath query như Scrapy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [25]: r.html.xpath(&amp;#39;//h3//a&amp;#39;)
Out[25]:
[&amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/02/hello-2018.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&amp;#39;&amp;gt;]
In [26]: r.html.xpath(&amp;#39;//h3//a/@href&amp;#39;)
Out[26]:
[&amp;#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&amp;#39;,
&amp;#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&amp;#39;,
&amp;#39;http://www.familug.org/2018/02/hello-2018.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;CSS Selector&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [26]: sel = &amp;#39;#Blog1 &amp;gt; div.blog-posts.hfeed &amp;gt; div:nth-child(1) &amp;gt; div &amp;gt; div &amp;gt; div &amp;gt; h3&amp;#39;

In [27]: r.html.find(sel, first=True)
Out[27]: &amp;lt;Element &amp;#39;h3&amp;#39; class=(&amp;#39;post-title&amp;#39;, &amp;#39;entry-title&amp;#39;) itemprop=&amp;#39;name&amp;#39;&amp;gt;

In [28]: r.html.find(sel, first=True).text
Out[28]: &amp;#39;UEFI vs BIOS - tạo USB boot cài Windows 10 từ Ubuntu&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;CSS selector này có thể copy từ developer tool của trình duyệt web.&lt;/p&gt;
&lt;h2&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;Requests-html là 1 thư viện tiện lợi thay thế cho combo requests + bs4, dễ dàng chuyển lên scrapy nếu cần thực hiện dự án crawling lớn, chuyên nghiệp.&lt;/p&gt;
&lt;p&gt;Chi tiết hơn xem tại: http://html.python-requests.org/.&lt;/p&gt;
&lt;p&gt;HẾT.&lt;/p&gt;
&lt;p&gt;TUNG491 at https://pymi.vn&lt;/p&gt;</content><category term="Trang chủ"></category><category term="requests-html"></category><category term="bs4"></category><category term="requests"></category><category term="python"></category><category term="crawl"></category></entry><entry><title>python -i file.py</title><link href="http://pp.pymi.vn/article/pythoni/" rel="alternate"></link><published>2018-05-04T00:00:00+07:00</published><updated>2018-05-04T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-04:/article/pythoni/</id><summary type="html">&lt;p&gt;chạy lệnh python với option -i&lt;/p&gt;</summary><content type="html">&lt;p&gt;Với một lập trình viên Python, quá trình sản xuất code là liên tục vòng tuần
hoàn:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;viết code -&amp;gt; python filename.py -&amp;gt; sửa code -&amp;gt; python filename.py ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;cho đến khi mệt nghỉ, hoặc vợ gọi.&lt;/p&gt;
&lt;p&gt;Option &lt;code&gt;-i&lt;/code&gt; mang lại một khả năng khá thú vị khi cho phép tiếp tục tương tác
với "đoạn code" sau khi đã chạy xong.&lt;/p&gt;
&lt;p&gt;Ví dụ, đoạn code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;
&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
&lt;span class="n"&gt;hot_links&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;hot_links&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3 get_data.py
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giờ muốn tải từng link về thì phải mở editor lên, sửa code và chạy thử tiếp...&lt;/p&gt;
&lt;p&gt;Chạy với &lt;code&gt;-i&lt;/code&gt;, ta có:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3 -i get_data.py
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn
&amp;gt;&amp;gt;&amp;gt; locals&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;link&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__doc__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;c&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;15&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;6&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__name__&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__builtins__&amp;#39;&lt;/span&gt;: &amp;lt;module &lt;span class="s1"&gt;&amp;#39;builtins&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;built-in&lt;span class="o"&gt;)&lt;/span&gt;&amp;gt;, &lt;span class="s1"&gt;&amp;#39;__spec__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;9&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__cached__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;__loader__&amp;#39;&lt;/span&gt;: &amp;lt;_frozen_importlib_external.SourceFileLoader object at 0x7f0bcaee7f28&amp;gt;, &lt;span class="s1"&gt;&amp;#39;hot_links&amp;#39;&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__package__&amp;#39;&lt;/span&gt;: None&lt;span class="o"&gt;}&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; c
&lt;span class="m"&gt;15&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; hot_links
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tất nhiên các Pymier chẳng ai dùng python chay cả, mà là ipython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ipython -i get_data.py
Python &lt;span class="m"&gt;3&lt;/span&gt;.5.2 &lt;span class="o"&gt;(&lt;/span&gt;default, Nov &lt;span class="m"&gt;17&lt;/span&gt; &lt;span class="m"&gt;2016&lt;/span&gt;, &lt;span class="m"&gt;17&lt;/span&gt;:05:23&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s1"&gt;&amp;#39;copyright&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;credits&amp;#39;&lt;/span&gt; or &lt;span class="s1"&gt;&amp;#39;license&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; more information
IPython &lt;span class="m"&gt;6&lt;/span&gt;.2.1 -- An enhanced Interactive Python. Type &lt;span class="s1"&gt;&amp;#39;?&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn

In &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;: hot_links
Out&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một option đơn giản, nhưng vô cùng tiện lợi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-i     : inspect interactively after running script; forces a prompt even
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hết.
HVN at https://pymi.vn and http://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tip"></category></entry><entry><title>Blog chung của các Pymier</title><link href="http://pp.pymi.vn/article/first/" rel="alternate"></link><published>2018-05-02T00:00:00+07:00</published><updated>2018-05-02T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-02:/article/first/</id><summary type="html">&lt;p&gt;Bài viết đầu tiên&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nơi các Pymier chia sẻ kiến thức cho nhau.
Để tạo một bài viết - hãy fork repo này và tạo một Pull Requests,
sau khi review xong bài viết sẽ được xuất bản.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Các bài viết về Python nên đặt trong Category &lt;code&gt;Python&lt;/code&gt;, và có tag &lt;code&gt;python&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Tên tác giả nên dùng GitHub username&lt;/li&gt;
&lt;li&gt;Bài viết sử dụng Markdown syntax&lt;/li&gt;
&lt;li&gt;Bài viết tuyển chọn sẽ được đưa vào category "Trang chủ"&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="memo"></category><category term="python"></category></entry></feed>